FILE_DATA = {"menu_entry_info.py": "ZnJvbSBhYmMgaW1wb3J0IGFic3RyYWN0bWV0aG9kCmltcG9ydCBtZW51X2VudHJ5CmltcG9ydCBzeXN0ZW1fY29tbWFuZApmcm9tIHVpIGltcG9ydCB1aQpmcm9tIGxlZHJpbmcgaW1wb3J0IGxlZHJpbmcKZnJvbSByZWNpcGVfdXBkYXRlciBpbXBvcnQgcmVjaXBlX3VwZGF0ZXIKZnJvbSBtZW51X21hbmFnZXIgaW1wb3J0IG1lbnVfbWFuYWdlcgpjbGFzcyBtZW51X2VudHJ5X2luZm8obWVudV9lbnRyeS5tZW51X2VudHJ5KToKCgogICAKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygiSU5GTyIsICJIYXZlIGEgbmljZSBkYXkgOikiKQoKICAgIGRlZiBwcmV2aWV3KHNlbGYpOgogICAgICAgIHByaW50KCJwcmV2aWV3IHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICB1aSgpLnNob3dfcmVjaXBlX2luZm9ybWF0aW9uKHNlbGYubmFtZSwgc2VsZi5kZXNjcmlwdGlvbikKCgogICAgZGVmIGFjdGl2YXRlKHNlbGYpOgogICAgICAgIHByaW50KCJhY3RpdmF0ZSB7fSIuZm9ybWF0KHNlbGYubmFtZSkpCiAgICAgICAgdWkoKS5zaG93X3RpdGxlc2NyZWVuKCkKCgogICAgZGVmIHRlYXJkb3duKHNlbGYpOgogICAgICAgIHByaW50KCJ0ZWFyZG93biB7fSIuZm9ybWF0KHNlbGYubmFtZSkpCgoKICAgIGRlZiB1cGRhdGUoc2VsZiwgX3N5c3RlbV9jb21tYW5kOiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCk6CiAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX05BVklHQVRJT046CiAgICAgICAgICAgICAgICBtZW51X21hbmFnZXIoKS5leGl0X2N1cnJlbnRfbWVudSgpCiAgICAgICAgICAg", "menu_entry_recipe_editor.py": "aW1wb3J0IG1lbnVfZW50cnkKaW1wb3J0IHN5c3RlbV9jb21tYW5kCmZyb20gdWkgaW1wb3J0IHVpCmZyb20gbGVkcmluZyBpbXBvcnQgbGVkcmluZwpmcm9tIHJlY2lwZV91cGRhdGVyIGltcG9ydCByZWNpcGVfdXBkYXRlcgpmcm9tIG1lbnVfbWFuYWdlciBpbXBvcnQgbWVudV9tYW5hZ2VyCmZyb20gcmVjaXBlX2VkaXRvciBpbXBvcnQgcmVjaXBlX2VkaXRvcgppbXBvcnQgaGVscGVyCmltcG9ydCBjb25maWcKCgpjbGFzcyBtZW51X2VudHJ5X3JlY2lwZV9lZGl0b3IobWVudV9lbnRyeS5tZW51X2VudHJ5KToKCiAgICBlZGl0b3I6IHJlY2lwZV9lZGl0b3IgPSBOb25lCiAgICBpbml0X3N1Y2Nlc3M6IGJvb2wgPSBGYWxzZQogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oIlJFQ0lQRSBFRElUT1IiLCAiRW5hYmxlIFdpZmkgYmFzZWQgb25saW5lIHJlY2lwZSBlZGl0b3IiKQoKICAgIGRlZiBwcmV2aWV3KHNlbGYpOgogICAgICAgIHByaW50KCJwcmV2aWV3IHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICB1aSgpLnNob3dfcmVjaXBlX2luZm9ybWF0aW9uKHNlbGYubmFtZSwgc2VsZi5kZXNjcmlwdGlvbikKCgogICAgZGVmIGFjdGl2YXRlKHNlbGYpOgogICAgICAgIHByaW50KCJhY3RpdmF0ZSB7fSIuZm9ybWF0KHNlbGYubmFtZSkpCiAgICAgICAgaWYgc2VsZi5lZGl0b3IgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYudGVhcmRvd24oKQoKICAgICAgICBzZWxmLmVkaXRvciA9IHJlY2lwZV9lZGl0b3IoKQoKICAgICAgICBpZiBub3Qgc2VsZi5lZGl0b3IuaGFzX2NhcGFiaWxpdGllcygpOgogICAgICAgICAgICBzZWxmLmluaXRfc3VjY2VzcyA9IFRydWUKICAgICAgICAgICAgdWkoKS5zaG93X21zZygiV2lmaSBhY2Nlc3MgcG9pbnQgaXMgbm90IHN1cHBvcnRlZCIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgICMgIENGR19FRElUT1JfV0lGSV9TVEFfU1NJRCBDRkdfRURJVE9SX1dJRklfU1RBX1BTSwogICAgICAgIHNzaWQ6IHN0ciA9IGNvbmZpZy5DRkdfRURJVE9SX1dJRklfU1RBX1NTSUQuZm9ybWF0KGhlbHBlci5nZXRfc3lzdGVtX2lkKCkpCiAgICAgICAgcHNrOiBzdHIgPSAgY29uZmlnLkNGR19FRElUT1JfV0lGSV9TVEFfUFNLLmZvcm1hdChoZWxwZXIuZ2V0X3N5c3RlbV9pZCgpKQoKICAgICAgICBpcDogc3RyPSBzZWxmLmVkaXRvci5vcGVuX2FjY2Vzc3BvaW50KHNzaWQsIHBzaykgICAgCiAgICAgICAgdWkoKS5zaG93X3JlY2lwZV9pbmZvcm1hdGlvbigiUGxlYXNlIGNvbm5lY3QgdXNpbmcgOiIsICJJUDp7fVxuU1NJRDp7fVxuUFNLOnt9Ii5mb3JtYXQoaXAsIHNzaWQsIHBzaykpCgogICAgICAgIHNlbGYuZWRpdG9yLnNldHVwX3dlYnNlcnZlcigpCgogICAgICAgIHNlbGYuaW5pdF9zdWNjZXNzID0gVHJ1ZQoKCiAgICBkZWYgdGVhcmRvd24oc2VsZik6CiAgICAgICAgcHJpbnQoInRlYXJkb3duIHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICBzZWxmLmVkaXRvci5zdG9wX3dlYnNlcnZlcigpCiAgICAgICAgc2VsZi5lZGl0b3IuZGlzYWJsZV93aWZpKCkKICAgICAgICBkZWwgZWRpdG9yCgoKICAgIGRlZiB1cGRhdGUoc2VsZiwgX3N5c3RlbV9jb21tYW5kOiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCk6CiAgICAgICAgaWYgc2VsZi5pbml0X3N1Y2Nlc3M6CiAgICAgICAgICAgIHNlbGYuZWRpdG9yLmhhbmRsZV9jb25uZWN0aW9uKCk=", "recipe_updater.py": "aW1wb3J0IGNvbmZpZwppbXBvcnQgc2V0dGluZ3MKaW1wb3J0IHRpbWUKaW1wb3J0IGhlbHBlcgoKCmNsYXNzIHJlY2lwZV91cGRhdGVfaGVscGVyOgoKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgaGFzX25ldHdvcmtfY2FwYWJpbGl0aWVzKCkgLT4gYm9vbDoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGltcG9ydCBuZXR3b3JrCiAgICAgICAgICAgIGltcG9ydCBzb2NrZXQKICAgICAgICAgICAgaW1wb3J0IHVyZXF1ZXN0cwogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGdldF9hcGlfdXJsKCkgLT4gc3RyOgogICAgICAgIGFwaV9lbmRwb2ludDogc3RyID0gc2V0dGluZ3Muc2V0dGluZ3MoKS5nZXRfc2V0dGluZ3NfZW50cnkoc2V0dGluZ3MuU0VUVElOR1NfRU5UUklFUy5ORVRXT1JLX0FQSV9FTlBPSU5UKQogICAgICAgIGlmIGFwaV9lbmRwb2ludCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gTm9uZQoKCiAgICAgICAgaWYgbm90IGFwaV9lbmRwb2ludC5zdGFydHN3aXRoKCdodHRwOi8vJyk6CiAgICAgICAgICAgIGFwaV9lbmRwb2ludCA9ICdodHRwOi8vJyArIGFwaV9lbmRwb2ludAogICAgICAgIHByaW50KCJjaGVja191cGRhdGVfdXJsOiBzZXQgYXBpIGVuZHBvaW50IHVybCB7fSIuZm9ybWF0KGFwaV9lbmRwb2ludCkpCiAgICAgICAgCiAgICAgICAgIyBSRU1PVkUgVEFJTElORyAvIFRPIE1BS0UgRk9XTExJTkcgVVJMIENBTExTIFZBTElECiAgICAgICAgaWYgYXBpX2VuZHBvaW50LmVuZHN3aXRoKCcvJykgYW5kIGxlbihhcGlfZW5kcG9pbnQpID4gMDoKICAgICAgICAgICAgYXBpX2VuZHBvaW50ID0gYXBpX2VuZHBvaW50WzotMV0KCiAgICAgICAgCiAgICAgICAgZmluYWxfYXBpX3VybDogc3RyID0gInt9L3t9Ii5mb3JtYXQoYXBpX2VuZHBvaW50LCBzdHIoaGVscGVyLmdldF9zeXN0ZW1faWQoKSkpCiAgICAgICAgcmV0dXJuIGZpbmFsX2FwaV91cmwKCnRyeToKICAgIGltcG9ydCBuZXR3b3JrCiAgICBpbXBvcnQgc29ja2V0CiAgICBpbXBvcnQgdXJlcXVlc3RzCgogICAgY2xhc3MgcmVjaXBlX3VwZGF0ZXI6CiAgICAgICAgCiAgICAgICAgQHN0YXRpY21ldGhvZAogICAgICAgIGRlZiBkaXNhYmxlX3dpZmkoKToKICAgICAgICAgICAgd2xhbiA9IG5ldHdvcmsuV0xBTihuZXR3b3JrLlNUQV9JRikKICAgICAgICAgICAgd2xhbi5hY3RpdmUoRmFsc2UpCiAgICAgICAgCgogICAgICAgIEBzdGF0aWNtZXRob2QKICAgICAgICBkZWYgZ2V0X2FwaV91cmwoKSAtPiBzdHI6CiAgICAgICAgICAgIHJldHVybiByZWNpcGVfdXBkYXRlX2hlbHBlci5nZXRfYXBpX3VybCgpCgogICAgICAgIEBzdGF0aWNtZXRob2QKICAgICAgICBkZWYgY29ubmVjdF93aWZpKCkgLT4gYm9vbDoKICAgICAgICAgICAgbmV0d29yay5jb3VudHJ5KGNvbmZpZy5DRkdfTkVUV09SS19XSUZJQ09VTlRSWSkKICAgICAgICAgICAgbmV0d29yay5ob3N0bmFtZShjb25maWcuQ0ZHX05FVFdPUktfSE9TVE5BTUUpICMuZm9ybWF0KGhlbHBlci5nZXRfc3lzdGVtX2lkKCkpKQoKICAgICAgICAgICAgd2xhbiA9IG5ldHdvcmsuV0xBTihuZXR3b3JrLlNUQV9JRikKICAgICAgICAgICAgd2xhbi5hY3RpdmUoVHJ1ZSkKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICBzc2lkID0gc2V0dGluZ3Muc2V0dGluZ3MoKS5nZXRfc2V0dGluZ3NfZW50cnkoc2V0dGluZ3MuU0VUVElOR1NfRU5UUklFUy5ORVRXT1JLX1dJRklfU1NJRCkKICAgICAgICAgICAgcHNrID0gc2V0dGluZ3Muc2V0dGluZ3MoKS5nZXRfc2V0dGluZ3NfZW50cnkoc2V0dGluZ3MuU0VUVElOR1NfRU5UUklFUy5ORVRXT1JLX1dJRklfUFNLKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgc3NpZCBpcyBOb25lIG9yIHBzayBpcyBOb25lOgogICAgICAgICAgICAgICAgcHJpbnQoIlNTSUQgT1IgUFNLIEZPUiBXSUZJIENPTk5FQ1RJT04gTk9UIFNFVCIpCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCgogICAgICAgICAgICBwcmludCgiQ09OTkVDVElORyBUTzoge30iLmZvcm1hdChzc2lkKSkKICAgICAgICAgICAgd2xhbi5jb25uZWN0KHNzaWQsIHBzaykKICAgICAgICAgICAgdGltZXIgPSAwCiAgICAgICAgICAgIHdoaWxlIHdsYW4uaXNjb25uZWN0ZWQoKSA9PSBGYWxzZToKICAgICAgICAgICAgICAgIHByaW50KCdXYWl0aW5nIGZvciBjb25uZWN0aW9uLi4uJykKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgIHRpbWVyID0gdGltZXIgKyAxCgogICAgICAgICAgICAgICAgaWYgdGltZXIgPiAxMDoKICAgICAgICAgICAgICAgICAgICB3bGFuLmFjdGl2ZShGYWxzZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHdsYW4uaXNjb25uZWN0ZWQoKToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAoKICAgICAgICBAc3RhdGljbWV0aG9kCiAgICAgICAgZGVmIGNoZWNrX3VwZGF0ZV91cmwoKSAtPiBib29sOgogICAgICAgICAgICBpZiBub3QgcmVjaXBlX3VwZGF0ZXIuY29ubmVjdF93aWZpKCk6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgIyBHRVQgTElTVCBPRiBSRUNJUEVTCiAgICAgICAgICAgICAgICByID0gdXJlcXVlc3RzLmdldChyZWNpcGVfdXBkYXRlX2hlbHBlci5nZXRfYXBpX3VybCgpKQogICAgICAgICAgICAgICAgci5jbG9zZSgpCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZSAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHByaW50KHN0cihlKSkKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAgICAgCiAgICAgICAgQHN0YXRpY21ldGhvZCAgIAogICAgICAgIGRlZiB1cGRhdGVfcmVjaXBlcygpIC0+IGJvb2w6CiAgICAgICAgICAgIGlmIG5vdCByZWNpcGVfdXBkYXRlci5jaGVja191cGRhdGVfdXJsKCk6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgICAgIGFwaV9lbmRwb2ludDogc3RyID0gcmVjaXBlX3VwZGF0ZV9oZWxwZXIuZ2V0X2FwaV91cmwoKQogICAgICAgIAogICAgICAgICAgICBwcmludCgiQVBJOiB7fSIuZm9ybWF0KGFwaV9lbmRwb2ludCkpCgogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICMgR0VUIExJU1QgT0YgUkVDSVBFUwogICAgICAgICAgICAgICAgaGVhZGVyczogZGljdCA9IHt9CiAgICAgICAgICAgICAgICByID0gdXJlcXVlc3RzLmdldCgie30vcmVjaXBlcyIuZm9ybWF0KGFwaV9lbmRwb2ludCksICBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgICAgICAgICByZWNpcGVfbGlzdCA9IHIuanNvbigpICMgWyJyZXNpcGVfZmlsZV91cmlfcmVsYXRpdmUiXQogICAgICAgICAgICAgICAgci5jbG9zZSgpCiAgICAgICAgICAgICAgICBpZiByZWNpcGVfbGlzdCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgICAgICAjIERPTldMT0FEIEVBQ0ggUkVDSVBFCiAgICAgICAgICAgICAgICAgICAgZm9yIHJlY2lwZSBpbiByZWNpcGVfbGlzdDoKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHVyZXF1ZXN0cy5nZXQoInt9L3JlY2lwZS97fSIuZm9ybWF0KGFwaV9lbmRwb2ludCwgcmVjaXBlKSwgIGhlYWRlcnM9aGVhZGVycykKICAgICAgICAgICAgICAgICAgICAgICAgZGxfcmVjaXBlID0gci5qc29uKCkgIyBbe2ZpbGVuYW1lX3dpdGhvdXRfZW5kaW5nLCByZWNpcGV9XQogICAgICAgICAgICAgICAgICAgICAgICByLmNsb3NlKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdyZWNpcGUnIGluIGRsX3JlY2lwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLnNldHRpbmdzLmluc3RhbmNlKCkud3JpdGVfanNvbl9maWxlKGRsX3JlY2lwZVsnbmFtZSddICsgIi5yZWNpcGUiLCBkbF9yZWNpcGVbJ3JlY2lwZSddKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoImNhbnQgc3RvcmUgcmVjaXBlZCBkYXRhIGJsb2NrIGR1ZSB0byBtaXNzaW5nIHJlY2lwZSBkaWN0IGJsb2NrIikKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHByaW50KHN0cihlKSkKICAgIAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJlY2lwZV91cGRhdGVyLmRpc2FibGVfd2lmaSgpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgCgpleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgCiAgICBjbGFzcyByZWNpcGVfdXBkYXRlcjoKICAgICAgICAKICAgICAgICBAc3RhdGljbWV0aG9kCiAgICAgICAgZGVmIGdldF9hcGlfdXJsKCkgLT4gc3RyOgogICAgICAgICAgICByZXR1cm4gcmVjaXBlX3VwZGF0ZV9oZWxwZXIuZ2V0X2FwaV91cmwoKQoKICAgICAgICBAc3RhdGljbWV0aG9kCiAgICAgICAgZGVmIGRpc2FibGVfd2lmaSgpOgogICAgICAgICAgICBwYXNzCiAgICAgICAgCiAgICAgICAgQHN0YXRpY21ldGhvZAogICAgICAgIGRlZiBjaGVja191cGRhdGVfdXJsKCkgLT4gYm9vbDoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgIEBzdGF0aWNtZXRob2QKICAgICAgICBkZWYgY29ubmVjdF93aWZpKCkgLT4gYm9vbDoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgIEBzdGF0aWNtZXRob2QKICAgICAgICBkZWYgdXBkYXRlX3JlY2lwZXMoKSAtPiBib29sOgogICAgICAgICAgICByZXR1cm4gRmFsc2U=", "main.py": "ZnJvbSB1dGltZSBpbXBvcnQgc2xlZXBfdXMNCmltcG9ydCB1YXN5bmNpbyBhcyBhaW8NCmZyb20gYWlvYnV0dG9uIGltcG9ydCBBSU9CdXR0b24NCmltcG9ydCBtYWNoaW5lDQppbXBvcnQgaGVscGVyDQpmcm9tIFNjYWxlcyBpbXBvcnQgU2NhbGVJbnRlcmZhY2UNCmZyb20gbGVkcmluZyBpbXBvcnQgbGVkcmluZw0KaW1wb3J0IHN5c3RlbV9jb21tYW5kDQojIE5FRURFRCBGT1IgRU5DT0RFUg0KZnJvbSBzeXMgaW1wb3J0IHBsYXRmb3JtDQppZiAnZXNwJyBpbiBwbGF0Zm9ybTogDQogICAgZnJvbSByb3RhcnlfaXJxX2VzcCBpbXBvcnQgUm90YXJ5SVJRDQplbGlmICdycCcgaW4gcGxhdGZvcm06DQogICAgZnJvbSByb3RhcnlfaXJxX3JwMiBpbXBvcnQgUm90YXJ5SVJRDQplbHNlOg0KICAgIGZyb20gcm90YXJ5X2lycV9weWIgaW1wb3J0IFJvdGFyeUlSUQ0KDQoNCmltcG9ydCBjb25maWcNCmltcG9ydCByZWNpcGVfbG9hZGVyDQppbXBvcnQgcmVjaXBlX3VwZGF0ZXINCmZyb20gdWkgaW1wb3J0IHVpDQppbXBvcnQgc2V0dGluZ3MNCmltcG9ydCBtZW51X21hbmFnZXINCiMgUExVR0lOUw0KaW1wb3J0IG1lbnVfZW50cnlfcmVjaXBlX3VwZGF0ZQ0KaW1wb3J0IG1lbnVfZW50cnlfcmVjaXBlX2VkaXRvcg0KaW1wb3J0IG1lbnVfZW50cnlfc2NhbGUNCmltcG9ydCBtZW51X2VudHJ5X2luZm8NCmltcG9ydCBtZW51X2VudHJ5X3JlY2lwZQ0KaW1wb3J0IG1lbnVfZW50cnlfaGFyZHdhcmV0ZXN0DQppbXBvcnQgbWVudV9lbnRyeV9jYWxpYnJhdGlvbg0KaW1wb3J0IG1lbnVfZW50cnlfcmVzdG9yZQ0KDQoNClRJTUVfRUxBUEVEX0RJVklET1I6IGludCA9IDINCnByaW50KCJtYWluOiBfX2VudHJ5X18iKQ0KDQpCVVRUT05fSU5ERVhfTEVGVCA9IDANCkJVVFRPTl9JTkRFWF9SSUdIVCA9IDENCkJVVFRPTl9JTkRFWF9NRU5VID0gMg0KDQpCVVRUT05fUFJFU1NFRCA9IDANCkJVVFRPTl9IT0xEID0gMQ0KQlVUVE9OX1JFTEVBU0VEID0gMg0KDQpsYXN0X2xlZnRfYnV0dG9uX3N0YXRlOiBpbnQgPSAwDQpidXR0b25fc3RhdGVfZGljdDogbGlzdCA9IFstMSwgLTEsIC0xXQ0KZW5jb2Rlcl9taWRkbGVfcG9pbnQ6IGludCA9IDENCmN1cnJlbnRfYnV0dG9uX2NtZDogc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQgPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCgpDQpjdXJyZW50X2J1dHRvbl9jbWQudHlwZSA9IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLkNPTU1BTkRfVFlQRV9OQVZJR0FUSU9ODQojIEdFTkVSQVRFRCBTWVNURU0gRVZFTlRTIERFUEVOSU5HIE9OIFRIRSBQUkVTU0VEIEJVVFRPTiBUTyBOQVZJR0FURSBUSE9VR0hUIE1FTlVTDQpkZWYgZ2VuZXJhdGVfYnV0dG9uX3N0YXRlKF9idXR0b25faW5kZXg6IGludCwgX2J1dHRvbl9ldmVudDogaW50LCBfYnV0dG9uX3N0YXRlOiBib29sKToNCg0KICAgIGlmIGJ1dHRvbl9zdGF0ZV9kaWN0W19idXR0b25faW5kZXhdID09IEJVVFRPTl9QUkVTU0VEIGFuZCBfYnV0dG9uX2V2ZW50ID09IEJVVFRPTl9SRUxFQVNFRDoNCiAgICAgICAgaWYgX2J1dHRvbl9pbmRleCA9PSBCVVRUT05fSU5ERVhfTEVGVDoNCiAgICAgICAgICAgIGN1cnJlbnRfYnV0dG9uX2NtZC5hY3Rpb24gPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX0xFRlQNCiAgICAgICAgZWxpZiBfYnV0dG9uX2luZGV4ID09IEJVVFRPTl9JTkRFWF9SSUdIVDoNCiAgICAgICAgICAgIGN1cnJlbnRfYnV0dG9uX2NtZC5hY3Rpb24gPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX1JJR0hUDQogICAgICAgIGVsaWYgX2J1dHRvbl9pbmRleCA9PSBCVVRUT05fSU5ERVhfTUVOVToNCiAgICAgICAgICAgIGN1cnJlbnRfYnV0dG9uX2NtZC5hY3Rpb24gPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX0VOVEVSDQoNCiAgICAgICAgbWVudV9tYW5hZ2VyLm1lbnVfbWFuYWdlcigpLnByb2Nlc3NfdXNlcl9jb21tYW5kcyhjdXJyZW50X2J1dHRvbl9jbWQpDQoNCiAgICBlbGlmIF9idXR0b25fZXZlbnQgPT0gQlVUVE9OX0hPTEQ6DQogICAgICAgIGlmIF9idXR0b25faW5kZXggPT0gQlVUVE9OX0lOREVYX0xFRlQ6DQogICAgICAgICAgICBjdXJyZW50X2J1dHRvbl9jbWQuYWN0aW9uID0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9FWElUDQogICAgICAgIGVsaWYgX2J1dHRvbl9pbmRleCA9PSBCVVRUT05fSU5ERVhfUklHSFQ6DQogICAgICAgICAgICBjdXJyZW50X2J1dHRvbl9jbWQuYWN0aW9uID0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9FTlRFUg0KICAgICAgICBlbGlmIF9idXR0b25faW5kZXggPT0gQlVUVE9OX0lOREVYX01FTlU6DQogICAgICAgICAgICBjdXJyZW50X2J1dHRvbl9jbWQuYWN0aW9uID0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9FWElUDQoNCiAgICAgICAgDQogICAgICAgIG1lbnVfbWFuYWdlci5tZW51X21hbmFnZXIoKS5wcm9jZXNzX3VzZXJfY29tbWFuZHMoY3VycmVudF9idXR0b25fY21kKQ0KICAgIA0KICAgIGJ1dHRvbl9zdGF0ZV9kaWN0W19idXR0b25faW5kZXhdID0gX2J1dHRvbl9ldmVudA0KICAgDQogICANCiAgIA0KDQoNCg0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoNCiAgICANCiAgICAjIElOSVQgUkVDSVBFIExPQURFUiBBTkQgSU5JVCBTRCBDQVJEDQogICAgc2V0dGluZ3Muc2V0dGluZ3MoKS5saXN0X2ZpbGVzKCkNCiAgICAjIFJFQ0lQRSBTVE9SQUdFDQogICAgcmVjaXBlX2xvYWRlci5yZWNpcGVfbG9hZGVyKCkubGlzdF9yZWNwaWVzKCkNCiAgICAjIElOSVQgTEVEIFJJTkcNCiAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX2Z1bGxfaHN2KGxlZHJpbmcoKS5DT0xPUl9QUkVTRVRfSFNWX0hfX0JMVUUpDQogICAgIyBJTklUIFVJDQogICAgdWkoKS5jbGVhcigpDQogICAgIyBJTklUIFNDQUxFDQogICAgU2NhbGVJbnRlcmZhY2UoKS50YXJlKCkNCg0KICAgICMgSU5JVCBVU0VSIElOUFVUIEJVVFRPTlMNCiAgICBsZWZ0X2J1dHRvbl9waW46IG1hY2hpbmUuUGluID0gbWFjaGluZS5QaW4oY29uZmlnLkNGR19CVVRUT05fTEVGVF9QSU4sIG1hY2hpbmUuUGluLklOLCBtYWNoaW5lLlBpbi5QVUxMX1VQKQ0KICAgIGxlZnRfYnV0dG9uID0gQUlPQnV0dG9uKGxhbWJkYSBidG46IG5vdCBsZWZ0X2J1dHRvbl9waW4udmFsdWUoKSkNCiAgICBsZWZ0X2J1dHRvbi5zZXRfaG9sZF9tcyhjb25maWcuQ0ZHX1VTRVJfTE9OR19CVVRUT05fUFJFU1NfVElNRSkNCiAgICAjIFJlZ2lzdGVyIGJ1dHRvbiBldmVudCBoYW5kbGVycw0KICAgIGxlZnRfYnV0dG9uLnNldF9ob2xkX2hhbmRsZXIobGFtYmRhIGJ0bjogZ2VuZXJhdGVfYnV0dG9uX3N0YXRlKEJVVFRPTl9JTkRFWF9MRUZULCBCVVRUT05fSE9MRCwgYnRuLmdldF9kZWJvdW5jZWQoKSkpICAgDQogICAgbGVmdF9idXR0b24uc2V0X3ByZXNzX2hhbmRsZXIobGFtYmRhIGJ0bjogZ2VuZXJhdGVfYnV0dG9uX3N0YXRlKEJVVFRPTl9JTkRFWF9MRUZULCBCVVRUT05fUFJFU1NFRCwgYnRuLmdldF9kZWJvdW5jZWQoKSkpDQogICAgbGVmdF9idXR0b24uc2V0X3JlbGVhc2VfaGFuZGxlcihsYW1iZGEgYnRuOiBnZW5lcmF0ZV9idXR0b25fc3RhdGUoQlVUVE9OX0lOREVYX0xFRlQsIEJVVFRPTl9SRUxFQVNFRCwgYnRuLmdldF9kZWJvdW5jZWQoKSkpIA0KICAgIA0KICAgIHJpZ2h0X2J1dHRvbl9waW46IG1hY2hpbmUuUGluID0gbWFjaGluZS5QaW4oY29uZmlnLkNGR19CVVRUT05fUklHSFRfUElOLCBtYWNoaW5lLlBpbi5JTiwgbWFjaGluZS5QaW4uUFVMTF9VUCkNCiAgICByaWdodF9idXR0b24gPSBBSU9CdXR0b24obGFtYmRhIGJ0bjogbm90IHJpZ2h0X2J1dHRvbl9waW4udmFsdWUoKSkNCiAgICByaWdodF9idXR0b24uc2V0X2hvbGRfbXMoY29uZmlnLkNGR19VU0VSX0xPTkdfQlVUVE9OX1BSRVNTX1RJTUUpDQogICAgIyBSZWdpc3RlciBidXR0b24gZXZlbnQgaGFuZGxlcnMNCiAgICByaWdodF9idXR0b24uc2V0X2hvbGRfaGFuZGxlcihsYW1iZGEgYnRuOiBnZW5lcmF0ZV9idXR0b25fc3RhdGUoQlVUVE9OX0lOREVYX1JJR0hULCBCVVRUT05fSE9MRCwgYnRuLmdldF9kZWJvdW5jZWQoKSkpICAgDQogICAgcmlnaHRfYnV0dG9uLnNldF9wcmVzc19oYW5kbGVyKGxhbWJkYSBidG46IGdlbmVyYXRlX2J1dHRvbl9zdGF0ZShCVVRUT05fSU5ERVhfUklHSFQsIEJVVFRPTl9QUkVTU0VELCBidG4uZ2V0X2RlYm91bmNlZCgpKSkNCiAgICByaWdodF9idXR0b24uc2V0X3JlbGVhc2VfaGFuZGxlcihsYW1iZGEgYnRuOiBnZW5lcmF0ZV9idXR0b25fc3RhdGUoQlVUVE9OX0lOREVYX1JJR0hULCBCVVRUT05fUkVMRUFTRUQsIGJ0bi5nZXRfZGVib3VuY2VkKCkpKSANCiAgICANCg0KICAgIA0KICAgICMjIFJFR0lTVEVSIEVOQ09ERVIgQlVUVE9OIEVWRU5UUyBCWSBSRU1BUFBJTkcgVEhFIEVOQ09ERVIgU1dJVENIIA0KICAgIGVuY29kZXJfYnV0dG9uX3BpbjogbWFjaGluZS5QaW4gPSBtYWNoaW5lLlBpbihjb25maWcuQ0ZHX0VOQ09ERVJfU1dfUElOLCBtYWNoaW5lLlBpbi5JTiwgbWFjaGluZS5QaW4uUFVMTF9VUCkNCiAgICAjd2hpbGUgVHJ1ZToNCiAgICAjICAgIHByaW50KGVuY29kZXJfYnV0dG9uX3Bpbi52YWx1ZSgpKQ0KICAgIA0KICAgIGVuY29kZXJfYnV0dG9uID0gQUlPQnV0dG9uKGxhbWJkYSBidG46IG5vdCBlbmNvZGVyX2J1dHRvbl9waW4udmFsdWUoKSkNCiAgICBlbmNvZGVyX2J1dHRvbi5zZXRfaG9sZF9oYW5kbGVyKGxhbWJkYSBidG46IGdlbmVyYXRlX2J1dHRvbl9zdGF0ZShCVVRUT05fSU5ERVhfTUVOVSwgQlVUVE9OX0hPTEQsIGJ0bi5nZXRfZGVib3VuY2VkKCkpKSAgIA0KICAgIGVuY29kZXJfYnV0dG9uLnNldF9wcmVzc19oYW5kbGVyKGxhbWJkYSBidG46IGdlbmVyYXRlX2J1dHRvbl9zdGF0ZShCVVRUT05fSU5ERVhfTUVOVSwgQlVUVE9OX1BSRVNTRUQsIGJ0bi5nZXRfZGVib3VuY2VkKCkpKQ0KICAgIGVuY29kZXJfYnV0dG9uLnNldF9yZWxlYXNlX2hhbmRsZXIobGFtYmRhIGJ0bjogZ2VuZXJhdGVfYnV0dG9uX3N0YXRlKEJVVFRPTl9JTkRFWF9NRU5VLCBCVVRUT05fUkVMRUFTRUQsIGJ0bi5nZXRfZGVib3VuY2VkKCkpKSANCiAgICANCiAgICAjIENPTkZJR1VSRSBFTkNPREVSDQogICAgZW5jb2RlcjogUm90YXJ5SVJRID0gUm90YXJ5SVJRKHBpbl9udW1fY2xrPWNvbmZpZy5DRkdfRU5DT0RFUl9DTEtfUElOLCBwaW5fbnVtX2R0PWNvbmZpZy5DRkdfRU5DT0RFUl9EVF9QSU4sIG1pbl92YWw9ZW5jb2Rlcl9taWRkbGVfcG9pbnQtZW5jb2Rlcl9taWRkbGVfcG9pbnQsIG1heF92YWw9ZW5jb2Rlcl9taWRkbGVfcG9pbnQqMiwgcmV2ZXJzZT1jb25maWcuQ0ZHX0VOQ09ERVJfSU5WRVJULCByYW5nZV9tb2RlPVJvdGFyeUlSUS5SQU5HRV9XUkFQKQ0KICAgIGVuY29kZXIuc2V0X2N1cnJlbnRfdmFsdWUoZW5jb2Rlcl9taWRkbGVfcG9pbnQpDQogICAgIyBJTklUIE1FTlUgU1lTVEVNDQogICAgDQogICAgIyBBREQgUkVDSVBFUw0KICAgIGZvciByIGluIHJlY2lwZV9sb2FkZXIucmVjaXBlX2xvYWRlcigpLmxpc3RfcmVjcGllcyhfaW5jbHVkZV9kZXNjcmlwdGlvbj1UcnVlKToNCiAgICAgICAgZmlsZW5hbWUsIG5hbWUsIGRlc2NyaXB0aW9uID0gcg0KICAgICAgICBwcmludCgiYWRkaW5nIHJlY2lwZSBlbnRyeToge30iLmZvcm1hdChmaWxlbmFtZSkpDQogICAgICAgICMgbmFtZSBkZXNjcmlwdGlvbiBhcmUgb25seSB1c2VkIGZvciBtZW51IGVudHJpZXMsIHJlY2lwZSB3aWxsIGJlIGxvYWRlZCBhZ2FpbiBieSBmaWxlbmFtZQ0KICAgICAgICBtZW51X21hbmFnZXIubWVudV9tYW5hZ2VyKCkuYWRkX3N1YmVudHJpZXMobWVudV9lbnRyeV9yZWNpcGUubWVudV9lbnRyeV9yZWNpcGUoZmlsZW5hbWUsIG5hbWUsIGRlc2NyaXB0aW9uKSkNCg0KICAgICMgQUREIE9USEVSIE1FTlVTDQogICAgbWVudV9tYW5hZ2VyLm1lbnVfbWFuYWdlcigpLmFkZF9zdWJlbnRyaWVzKG1lbnVfZW50cnlfY2FsaWJyYXRpb24ubWVudV9lbnRyeV9jYWxpYnJhdGlvbigpKQ0KDQogICAgDQogICAgIyBBREQgRUFDSCBSRUNJUEUgQVMgU0VQQVJBVEUgTUVOVQ0KICAgIGlmIHJlY2lwZV91cGRhdGVyLnJlY2lwZV91cGRhdGVfaGVscGVyLmhhc19uZXR3b3JrX2NhcGFiaWxpdGllcygpOg0KICAgICAgICBtZW51X21hbmFnZXIubWVudV9tYW5hZ2VyKCkuYWRkX3N1YmVudHJpZXMobWVudV9lbnRyeV9yZWNpcGVfdXBkYXRlLm1lbnVfZW50cnlfcmVjaXBlX3VwZGF0ZSgpKQ0KICAgICAgICBtZW51X21hbmFnZXIubWVudV9tYW5hZ2VyKCkuYWRkX3N1YmVudHJpZXMobWVudV9lbnRyeV9yZWNpcGVfZWRpdG9yLm1lbnVfZW50cnlfcmVjaXBlX2VkaXRvcigpKQ0KDQogICAgIyBBREQgRlVSVEhFUiBTWVNURU0gTUVOVVMNCiAgICBtZW51X21hbmFnZXIubWVudV9tYW5hZ2VyKCkuYWRkX3N1YmVudHJpZXMobWVudV9lbnRyeV9zY2FsZS5tZW51X2VudHJ5X3NjYWxlKCkpDQogICAgbWVudV9tYW5hZ2VyLm1lbnVfbWFuYWdlcigpLmFkZF9zdWJlbnRyaWVzKG1lbnVfZW50cnlfaW5mby5tZW51X2VudHJ5X2luZm8oKSkNCiAgICBtZW51X21hbmFnZXIubWVudV9tYW5hZ2VyKCkuYWRkX3N1YmVudHJpZXMobWVudV9lbnRyeV9oYXJkd2FyZXRlc3QubWVudV9lbnRyeV9oYXJkd2FyZXRlc3QoKSkNCiAgICBtZW51X21hbmFnZXIubWVudV9tYW5hZ2VyKCkuYWRkX3N1YmVudHJpZXMobWVudV9lbnRyeV9yZXN0b3JlLm1lbnVfZW50cnlfcmVzdG9yZSgpKQ0KICAgIA0KDQogICAgYXN5bmMgZGVmIG1haW5fdGFzaygpOg0KICAgICAgICANCiAgICAgICAgbGFzdF9zY2FsZV91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkNCiAgICAgICAgbGFzdF90aW1lcl91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkNCg0KICAgICAgICAjIERFQ0xFQVJFIFNPTUUgU1lTVEVNIFNUQVRFIE1FU1NBR0VTIElOIE9SREVSIFRPIEFDVk9JRCBSRUFMTE9DQVRJT04NCiAgICAgICAgY3VycmVudF9zY2FsZV9jbWQ6IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kID0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQoc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX1NDQUxFX1ZBTFVFLCBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5TQ0FMRV9DVVJSRU5UX1ZBTFVFKQ0KICAgICAgICBjdXJyZW50X3RpbWVydGlja19jbWQ6IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kID0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQoc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX1RJTUVSX0lSUSwgc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuVElNRVJfVElDSykNCg0KICAgICAgICAjIENSRUFURSBUQVNLUyBGT1IgVVNFUiBJTlBVVA0KICAgICAgICB0YXNrX2xlZnQgPSBhaW8uY3JlYXRlX3Rhc2sobGVmdF9idXR0b24uY29yb19jaGVjaygpKQ0KICAgICAgICB0YXNrX3JpZ2h0ID0gYWlvLmNyZWF0ZV90YXNrKHJpZ2h0X2J1dHRvbi5jb3JvX2NoZWNrKCkpDQogICAgICAgIHRhc2tfbWVudSA9IGFpby5jcmVhdGVfdGFzayhlbmNvZGVyX2J1dHRvbi5jb3JvX2NoZWNrKCkpDQogICAgICAgIA0KICAgICAgICBjdXJyZW50X2VuY29kZXJfY21kOiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCA9IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kKCkNCiAgICAgICAgY3VycmVudF9lbmNvZGVyX2NtZC50eXBlID0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX05BVklHQVRJT04NCiAgICAgICANCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIGF3YWl0IGFpby5zbGVlcF9tcygxKQ0KDQoNCiAgICAgICAgICAgICMgUVVFUlkgRU5DT0RFUiBBTkQgREVURVJNIFVTRVIgSU5UUFVUIFNUQVRFDQogICAgICAgICAgICBjdXJyZW50X2VuY29kZXJfdmFsdWUgPSBlbmNvZGVyLnZhbHVlKCkNCiAgICAgICAgICAgIGlmIGN1cnJlbnRfZW5jb2Rlcl92YWx1ZSAhPSBlbmNvZGVyX21pZGRsZV9wb2ludDoNCiAgICAgICAgICAgICAgICBjdXJyZW50X2VuY29kZXJfY21kLnZhbHVlID0gY3VycmVudF9lbmNvZGVyX3ZhbHVlDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgY3VycmVudF9lbmNvZGVyX3ZhbHVlID4gZW5jb2Rlcl9taWRkbGVfcG9pbnQ6DQogICAgICAgICAgICAgICAgICAgIGVuY29kZXIuc2V0X2N1cnJlbnRfdmFsdWUoZW5jb2Rlcl9taWRkbGVfcG9pbnQpDQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfZW5jb2Rlcl9jbWQuYWN0aW9uID0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9MRUZUDQogICAgICAgICAgICAgICAgICAgIG1lbnVfbWFuYWdlci5tZW51X21hbmFnZXIoKS5wcm9jZXNzX3VzZXJfY29tbWFuZHMoY3VycmVudF9lbmNvZGVyX2NtZCkNCiAgICAgICAgICAgICAgICBlbGlmIGN1cnJlbnRfZW5jb2Rlcl92YWx1ZSA8IGVuY29kZXJfbWlkZGxlX3BvaW50Og0KICAgICAgICAgICAgICAgICAgICBlbmNvZGVyLnNldF9jdXJyZW50X3ZhbHVlKGVuY29kZXJfbWlkZGxlX3BvaW50KQ0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2VuY29kZXJfY21kLmFjdGlvbiA9IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fUklHSFQNCiAgICAgICAgICAgICAgICAgICAgbWVudV9tYW5hZ2VyLm1lbnVfbWFuYWdlcigpLnByb2Nlc3NfdXNlcl9jb21tYW5kcyhjdXJyZW50X2VuY29kZXJfY21kKQ0KICAgICAgICAgICAgICANCg0KICAgICAgICAgICAgIyBQRVJJT0RJQyBSRUFEIE9GIFRIRSBTQ0FMRQ0KICAgICAgICAgICAgaWYgIGFicyhsYXN0X3NjYWxlX3VwZGF0ZSAtIGhlbHBlci5taWxsaXMoKSkgPiAoNTAvVElNRV9FTEFQRURfRElWSURPUik6DQogICAgICAgICAgICAgICAgbGFzdF9zY2FsZV91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkNCiAgICAgICAgICAgICAgICAjIFVQREFURSBTQ0FMRSBWQUxVRSBBTkQgU0VORCBUTyBQUk9DRVNTDQogICAgICAgICAgICAgICAgY3VycmVudF9zY2FsZV9jbWQudmFsdWUgPSBTY2FsZUludGVyZmFjZSgpLmdldF9jdXJyZW50X3dlaWdodCgpDQogICAgICAgICAgICAgICAgbWVudV9tYW5hZ2VyLm1lbnVfbWFuYWdlcigpLnByb2Nlc3Nfc3lzdGVtX2NvbW1hbmRzKGN1cnJlbnRfc2NhbGVfY21kKQ0KDQogICAgICAgICAgICAjIFNZU1RFTSBUSUNLIFRPIElNUExFTUVOVCBUSU1FUlMgU1VDSCBBUyBXQUlUSU5HIEZPUiBYIFNFQ09ORFMgSU4gUkVDSVBFUw0KICAgICAgICAgICAgaWYgIGFicyhsYXN0X3RpbWVyX3VwZGF0ZSAtIGhlbHBlci5taWxsaXMoKSkgPiAoMTAwMC9USU1FX0VMQVBFRF9ESVZJRE9SKToNCiAgICAgICAgICAgICAgICBjdXJyZW50X3RpbWVydGlja19jbWQudmFsdWUgPSBhYnMobGFzdF90aW1lcl91cGRhdGUgLSBoZWxwZXIubWlsbGlzKCkpDQogICAgICAgICAgICAgICAgbWVudV9tYW5hZ2VyLm1lbnVfbWFuYWdlcigpLnByb2Nlc3Nfc3lzdGVtX2NvbW1hbmRzKGN1cnJlbnRfdGltZXJ0aWNrX2NtZCkNCiAgICAgICAgICAgICAgICBsYXN0X3RpbWVyX3VwZGF0ZSA9IGhlbHBlci5taWxsaXMoKQ0KDQogICAgYWlvLnJ1bihtYWluX3Rhc2soKSkNCg0K", "menu_entry_recipe_update.py": "ZnJvbSBhYmMgaW1wb3J0IGFic3RyYWN0bWV0aG9kCmltcG9ydCBtZW51X2VudHJ5CmltcG9ydCBzeXN0ZW1fY29tbWFuZApmcm9tIHVpIGltcG9ydCB1aQpmcm9tIGxlZHJpbmcgaW1wb3J0IGxlZHJpbmcKZnJvbSByZWNpcGVfdXBkYXRlciBpbXBvcnQgcmVjaXBlX3VwZGF0ZXIKZnJvbSBtZW51X21hbmFnZXIgaW1wb3J0IG1lbnVfbWFuYWdlcgppbXBvcnQgdGltZQpjbGFzcyBtZW51X2VudHJ5X3JlY2lwZV91cGRhdGUobWVudV9lbnRyeS5tZW51X2VudHJ5KToKCgogICAgdXBkYXRlX29rOiBib29sID0gRmFsc2UKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygiUkVDSVBFIFVQREFURSIsICJVcGRhdGUgcmVjaXBlcyBvdmVyIE1peE1lYXN1cmVCdWRkeSBBUEkiKQoKICAgIGRlZiBwcmV2aWV3KHNlbGYpOgogICAgICAgIHByaW50KCJwcmV2aWV3IHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICB1aSgpLnNob3dfcmVjaXBlX2luZm9ybWF0aW9uKHNlbGYubmFtZSwgc2VsZi5kZXNjcmlwdGlvbikKCgogICAgZGVmIGFjdGl2YXRlKHNlbGYpOgogICAgICAgIHNlbGYudXBkYXRlX29rID0gRmFsc2UKICAgICAgICAKICAgICAgICBwcmludCgiYWN0aXZhdGUge30iLmZvcm1hdChzZWxmLm5hbWUpKQogICAgICAgIHRyeToKICAgICAgICAgICAgdWkoKS5zaG93X21zZygiQ0hFQ0sgRk9SIFdJRkkgQ09OTkVDVElPTiIpCiAgICAgICAgICAgIGlmIHJlY2lwZV91cGRhdGVyLmNoZWNrX3VwZGF0ZV91cmwoKToKICAgICAgICAgICAgICAgIHVpKCkuc2hvd19tc2coIldJRkkgU1VDQ0VTUyIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB1aSgpLnNob3dfbXNnKCJFUlJPUjogQ0hFQ0sgQ1JFREVOVElBTFMiKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAgICAgbWVudV9tYW5hZ2VyKCkuZXhpdF9jdXJyZW50X21lbnUoKQoKICAgICAgICAgICAgdWkoKS5zaG93X21zZygiUkVDSVBFIEZFVENISU5HIFNUQVJURUQiKQogICAgICAgICAgICBzZWxmLnVwZGF0ZV9vayA9IHJlY2lwZV91cGRhdGVyLnVwZGF0ZV9yZWNpcGVzKCkKICAgICAgICAgICAgaWYgc2VsZi51cGRhdGVfb2s6CiAgICAgICAgICAgICAgICB1aSgpLnNob3dfcmVjaXBlX2luZm9ybWF0aW9uKCJQTEVBU0UgUE9XRVJDWUNMRSBUSEUgREVWSUNFIiwgIlByZXNzIE5FWFQvUFJFViB0byBzaG93IFFSIENvZGUgb3IgVVJMIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHVpKCkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oIlVQREFURSBGQUlMRUQiLCAiUHJlc3MgTkVYVC9QUkVWIHRvIHNob3cgUVIgQ29kZSBvciBVUkwiKQoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGUpCiAgICAgICAgICAgIHVpKCkuc2hvd19tc2coIkVSUk9SOiBVUERBVEUgRVJST1IiKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIG1lbnVfbWFuYWdlcigpLmV4aXRfY3VycmVudF9tZW51KCkKCgogICAgICAgIAoKICAgIGRlZiB0ZWFyZG93bihzZWxmKToKICAgICAgICBwcmludCgidGVhcmRvd24ge30iLmZvcm1hdChzZWxmLm5hbWUpKQogICAgICAgIHRyeToKICAgICAgICAgICAgcmVjaXBlX3VwZGF0ZXIuZGlzYWJsZV93aWZpKCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGUpCgoKCiAgICBkZWYgdXBkYXRlKHNlbGYsIF9zeXN0ZW1fY29tbWFuZDogc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQpOgogICAgICAgIGlmIF9zeXN0ZW1fY29tbWFuZC50eXBlID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLkNPTU1BTkRfVFlQRV9OQVZJR0FUSU9OOgogICAgICAgICAgICAjIFVQREFURSBET0VTIE5PVEhJTkcgRVhDRVBUIEdPSU5HIEJBQ0sgVE8gTUFJTiBNRU5VCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLnVwZGF0ZV9vazoKICAgICAgICAgICAgICAgIG1lbnVfbWFuYWdlcigpLmV4aXRfY3VycmVudF9tZW51KCkKICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQudHlwZSA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5DT01NQU5EX1RZUEVfTkFWSUdBVElPTjoKICAgICAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLmFjdGlvbiA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX0VOVEVSOgogICAgICAgICAgICAgICAgbWVudV9tYW5hZ2VyKCkuZXhpdF9jdXJyZW50X21lbnUoKQogICAgICAgICAgICBlbGlmIF9zeXN0ZW1fY29tbWFuZC5hY3Rpb24gPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9MRUZUOgogICAgICAgICAgICAgICAgdWkoKS5zaG93X2RldmljZV9xcl9jb2RlKHJlY2lwZV91cGRhdGVyLmdldF9hcGlfdXJsKCkpCiAgICAgICAgICAgIGVsaWYgX3N5c3RlbV9jb21tYW5kLmFjdGlvbiA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX1JJR0hUOgogICAgICAgICAgICAgICAgdWkoKS5zaG93X3VybChyZWNpcGVfdXBkYXRlci5nZXRfYXBpX3VybCgpKQ==", "menu_entry_scale.py": "ZnJvbSBhYmMgaW1wb3J0IGFic3RyYWN0bWV0aG9kCmltcG9ydCBtZW51X2VudHJ5CmltcG9ydCBzeXN0ZW1fY29tbWFuZApmcm9tIHVpIGltcG9ydCB1aQpmcm9tIGxlZHJpbmcgaW1wb3J0IGxlZHJpbmcKZnJvbSBTY2FsZXMgaW1wb3J0IFNjYWxlSW50ZXJmYWNlCgpjbGFzcyBtZW51X2VudHJ5X3NjYWxlKG1lbnVfZW50cnkubWVudV9lbnRyeSk6CgoKICAgIFdJR0hUX0NIQU5HRV9ESVNQTEFZX1VQREFURTogZmxvYXQgPSAxLjAgIyBVUERBVCBESVNQTEFZIEFGVEVSTEVBU1QgWGcgQ0hBTkdFUwogICAgbGFzdF9zY2FsZV92YWx1ZTogZmxvYXQgPSAwLjAKICAgIG1heF9zY2FsZV92YWx1ZTogZmxvYXQgPSAwLjAKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygiU0NBTEUiLCAiQSBub3JtYWwga2l0Y2hlbiBzY2FsZSIpCgogICAgZGVmIHByZXZpZXcoc2VsZik6CiAgICAgICAgcHJpbnQoInByZXZpZXcge30iLmZvcm1hdChzZWxmLm5hbWUpKQogICAgICAgIHVpKCkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oc2VsZi5uYW1lLCBzZWxmLmRlc2NyaXB0aW9uKQoKCiAgICBkZWYgYWN0aXZhdGUoc2VsZik6CiAgICAgICAgcHJpbnQoImFjdGl2YXRlIHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICBTY2FsZUludGVyZmFjZSgpLnRhcmUoKQogICAgICAgIHVpKCkuc2hvd19zY2FsZShTY2FsZUludGVyZmFjZSgpLmdldF9jdXJyZW50X3dlaWdodCgpKQogICAgICAgIHNlbGYubGFzdF9zY2FsZV92YWx1ZSA9IDAuMAogICAgICAgIHNlbGYubWF4X3NjYWxlX3ZhbHVlID0gMTAuMAogICAgICAgIGxlZHJpbmcoKS5zZXRfbmVvcGl4ZWxfZnVsbCgxMCwgMTAsIDEwKQoKCgogICAgZGVmIHRlYXJkb3duKHNlbGYpOgogICAgICAgIHByaW50KCJ0ZWFyZG93biB7fSIuZm9ybWF0KHNlbGYubmFtZSkpCgoKICAgIGRlZiB1cGRhdGUoc2VsZiwgX3N5c3RlbV9jb21tYW5kOiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCk6CgogICAgICAgICMgVVBEQVRFIFNDQUxFIFZBTFVFCiAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX1NDQUxFX1ZBTFVFOgogICAgICAgICAgICBpZiBhYnMoX3N5c3RlbV9jb21tYW5kLnZhbHVlIC0gc2VsZi5sYXN0X3NjYWxlX3ZhbHVlKToKICAgICAgICAgICAgICAgIHNlbGYubGFzdF9zY2FsZV92YWx1ZSA9IF9zeXN0ZW1fY29tbWFuZC52YWx1ZQogICAgICAgICAgICAgICAgdWkoKS5zaG93X3NjYWxlKHNlbGYubGFzdF9zY2FsZV92YWx1ZSkgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgQUREIFNPTUUgTkVPUElYRUwgTElHSFROSU5HCiAgICAgICAgICAgICAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX3BlcmNlbnRhZ2UobWluKDEuMCwgYWJzKHNlbGYubWF4X3NjYWxlX3ZhbHVlIC8gc2VsZi5sYXN0X3NjYWxlX3ZhbHVlKSkpCgogICAgICAgICMgVEFSRSBTQ0FMRSBPTiBPSyBCVVRUT04KICAgICAgICBlbGlmIF9zeXN0ZW1fY29tbWFuZC50eXBlID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLkNPTU1BTkRfVFlQRV9OQVZJR0FUSU9OOgogICAgICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQuYWN0aW9uID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fRU5URVI6CiAgICAgICAgICAgICAgICBTY2FsZUludGVyZmFjZSgpLnRhcmUoKQogICAgICAgICAgICAgICAgc2VsZi5tYXhfc2NhbGVfdmFsdWUgPSAxMC4w", "ui.py": "ZnJvbSBzaW5nbGV0b24gaW1wb3J0IHNpbmdsZXRvbg0KaW1wb3J0IGNvbmZpZw0KaW1wb3J0IG1tYl9kaXNwbGF5DQppbXBvcnQgdVFSDQppbXBvcnQgaGVscGVyDQoNCkBzaW5nbGV0b24NCmNsYXNzIHVpOg0KICAgIA0KICANCiAgICANCg0KICAgIGRpc3BsYXk6IG1tYl9kaXNwbGF5DQoNCg0KDQogICAgZGVmIHBpeGVsKHNlbGYsIHgsIHksIHZhbHVlKToNCiAgICAgICAgc2VsZi5kaXNwbGF5LnBpeGVsKHgsIHksIHZhbHVlKQ0KICAgICAgICANCiAgICBkZWYgc2hvdyhzZWxmKToNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5zaG93KCkNCiAgICAgICAgDQogICAgZGVmIGRpc3BsYXlfcmVjdChzZWxmLCBfcG9zX3hfcGVyY2VudGFnZTppbnQsIF9wb3NfeV9wZXJjZW50YWdlOmludCwgX3Bvc194X2VuZF9wZXJjOmludCwgX3Bvc195X2VuZF9wZXJjKToNCiAgICAgICAgeDogaW50ID0gaW50KChjb25maWcuU0NSX1dJRFRIIC8gMTAwLjApICogX3Bvc194X3BlcmNlbnRhZ2UpDQogICAgICAgIHk6IGludCA9IGludCgoY29uZmlnLlNDUl9IRUlHSFQgLyAxMDAuMCkgKiBfcG9zX3lfcGVyY2VudGFnZSkNCiAgICAgICAgDQogICAgICAgIHhlOiBpbnQgPSBpbnQoKGNvbmZpZy5TQ1JfV0lEVEggLyAxMDAuMCkgKiBfcG9zX3hfZW5kX3BlcmMpDQogICAgICAgIHllOiBpbnQgPSBpbnQoKGNvbmZpZy5TQ1JfSEVJR0hUIC8gMTAwLjApICogX3Bvc195X2VuZF9wZXJjKQ0KICAgICAgICANCg0KICAgICAgICBzZWxmLmRpc3BsYXkuZmlsbF9yZWN0KHgsIHksIGFicyh4LXhlKSwgYWJzKHkteWUpLCAwKSAjIDAgPSBCRyBDT0xPUg0KICAgICAgICBzZWxmLmRpc3BsYXkuc2hvdygpDQogICAgICAgIA0KICAgICAgICANCiAgICBkZWYgZGlzcGxheV90ZXh0KHNlbGYsIF9zdHI6c3RyLCBfd3JhcDpib29sID0gRmFsc2UsIF9wb3NfeF9wZXJjZW50YWdlOmludCA9IDAsIF9wb3NfeV9wZXJjZW50YWdlOmludCA9IDApOg0KICAgICAgICBfc3RyID0gX3N0ci5yZXBsYWNlKCLDnyIsICJzcyIpLnJlcGxhY2UoIsO2IiwgIm9lIikucmVwbGFjZSgiw6QiLCAiYWUiKS5yZXBsYWNlKCLDvCIsICJ1ZSIpDQoNCiAgICAgICAgeDogaW50ID0gaW50KChjb25maWcuU0NSX1dJRFRIIC8gMTAwLjApICogX3Bvc194X3BlcmNlbnRhZ2UpDQogICAgICAgIHk6IGludCA9IGludCgoY29uZmlnLlNDUl9IRUlHSFQgLyAxMDAuMCkgKiBfcG9zX3lfcGVyY2VudGFnZSkNCg0KICAgICAgICBpZiBub3QgX3dyYXA6DQogICAgICAgICAgICBzZWxmLmRpc3BsYXkudGV4dChfc3RyLCB4LCB5KQ0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5LnNob3coKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICANCg0KICAgICAgICAjIFdSQVAgVEVYVA0KICAgICAgICB3b3JkcyA9IFtdDQogICAgICAgIG5ld19saW5lcyA9IF9zdHIuc3BsaXQoIlxuIikNCiAgICAgICAgZm9yIGwgaW4gbmV3X2xpbmVzOg0KICAgICAgICAgICAgaWYgbm90IGwgPT0gIiAiOiANCiAgICAgICAgICAgICAgICBmb3IgdyBpbiBzdHIobCkuc3BsaXQoIiAiKToNCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHcgPT0gIiAiOg0KICAgICAgICAgICAgICAgICAgICAgICAgd29yZHMuYXBwZW5kKHcpDQogICAgICAgIA0KICAgICAgICBjaGFyc19sZWZ0ID0gMSArIChjb25maWcuU0NSX1dJRFRIIC0geCkvIGludChjb25maWcuQ0ZHX0RJU1BMQVlfQ0hBUl9XSURUSCkNCiAgICAgICAgI3ByaW50KCJjaGFyc19sZWZ0OiB7fSIuZm9ybWF0KGNoYXJzX2xlZnQpKQ0KICAgICAgICB3b3Jkc193cml0dGVuID0gMA0KICAgICAgICBsaW5lX3kgPSB5DQogICAgICAgICNwcmludCh3b3JkcykNCiAgICAgICAgZm9yIHcgaW4gd29yZHM6DQogICAgICAgICAgICB3X3NwYWNlID0gInt9ICIuZm9ybWF0KHcpDQoNCg0KICAgICAgICAgICAgaWYgKHdvcmRzX3dyaXR0ZW4rbGVuKHdfc3BhY2UpKSA+PSBjaGFyc19sZWZ0Og0KICAgICAgICAgICAgICAgICNwcmludCgibGluZV95Ont9Ii5mb3JtYXQobGluZV95KSkNCiAgICAgICAgICAgICAgICB3b3Jkc193cml0dGVuID0gMA0KICAgICAgICAgICAgICAgIGxpbmVfeSA9IGxpbmVfeSArIGludChjb25maWcuQ0ZHX0RJU1BMQVlfTElORV9TUEFDSU5HKQ0KDQoNCiAgICAgICAgICAgICNwcmludCgidzoge30iLmZvcm1hdCh3X3NwYWNlLCBsaW5lX3kpKSANCiAgICAgICAgICAgIHhwb3MgPSB4ICsgd29yZHNfd3JpdHRlbiAqIGludChjb25maWcuQ0ZHX0RJU1BMQVlfQ0hBUl9XSURUSCkNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS50ZXh0KHdfc3BhY2UsIHhwb3MsIGxpbmVfeSkNCg0KICAgICAgICAgICAgd29yZHNfd3JpdHRlbiA9IHdvcmRzX3dyaXR0ZW4gKyBsZW4od19zcGFjZSkNCg0KICAgICAgICAgICAgaWYgd29yZHNfd3JpdHRlbiA+PSBjaGFyc19sZWZ0Og0KICAgICAgICAgICAgICAgICNwcmludCgibGluZV95Ont9Ii5mb3JtYXQobGluZV95KSkNCiAgICAgICAgICAgICAgICB3b3Jkc193cml0dGVuID0gMA0KICAgICAgICAgICAgICAgIGxpbmVfeSA9IGxpbmVfeSArIGludChjb25maWcuQ0ZHX0RJU1BMQVlfTElORV9TUEFDSU5HKQ0KICAgICAgICAgICAgDQogICAgICAgIHNlbGYuZGlzcGxheS5zaG93KCkNCiAgICAgICAgICAgDQoNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgIyBDUkVBVEUgQSBESVNQTEFZIElOU1RBTkNFDQogICAgICAgIHNlbGYuZGlzcGxheSA9IG1tYl9kaXNwbGF5Lm1tYl9kaXNwbGF5LmRpc3BsYXlfaW5zdGFuY2VfY3JlYXRvcigpDQoNCiAgICAgICAgaWYgc2VsZi5kaXNwbGF5IGlzIE5vbmU6DQogICAgICAgICAgICBwcmludCgiaW52YWxpZCBkaXNwbGF5IGNvbmZpZyIpDQoNCiAgICAgICAgIA0KICAgICAgICBzZWxmLmRpc3BsYXkuZXJhc2UoKQ0KDQogICAgICAgIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZTogaW50ID0gLTENCiAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfY29udGVudCA9ICIuIg0KICAgIA0KICAgIA0KICAgIGRlZiBjbGVhcihzZWxmKToNCiAgICAgICAgc2VsZi5kaXNwbGF5LmVyYXNlKCkNCiAgICAgICAgc2VsZi5zZXRfZnVsbF9yZWZyZXNoKCkNCiAgICANCiAgICBkZWYgc2hvd19tc2coc2VsZiwgX21lc3NhZ2U6IHN0ciA9ICIiKToNCg0KICAgICAgICBpZiBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgIT0gMCBvciBfbWVzc2FnZSAhPSBzZWxmLmxhc3RfZGlzcGxheV9jb250ZW50Og0KICAgICAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfY29udGVudCA9IF9tZXNzYWdlDQoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5lcmFzZSgpDQogICAgICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCgie30iLmZvcm1hdChfbWVzc2FnZSksIFRydWUsIDAsIDApDQoNCiAgICAgICAgICAgIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSA9IDANCiANCg0KICAgIGRlZiBzaG93X3VybChzZWxmLCBfdXJsOiBzdHIgPSAiIik6DQogICAgICAgIA0KICAgICAgICBzcGxpdHRlZF91cmw6IHN0ciA9ICIiDQogICAgICAgIGluZGV4OiBpbnQgPSAwDQogICAgICAgIHNwbGl0X2FmdGVyX2NoYXJzID0gaW50KChjb25maWcuU0NSX1dJRFRIIC8gY29uZmlnLkNGR19ESVNQTEFZX0NIQVJfV0lEVEgpICogMC45NSkNCiAgICAgICAgZm9yIHcgaW4gX3VybDoNCiAgICAgICAgICAgIGluZGV4ID0gaW5kZXggKyAxDQoNCiAgICAgICAgICAgIHNwbGl0dGVkX3VybCA9IHNwbGl0dGVkX3VybCArIHcNCg0KICAgICAgICAgICAgaWYgaW5kZXggPj0gc3BsaXRfYWZ0ZXJfY2hhcnM6DQogICAgICAgICAgICAgICAgc3BsaXR0ZWRfdXJsID0gc3BsaXR0ZWRfdXJsICsgIiAiDQogICAgICAgICAgICAgICAgaW5kZXggPSAwDQogICAgICAgIA0KICAgICAgICBzZWxmLmRpc3BsYXkuZXJhc2UoKQ0KICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCgie30iLmZvcm1hdChzcGxpdHRlZF91cmwpLCBUcnVlLCAwLCAwKQ0KICAgICAgICANCiAgICAgICAgDQogICAgZGVmIHNob3dfcmVjaXBlX2luZm9ybWF0aW9uKHNlbGYsIF9uYW1lOnN0ciwgX2Rlc2NyaXB0aW9uOiBzdHIgPSAiIik6DQogICAgICAgIGZ1bGxfcmVmcmVzaCA9IEZhbHNlDQogICAgICAgIGlmIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSAhPSAxOg0KICAgICAgICAgICAgZnVsbF9yZWZyZXNoID0gVHJ1ZQ0KICAgICAgICBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgPSAxDQogICAgICAgIA0KICAgICAgICBmdWxsX3JlZnJlc2ggPSBUcnVlDQogICAgICAgIGlmIGZ1bGxfcmVmcmVzaDoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5lcmFzZSgpDQoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJ7fSIuZm9ybWF0KF9uYW1lKSwgVHJ1ZSwgMCwgNykNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJ7fSIuZm9ybWF0KF9kZXNjcmlwdGlvbiksIFRydWUsIDAsIDM1KQ0KICAgICAgICAgIA0KICAgIA0KICAgIA0KICAgIGRlZiBzZXRfZnVsbF9yZWZyZXNoKHNlbGYpOg0KICAgICAgICBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgPSAtMQ0KICAgICAgICANCiAgICAgDQogICAgZGVmIHNob3dfcmVjaXBlX3N0ZXAoc2VsZiwgX2FjdGlvbjogc3RyLCBfaW5ncmVkaWVudDogc3RyKToNCiAgICAgICAgZnVsbF9yZWZyZXNoID0gRmFsc2UNCiAgICAgICAgaWYgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlICE9IDI6DQogICAgICAgICAgICBmdWxsX3JlZnJlc2ggPSBUcnVlDQogICAgICAgIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSA9IDINCg0KICAgICAgICBmdWxsX3JlZnJlc2ggPSBUcnVlDQogICAgICAgIGlmIGZ1bGxfcmVmcmVzaDoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5lcmFzZSgpDQoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJ7fSIuZm9ybWF0KF9hY3Rpb24pLCBUcnVlLCAwLCA3KQ0KICAgICAgICAgICANCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJ7fSIuZm9ybWF0KF9pbmdyZWRpZW50KSwgVHJ1ZSwgMCwgMzUpICAgIA0KICAgICAgICAgICAgIyBTSE9XIFNURVBTDQogICAgICAgICAgICAjc2VsZi5kaXNwbGF5X3RleHQoInt9IC8ge30iLmZvcm1hdChfY3VycmVudF9zdGVwLCBfbWF4X3N0ZXBzKSwgVHJ1ZSwgMzcsIDkwKQ0KDQoNCiAgICAgICAgICAgICANCiAgICAgICAgIA0KICAgICAgICANCiAgICAgICAgICAgICAgDQogICAgICAgIA0KICAgIGRlZiBzaG93X3RpdGxlc2NyZWVuKHNlbGYpOg0KICAgICAgICBmdWxsX3JlZnJlc2ggPSBGYWxzZQ0KICAgICAgICBpZiBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgIT0gMzoNCiAgICAgICAgICAgIGZ1bGxfcmVmcmVzaCA9IFRydWUNCiAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlID0gMw0KICAgICAgICANCiAgICAgICAgZnVsbF9yZWZyZXNoID0gVHJ1ZQ0KICAgICAgICBpZiBmdWxsX3JlZnJlc2g6DQogICAgICAgICAgICBzZWxmLmRpc3BsYXkuZXJhc2UoKQ0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5X3RleHQoIk1JWCIsIFRydWUsIDI1LCAxMCkNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJNRUFTVVJFIiwgVHJ1ZSwgMjUsIDMwKQ0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5X3RleHQoIkJVRERZIiwgVHJ1ZSwgMjUsIDUwKQ0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5X3RleHQoInt9Ii5mb3JtYXQoaGVscGVyLmdldF9zeXN0ZW1faWQoKSksIFRydWUsIDcsIDcwKQ0KICAgIA0KICAgIA0KICAgIGRlZiBzaG93X3JlY2lwZV9pbmdyZWRpZW50cyhzZWxmLCBfaW5ncmVkaWVudHM6IGxpc3Rbc3RyXSwgX2ZvcmNlX3JlZnJlc2g6IGJvb2wgPSBUcnVlKToNCiAgICAgICAgZnVsbF9yZWZyZXNoID0gRmFsc2UNCiAgICAgICAgaWYgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlICE9IDQgb3IgX2ZvcmNlX3JlZnJlc2g6DQogICAgICAgICAgICBmdWxsX3JlZnJlc2ggPSBUcnVlDQogICAgICAgIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSA9IDQNCiAgICAgICAgDQogICAgICAgIGZ1bGxfcmVmcmVzaCA9IFRydWUNCiAgICAgICAgaWYgZnVsbF9yZWZyZXNoOg0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5LmVyYXNlKCkNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJJbmdyZWRpZW50cyIsIFRydWUsIDAsIDcpDQogDQogICAgICAgIHRleHQgPSAiIg0KICAgICAgICBmb3IgaXRlbSBpbiBfaW5ncmVkaWVudHM6DQogICAgICAgICAgICB0ZXh0ID0gdGV4dCArICJ7fVxuIi5mb3JtYXQoaXRlbSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KHRleHQsIFRydWUsIDAsIDMwKQ0KDQogICAgDQogICAgICANCiAgICBkZWYgc2hvd19zY2FsZShzZWxmLCBfdmFsdWU6IGludCk6DQogICAgICAgIF92YWx1ZSA9IGludChfdmFsdWUpDQogICAgICAgIGZ1bGxfcmVmcmVzaCA9IEZhbHNlDQogICAgICAgIGlmIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSAhPSA1Og0KICAgICAgICAgICAgZnVsbF9yZWZyZXNoID0gVHJ1ZQ0KICAgICAgICBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgPSA1DQogICAgICAgIA0KICAgICAgICBmdWxsX3JlZnJlc2ggPSBUcnVlDQogICAgICAgIGlmIGZ1bGxfcmVmcmVzaDoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5lcmFzZSgpDQogICAgICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCgiU0NBTEUgTU9ERSIsIFRydWUsIDAsIDcpDQogICAgICAgIA0KICAgICAgICBzZWxmLmRpc3BsYXlfcmVjdCgyNSw1MCwgMTAwLCA2MCkNCiAgICAgICAgc2VsZi5kaXNwbGF5X3RleHQoIns6MDRkfWciLmZvcm1hdChfdmFsdWUpLCBUcnVlLCAyNSwgNTApDQogICAgDQoNCiAgICBkZWYgc2hvd19kZXZpY2VfcXJfY29kZShzZWxmLCBfdXJsOnN0ciA9ICIiLCBfb2Zmc2V0X3g6aW50ID0gMCwgX29mZnNldF95OmludCA9IDApOg0KICAgICAgICBmdWxsX3JlZnJlc2ggPSBGYWxzZQ0KICAgICAgICBpZiBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgIT0gNjoNCiAgICAgICAgICAgIGZ1bGxfcmVmcmVzaCA9IFRydWUNCiAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlID0gNg0KICAgICAgICANCiAgICAgICAgZnVsbF9yZWZyZXNoID0gVHJ1ZQ0KICAgICAgICBpZiBmdWxsX3JlZnJlc2g6DQogICAgICAgICAgICBzZWxmLmRpc3BsYXkuZXJhc2UoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBxciA9IHVRUi5RUkNvZGUoKQ0KICAgICAgICAgICAgaWYgX3VybCA9PSAiIjoNCiAgICAgICAgICAgICAgICBxci5hZGRfZGF0YSgie30iLmZvcm1hdChoZWxwZXIuZ2V0X3N5c3RlbV9pZCgpKSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcXIuYWRkX2RhdGEoInt9Ii5mb3JtYXQoX3VybCkpDQogICAgICAgICAgICBtYXRyaXggPSBxci5nZXRfbWF0cml4KCkNCiAgICAgICAgICAgIGZvciB5IGluIHJhbmdlKGxlbihtYXRyaXgpKjIpOiAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBmb3IgeCBpbiByYW5nZShsZW4obWF0cml4WzBdKSoyKTogICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBub3QgbWF0cml4W2ludCh5LzIpXVtpbnQoeC8yKV0gICANCiAgICAgICAgICAgICAgICAgICAgc2VsZi5waXhlbCh4ICsgX29mZnNldF94LCB5ICsgX29mZnNldF95LCB2YWx1ZSkNCiAgICAgICAgc2VsZi5zaG93KCkgIA0KDQo=", "menu_entry_calibration.py": "ZnJvbSBhYmMgaW1wb3J0IGFic3RyYWN0bWV0aG9kCmltcG9ydCBtZW51X2VudHJ5CmltcG9ydCBzeXN0ZW1fY29tbWFuZApmcm9tIHVpIGltcG9ydCB1aQpmcm9tIGxlZHJpbmcgaW1wb3J0IGxlZHJpbmcKZnJvbSBTY2FsZXMgaW1wb3J0IFNjYWxlSW50ZXJmYWNlCmltcG9ydCB0aW1lCmltcG9ydCBjb25maWcKaW1wb3J0IG1lbnVfbWFuYWdlcgppbXBvcnQgc2V0dGluZ3MKCgpjbGFzcyBtZW51X2VudHJ5X2NhbGlicmF0aW9uKG1lbnVfZW50cnkubWVudV9lbnRyeSk6CgogICAgTUVOVV9TVEFURV9DTEVBUl9QTEFURV9JTklUID0gMAogICAgTUVOVV9TVEFURV9DTEVBUl9QTEFURV9UQVJJTkcgPSAxCgogICAgTUVOVV9TVEFURV9GVUxMX1BMQVRFX0lOSVQgPSAyCiAgICBNRU5VX1NUQVRFX0ZVTExfUExBVEVfUExBQ0UgPSAzCiAgICBNRU5VX1NUQVRFX0ZVTExfUExBVEVfVEFSSU5HID0gNAoKICAgIE1FQVNVUkVNRU5UX0FWRVJBR0lOR19QT0lOVFM6IGludCA9IDEwCiAgICBDQUxJQlJBVElPTl9XRUlHSFRfVVNFUl9TVEVQUzogZmxvYXQgPSA1LjAKICAgIE1JTl9DQUxJQlJBVElPTl9XRUlHSFQ6IGZsb2F0ID0gNTAuMAogICAgbWVudV9zdGF0ZTogaW50ID0gMAoKICAgIGNhbGlicmF0aW9uX3ZhbHVlX2VtcHR5OiBmbG9hdCA9IDAuMAogICAgY2FsaWJyYXRpb25fdmFsdWVfZnVsbDogZmxvYXQgPSAwLjAKICAgIGNhbGlicmF0aW9uX3dlaWdodF93ZWlnaHQ6IGZsb2F0ID0gbWluKGNvbmZpZy5DRkdfQ0FMSUJSQVRJT05fV0VJR0hUX1dFSUdIVCwgTUlOX0NBTElCUkFUSU9OX1dFSUdIVCkKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygiQ0FMSUJSQVRJT04iLCAiQ2FsaWJyYXRlIHN5c3RlbSBzY2FsZSIpCgogICAgZGVmIHByZXZpZXcoc2VsZik6CiAgICAgICAgcHJpbnQoInByZXZpZXcge30iLmZvcm1hdChzZWxmLm5hbWUpKQogICAgICAgIHVpKCkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oc2VsZi5uYW1lLCBzZWxmLmRlc2NyaXB0aW9uKQoKCiAgICBkZWYgYWN0aXZhdGUoc2VsZik6CiAgICAgICAgcHJpbnQoImFjdGl2YXRlIHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICAKICAgICAgICBTY2FsZUludGVyZmFjZSgpLnJlc2V0X2NhbGlicmF0aW9uKCkKICAgICAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX2Z1bGwoMTAsIDEwLCAxMCkKCiAgICAgICAgdWkoKS5zaG93X21zZygiUGxlYXNlIGNsZWFyIHNjYWxlIHBsYXRlIGFuZCBwcmVzcyBvayIpCiAgICAgICAgc2VsZi5tZW51X3N0YXRlID0gc2VsZi5NRU5VX1NUQVRFX0NMRUFSX1BMQVRFX0lOSVQKCiAgICAgICAgIyBSRVNFVCBNRUFTVVJFRCBWQUxVRVMKICAgICAgICBzZWxmLmNhbGlicmF0aW9uX3ZhbHVlX2VtcHR5ID0gMC4wCiAgICAgICAgc2VsZi5jYWxpYnJhdGlvbl92YWx1ZV9mdWxsID0gMC4wCiAgICAgICAgc2VsZi5jYWxpYnJhdGlvbl93ZWlnaHRfd2VpZ2h0ID0gbWluKGNvbmZpZy5DRkdfQ0FMSUJSQVRJT05fV0VJR0hUX1dFSUdIVCwgc2VsZi5NSU5fQ0FMSUJSQVRJT05fV0VJR0hUKQoKCiAgICBkZWYgdGVhcmRvd24oc2VsZik6CiAgICAgICAgcHJpbnQoInRlYXJkb3duIHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKCgogICAgZGVmIHVwZGF0ZShzZWxmLCBfc3lzdGVtX2NvbW1hbmQ6IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kKToKICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQudHlwZSA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5DT01NQU5EX1RZUEVfTkFWSUdBVElPTjoKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHNlbGYubWVudV9zdGF0ZSA9PSBzZWxmLk1FTlVfU1RBVEVfQ0xFQVJfUExBVEVfSU5JVCBhbmQgX3N5c3RlbV9jb21tYW5kLmFjdGlvbiA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX0VOVEVSOgogICAgICAgICAgICAgICAgc2VsZi5tZW51X3N0YXRlID0gc2VsZi5NRU5VX1NUQVRFX0NMRUFSX1BMQVRFX1RBUklORwogICAgICAgICAgICAgICAgbGVkcmluZygpLnNldF9uZW9waXhlbF9mdWxsKDUwLCAwLCAwKQogICAgICAgICAgICAgICAgdWkoKS5zaG93X3JlY2lwZV9pbmZvcm1hdGlvbigiUExFQVNFIFdBSVQiLCAiVEFSSU5HIikKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc2VsZi5NRUFTVVJFTUVOVF9BVkVSQUdJTkdfUE9JTlRTKToKICAgICAgICAgICAgICAgICAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX3BlcmNlbnRhZ2UoaS8oc2VsZi5NRUFTVVJFTUVOVF9BVkVSQUdJTkdfUE9JTlRTKjEuMCkpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxpYnJhdGlvbl92YWx1ZV9lbXB0eSArPSBTY2FsZUludGVyZmFjZSgpLmdldF9jdXJyZW50X3dlaWdodCgpCiAgICAgICAgICAgICAgICAgICAgdWkoKS5zaG93X3JlY2lwZV9pbmZvcm1hdGlvbigiUExFQVNFIFdBSVQiLCAiTUVBU1VSSU5HOiB7fS97fSIuZm9ybWF0KGksIHNlbGYuTUVBU1VSRU1FTlRfQVZFUkFHSU5HX1BPSU5UUykpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCgogICAgICAgICAgICAgICAgc2VsZi5jYWxpYnJhdGlvbl92YWx1ZV9lbXB0eSA9IHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZW1wdHkgL3NlbGYuTUVBU1VSRU1FTlRfQVZFUkFHSU5HX1BPSU5UUwogICAgICAgICAgICAgICAgdWkoKS5zaG93X3JlY2lwZV9pbmZvcm1hdGlvbigiRklSU1QgUlVOIERPTkUiLCAiUkFXX1ZBTFVFOnt9Ii5mb3JtYXQoc2VsZi5jYWxpYnJhdGlvbl92YWx1ZV9lbXB0eSkpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgICAgICBzZWxmLm1lbnVfc3RhdGUgPSBzZWxmLk1FTlVfU1RBVEVfRlVMTF9QTEFURV9JTklUCiAgICAgICAgICAgICAgICB1aSgpLnNob3dfbXNnKCJQcmVzcyBvayB0byBlbnRlciBjYWxpYnJhdGlvbiB3ZWlnaHQgd2VpZ2h0IikKICAgICAgICAgICAgICAgIGxlZHJpbmcoKS5zZXRfbmVvcGl4ZWxfZnVsbCgwLCAwLCAxMCkKCgogICAgICAgICAgICBlbGlmIHNlbGYubWVudV9zdGF0ZSA9PSBzZWxmLk1FTlVfU1RBVEVfRlVMTF9QTEFURV9JTklUOgogICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLmFjdGlvbiA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX0VOVEVSOgogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuY2FsaWJyYXRpb25fd2VpZ2h0X3dlaWdodCA+PSBzZWxmLk1JTl9DQUxJQlJBVElPTl9XRUlHSFQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHVpKCkuc2hvd19tc2coIlBsZWFzZSBwbGFjZSBjYWxpYnJhdGlvbiB3ZWlnaHQgb24gdGhlIHBsYXRlIGFuZCBwcmVzcyBvayIpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWVudV9zdGF0ZSA9ICBzZWxmLk1FTlVfU1RBVEVfRlVMTF9QTEFURV9QTEFDRQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB1aSgpLnNob3dfbXNnKCJDYWxpYnJhdGlvbiB3ZWlnaHQgbXVzdCBiZSBhdCBsZWFzdCB7fWciLmZvcm1hdChzZWxmLk1JTl9DQUxJQlJBVElPTl9XRUlHSFQpKQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDIpCgogICAgICAgICAgICAgICAgZWxpZiBfc3lzdGVtX2NvbW1hbmQuYWN0aW9uID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fUklHSFQ6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxpYnJhdGlvbl93ZWlnaHRfd2VpZ2h0ID0gc2VsZi5jYWxpYnJhdGlvbl93ZWlnaHRfd2VpZ2h0ICsgc2VsZi5DQUxJQlJBVElPTl9XRUlHSFRfVVNFUl9TVEVQUwogICAgICAgICAgICAgICAgZWxpZiBfc3lzdGVtX2NvbW1hbmQuYWN0aW9uID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fTEVGVDoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLmNhbGlicmF0aW9uX3dlaWdodF93ZWlnaHQgPj0gKHNlbGYuTUlOX0NBTElCUkFUSU9OX1dFSUdIVCArIHNlbGYuQ0FMSUJSQVRJT05fV0VJR0hUX1VTRVJfU1RFUFMpOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGlicmF0aW9uX3dlaWdodF93ZWlnaHQgPSBzZWxmLmNhbGlicmF0aW9uX3dlaWdodF93ZWlnaHQgLSBzZWxmLkNBTElCUkFUSU9OX1dFSUdIVF9VU0VSX1NURVBTCgogICAgICAgICAgICAgICAgIyBVUERBVEUgVkFMVUUgT04gRElTUExBWQogICAgICAgICAgICAgICAgdWkoKS5jbGVhcigpCiAgICAgICAgICAgICAgICB1aSgpLnNob3dfcmVjaXBlX2luZm9ybWF0aW9uKCJTRVQgUkVGIFdFSUdIVCIsICJcblxuIHt9ZyIuZm9ybWF0KHNlbGYuY2FsaWJyYXRpb25fd2VpZ2h0X3dlaWdodCkpCgoKICAgICAgICAgICAgZWxpZiBzZWxmLm1lbnVfc3RhdGUgPT0gc2VsZi5NRU5VX1NUQVRFX0ZVTExfUExBVEVfUExBQ0U6CiAgICAgICAgICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQuYWN0aW9uID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fRU5URVI6CiAgICAgICAgICAgICAgICAgICAgbGVkcmluZygpLnNldF9uZW9waXhlbF9mdWxsKDUwLCAwLCAwKQogICAgICAgICAgICAgICAgICAgIHVpKCkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oIlBMRUFTRSBXQUlUIiwgIlRBUklORyIpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAgICAgICAgIHNlbGYubWVudV9zdGF0ZSA9IHNlbGYuTUVOVV9TVEFURV9DTEVBUl9QTEFURV9UQVJJTkcKCiAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2Uoc2VsZi5NRUFTVVJFTUVOVF9BVkVSQUdJTkdfUE9JTlRTKToKICAgICAgICAgICAgICAgICAgICAgICAgbGVkcmluZygpLnNldF9uZW9waXhlbF9wZXJjZW50YWdlKGkvKHNlbGYuTUVBU1VSRU1FTlRfQVZFUkFHSU5HX1BPSU5UUyoxLjApKQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGlicmF0aW9uX3ZhbHVlX2Z1bGwgKz0gU2NhbGVJbnRlcmZhY2UoKS5nZXRfdW50YXJlZF93ZWlnaHQoKQogICAgICAgICAgICAgICAgICAgICAgICB1aSgpLnNob3dfcmVjaXBlX2luZm9ybWF0aW9uKCJQTEVBU0UgV0FJVCIsICJNRUFTVVJJTkc6IHt9L3t9Ii5mb3JtYXQoaSwgc2VsZi5NRUFTVVJFTUVOVF9BVkVSQUdJTkdfUE9JTlRTKSkKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZnVsbCA9IHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZnVsbCAvc2VsZi5NRUFTVVJFTUVOVF9BVkVSQUdJTkdfUE9JTlRTCiAgICAgICAgICAgICAgICAgICAgdWkoKS5zaG93X3JlY2lwZV9pbmZvcm1hdGlvbigiU0VDT05EIFJVTiBET05FIiwgIlJBV19WQUxVRTp7fS97fSIuZm9ybWF0KHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZW1wdHksIHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZnVsbCkpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAgICAgICAgIHNlbGYubWVudV9zdGF0ZSA9IHNlbGYuTUVOVV9TVEFURV9GVUxMX1BMQVRFX0lOSVQKICAgICAgICAgICAgICAgICAgICB1aSgpLnNob3dfbXNnKCJTQVZFIENBTElCUkFUSU9OIikKICAgICAgICAgICAgICAgICAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX2Z1bGwoMCwgMCwgMTApCgogICAgICAgICAgICAgICAgICAgICMgU0FWRSBDQUxJQlJBVElPTiBUTyBGSUxFCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5jYWxpYnJhdGlvbl92YWx1ZV9lbXB0eSA+IHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZnVsbDoKICAgICAgICAgICAgICAgICAgICAgICB0OiBmbG9hdCA9IHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZW1wdHkKICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGlicmF0aW9uX3ZhbHVlX2VtcHR5ID0gc2VsZi5jYWxpYnJhdGlvbl92YWx1ZV9mdWxsCiAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxpYnJhdGlvbl92YWx1ZV9mdWxsID0gdAoKICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5zZXR0aW5ncygpLnNhdmVfc2NhbGVfY2FsaWJyYXRpb25fdmFsdWVzKHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZW1wdHksIHNlbGYuY2FsaWJyYXRpb25fdmFsdWVfZnVsbCwgc2VsZi5jYWxpYnJhdGlvbl93ZWlnaHRfd2VpZ2h0KQogICAgICAgICAgICAgICAgICAgICNMT0FEIE5FVyBDQUxJQlJBSU9OIEZBQ1RPUiBJTgogICAgICAgICAgICAgICAgICAgIFNjYWxlSW50ZXJmYWNlKCkucmVsb2FkX2NhbGlicmF0aW9uKCkKICAgICAgICAgICAgICAgICAgICAjIExFQVZFIE1FTlUKICAgICAgICAgICAgICAgICAgICBtZW51X21hbmFnZXIubWVudV9tYW5hZ2VyKCkuZXhpdF9jdXJyZW50X21lbnUoKQoKCiAgICAgICAgICAgICAgICAgICAgCgo=", "menu_entry_recipe.py": "ZnJvbSBhYmMgaW1wb3J0IGFic3RyYWN0bWV0aG9kCmltcG9ydCBtZW51X2VudHJ5CmltcG9ydCBzeXN0ZW1fY29tbWFuZApmcm9tIHVpIGltcG9ydCB1aQpmcm9tIGxlZHJpbmcgaW1wb3J0IGxlZHJpbmcKZnJvbSBtZW51X21hbmFnZXIgaW1wb3J0IG1lbnVfbWFuYWdlcgppbXBvcnQgcmVjaXBlX2xvYWRlcgppbXBvcnQgcmVjaXBlCmltcG9ydCB0aW1lCmZyb20gU2NhbGVzIGltcG9ydCBTY2FsZUludGVyZmFjZQppbXBvcnQgY29uZmlnCgpjbGFzcyBtZW51X2VudHJ5X3JlY2lwZShtZW51X2VudHJ5Lm1lbnVfZW50cnkpOgogICAgUkVDSVBFX1NUQVRFX0lOSVQgPSAwCiAgICBSRUNJUEVfU1RBVEVfT1ZFUlZJRVcgPSAxCiAgICBSRUNJUEVfU1RBVEVfSU5JVElBTF9UQVJFID0gMgogICAgUkVDSVBFX1JVTk5JTkdfSU5JVCA9IDMKICAgIFJFQ0lQRV9SVU5OSU5HX0dFVF9DVVJSRU5UX1NURVAgPSA0CiAgICBSRUNJUEVfUlVOTklOR19HRVRfTkVYVF9TVEVQID0gNQogICAgUkVDSVBFX1JVTk5JTkcgPSA2CiAgICBSRUNJUEVfRU5EX0NIRUNLID0gNwogICAgUkVDSVBFX0VORCA9IDgKCgogICAKICAgIHJlY2lwZV9maWxlbmFtZTogc3RyID0gIiIKICAgIGxvYWRlZF9yZWNpcGU6IHJlY2lwZS5yZWNpcGUgPSBOb25lCiAgICBsYXN0X3NjYWxlX3ZhbHVlOiBmbG9hdCA9IDAuMAogICAgbGFzdF90aW1lX3ZhbHVlIDogZmxvYXQgPSAwLjAKICAgIHJlY2lwZV9zdGF0ZTogaW50ID0gUkVDSVBFX1NUQVRFX09WRVJWSUVXCiAgICBjdXJyZW50X3JlY2lwZV9zdGVwOiByZWNpcGUucmVjaXBlX3N0ZXAgPSBOb25lCiAgICBpc19lbmRfc3RlcDogYm9vbCA9IEZhbHNlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIF9yZWNpcGVfZmlsZW5hbWU6IHN0ciwgX3JlY2lwZV9uYW1lOiBzdHIsIF9yZWNpcGVfZGVzY2lwdGlvbjogc3RyKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKF9yZWNpcGVfbmFtZSwgX3JlY2lwZV9kZXNjaXB0aW9uKQogICAgICAgIHNlbGYucmVjaXBlX2ZpbGVuYW1lID0gX3JlY2lwZV9maWxlbmFtZQoKICAgIGRlZiBwcmV2aWV3KHNlbGYpOgogICAgICAgIHByaW50KCJwcmV2aWV3IGN7fSIuZm9ybWF0KHNlbGYubmFtZSkpCiAgICAgICAgdWkoKS5zaG93X3JlY2lwZV9pbmZvcm1hdGlvbihzZWxmLm5hbWUsIHNlbGYuZGVzY3JpcHRpb24pCgoKICAgIGRlZiBhY3RpdmF0ZShzZWxmKToKICAgICAgICBwcmludCgiYWN0aXZhdGUge30iLmZvcm1hdChzZWxmLm5hbWUpKQogICAgICAgIHVpKCkuY2xlYXIoKQogICAgICAgICMgTE9BRCBSRUNJUEUKICAgICAgICBpZiBsZW4oc2VsZi5yZWNpcGVfZmlsZW5hbWUpIDw9IDA6CiAgICAgICAgICAgIHVpKCkuc2hvd19tc2coIlJlY2lwZSBmaWxlbmFtZSBlbXB0eS4gUGxlYXNlIGNoZWNrIGZpbGUiKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIG1lbnVfbWFuYWdlci5leGl0X2N1cnJlbnRfbWVudSgpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgIHNlbGYubG9hZGVkX3JlY2lwZSA9IHJlY2lwZV9sb2FkZXIucmVjaXBlX2xvYWRlcigpLmdldF9yZWNpcGVfYnlfZmlsZW5hbWUoc2VsZi5yZWNpcGVfZmlsZW5hbWUpCgogICAgICAgIGlmIHNlbGYubG9hZGVkX3JlY2lwZSBpcyBOb25lIG9yIG5vdCBzZWxmLmxvYWRlZF9yZWNpcGUuaXNfdmFsaWQoKToKICAgICAgICAgICAgdWkoKS5zaG93X21zZygiUmVjaXBlIGxvYWRpbmcgZmFpbGVkLiBQbGVhc2UgY2hlY2sgZmlsZSBzdHJ1Y3R1cmUiKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIG1lbnVfbWFuYWdlci5leGl0X2N1cnJlbnRfbWVudSgpCiAgICAgICAgICAgIHJldHVybgoKCgogICAgICAgICMgU0hPVyBSRUNJUEUgT1ZFUlZJRVcgUEFHRQogICAgICAgIHNlbGYucmVjaXBlX3N0YXRlID0gc2VsZi5SRUNJUEVfU1RBVEVfSU5JVAogICAgICAgIHVpKCkuc2hvd19yZWNpcGVfaW5ncmVkaWVudHMoc2VsZi5sb2FkZWRfcmVjaXBlLmdldF9pbmdyZWRpZW50c19hc19uYW1lc19saXN0KCksIFRydWUpCgogICAgICAgICMgVEFSRSBTQ0FMRQogICAgICAgIFNjYWxlSW50ZXJmYWNlKCkudGFyZSgpCgogICAgICAgICMgUkVTRVQgUkVDSVBFCiAgICAgICAgc2VsZi5sb2FkZWRfcmVjaXBlLnJlc2V0X3N0ZXBzKCkKCiAgICBkZWYgdGVhcmRvd24oc2VsZik6CiAgICAgICAgcHJpbnQoInRlYXJkb3duIHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICAjIFVOTE9BRCBSRUNJUEUKICAgICAgICBpZiBzZWxmLmxvYWRlZF9yZWNpcGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGRlbCBzZWxmLmxvYWRlZF9yZWNpcGUKICAgICAgICAgICAgc2VsZi5sb2FkZWRfcmVjaXBlID0gTm9uZQoKCiAgICBkZWYgdGFyZV9zY2FsZShzZWxmKToKICAgICAgICAgICAgU2NhbGVJbnRlcmZhY2UoKS50YXJlKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICBTY2FsZUludGVyZmFjZSgpLnRhcmUoKQogICAgICAgICAgICBzZWxmLmxhc3RfdGltZV92YWx1ZSA9IDAuMAoKCiAgICBkZWYgdXBkYXRlKHNlbGYsIF9zeXN0ZW1fY29tbWFuZDogc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQpOgogICAgICAgIGlmIHNlbGYubG9hZGVkX3JlY2lwZSBpcyBOb25lOgogICAgICAgICAgICBtZW51X21hbmFnZXIuZXhpdF9jdXJyZW50X21lbnUoKQoKICAgICAgICAjIDFzdCBXQUlUIEZPUiBJTklUSUFMIFNDQUxFIFZBTFVFCiAgICAgICAgaWYgc2VsZi5yZWNpcGVfc3RhdGUgPT0gc2VsZi5SRUNJUEVfU1RBVEVfSU5JVCBhbmQgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX1NDQUxFX1ZBTFVFOgogICAgICAgICAgICBzZWxmLmxhc3Rfc2NhbGVfdmFsdWUgPSBfc3lzdGVtX2NvbW1hbmQudmFsdWUKICAgICAgICAgICAgc2VsZi5yZWNpcGVfc3RhdGUgPSBzZWxmLlJFQ0lQRV9TVEFURV9PVkVSVklFVwogICAgICAgICAgICAKICAgICAgICAjIElGIFVTRVIgSVMgSU4gT1ZFUlZJRVcgU0NSRUVOIFNXSVRDSCBUTyBGSVJTVCBSRUNJUEUgU1RFUCBJRiBVU0VSIFBSRVNTRUQgT0sKICAgICAgICBlbGlmIHNlbGYucmVjaXBlX3N0YXRlID09IHNlbGYuUkVDSVBFX1NUQVRFX09WRVJWSUVXOgogICAgICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQudHlwZSA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5DT01NQU5EX1RZUEVfTkFWSUdBVElPTjoKICAgICAgICAgICAgICAgIHVpKCkuc2hvd19tc2coIlBsZWFzZSBwbGFjZSBnbGFzcyBhbmQgcHJlc3Mgb2sgdG8gYmVnaW4iKQogICAgICAgICAgICAgICAgc2VsZi5yZWNpcGVfc3RhdGUgPSBzZWxmLlJFQ0lQRV9TVEFURV9JTklUSUFMX1RBUkUKICAgICAgICAgICAgCiAgICAgICAgICAgIGVsaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX1NDQUxFX1ZBTFVFOgogICAgICAgICAgICAgICAgc2VsZi5sYXN0X3NjYWxlX3ZhbHVlID0gX3N5c3RlbV9jb21tYW5kLnZhbHVlCgogICAgICAgIGVsaWYgc2VsZi5yZWNpcGVfc3RhdGUgPT0gc2VsZi5SRUNJUEVfU1RBVEVfSU5JVElBTF9UQVJFOgogICAgICAgICAgICAjIFVTRVIgUExBQ0VTIEdMQVNTIEFORCBDTElDS0VEIEEgQlVUVE9OIAogICAgICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQudHlwZSA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5DT01NQU5EX1RZUEVfTkFWSUdBVElPTjoKICAgICAgICAgICAgICAgIHNlbGYudGFyZV9zY2FsZSgpCiAgICAgICAgICAgICAgICBzZWxmLnJlY2lwZV9zdGF0ZSA9IHNlbGYuUkVDSVBFX1JVTk5JTkdfSU5JVAogICAgICAgICAgICAjIFNZU1RFTSBXQUlUUyBGT1IgSU5DUkVBU0lORyBMT0FEIE9OIFRIRSBTQ0FMRSBBTkQgQ09OVElOT1VFUyBBVVRPTUFUSUNBTExZCiAgICAgICAgICAgIGVsaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX1NDQUxFX1ZBTFVFOgogICAgICAgICAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLnZhbHVlID4gKHNlbGYubGFzdF9zY2FsZV92YWx1ZSArIGNvbmZpZy5DRkdfU0NBTEVfR0xBU1NfQURESVRJT05fTkVYVF9TVEVQX1dFSUdIVCk6CiAgICAgICAgICAgICAgICAgICAgc2VsZi50YXJlX3NjYWxlKCkKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlY2lwZV9zdGF0ZSA9IHNlbGYuUkVDSVBFX1JVTk5JTkdfSU5JVAoKICAgICAgICAjIExPQUQgRklSU1QgU1RFUAogICAgICAgIGVsaWYgc2VsZi5yZWNpcGVfc3RhdGUgPT0gc2VsZi5SRUNJUEVfUlVOTklOR19JTklUOgogICAgICAgICAgICBzZWxmLmxvYWRlZF9yZWNpcGUucmVzZXRfc3RlcHMoKQogICAgICAgICAgICBzZWxmLnJlY2lwZV9zdGF0ZSA9IHNlbGYuUkVDSVBFX1JVTk5JTkdfR0VUX0NVUlJFTlRfU1RFUAoKICAgICAgICBlbGlmIHNlbGYucmVjaXBlX3N0YXRlID09IHNlbGYuUkVDSVBFX1JVTk5JTkdfR0VUX05FWFRfU1RFUDoKICAgICAgICAgICAgc2VsZi5sb2FkZWRfcmVjaXBlLnN3aXRjaF9uZXh0X3N0ZXAoKQogICAgICAgICAgICBwcmludCgiUkVDSVBFX1JVTk5JTkdfR0VUX05FWFRfU1RFUCIpCiAgICAgICAgICAgIHNlbGYucmVjaXBlX3N0YXRlID0gc2VsZi5SRUNJUEVfUlVOTklOR19HRVRfQ1VSUkVOVF9TVEVQCgogICAgICAgIGVsaWYgc2VsZi5yZWNpcGVfc3RhdGUgPT0gc2VsZi5SRUNJUEVfUlVOTklOR19HRVRfQ1VSUkVOVF9TVEVQOgogICAgICAgIAogICAgICAgICAgICBzZWxmLnRhcmVfc2NhbGUoKQogICAgICAgICAgICBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAsIHNlbGYuaXNfZW5kX3N0ZXAgPSBzZWxmLmxvYWRlZF9yZWNpcGUuZ2V0X2N1cnJlbnRfcmVjaXBlX3N0ZXAoKQoKICAgICAgICAgICAgIyBDSEVDSyBJRiBMQVNUIFNURVAKICAgICAgICAgICAgaWYgc2VsZi5pc19lbmRfc3RlcDoKICAgICAgICAgICAgICAgIHNlbGYucmVjaXBlX3N0YXRlID0gc2VsZi5SRUNJUEVfRU5ECiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgc2VsZi5yZWNpcGVfc3RhdGUgPSBzZWxmLlJFQ0lQRV9SVU5OSU5HCgogICAgICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAuYWN0aW9uID09IHJlY2lwZS5VU0VSX0lOVEVSQUNUSU9OX01PREUuU0NBTEU6CiAgICAgICAgICAgICAgICB1aSgpLnNob3dfcmVjaXBlX3N0ZXAoIkFERCIsIHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcC5pbmdyZWRpZW50X25hbWUpCiAgICAgICAgICAgIGVsaWYgc2VsZi5jdXJyZW50X3JlY2lwZV9zdGVwLmFjdGlvbiA9PSByZWNpcGUuVVNFUl9JTlRFUkFDVElPTl9NT0RFLldBSVQgb3Igc2VsZi5jdXJyZW50X3JlY2lwZV9zdGVwLmFjdGlvbiA9PSByZWNpcGUuVVNFUl9JTlRFUkFDVElPTl9NT0RFLkNPTkZJUk06CiAgICAgICAgICAgICAgICB1aSgpLnNob3dfcmVjaXBlX3N0ZXAoc2VsZi5jdXJyZW50X3JlY2lwZV9zdGVwLmN1cnJlbnRfc3RlcF90ZXh0LCBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAuaW5ncmVkaWVudF9uYW1lKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdWkoKS5zaG93X3JlY2lwZV9zdGVwKCJETyBTT01FVEhJTkciLCBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAuaW5ncmVkaWVudF9uYW1lKQoKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKICAgICAgICBlbGlmIHNlbGYucmVjaXBlX3N0YXRlID09IHNlbGYuUkVDSVBFX1JVTk5JTkc6CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAuYWN0aW9uID09IHJlY2lwZS5VU0VSX0lOVEVSQUNUSU9OX01PREUuU0NBTEU6CiAgICAgICAgICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQudHlwZSA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5DT01NQU5EX1RZUEVfTkFWSUdBVElPTiBhbmQgX3N5c3RlbV9jb21tYW5kLmFjdGlvbiA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX0VOVEVSOgogICAgICAgICAgICAgICAgICAgIHNlbGYucmVjaXBlX3N0YXRlID0gc2VsZi5SRUNJUEVfRU5EX0NIRUNLCiAgICAgICAgICAgICAgICBlbGlmIF9zeXN0ZW1fY29tbWFuZC50eXBlID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLkNPTU1BTkRfVFlQRV9TQ0FMRV9WQUxVRToKICAgICAgICAgICAgICAgICAgICAjIFVQREFUIExFRCBSSU5HCiAgICAgICAgICAgICAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLnZhbHVlID4gKHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcC50YXJnZXRfdmFsdWUgKiAwLjkpOgogICAgICAgICAgICAgICAgICAgICAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX3BlcmNlbnRhZ2UoX3N5c3RlbV9jb21tYW5kLnZhbHVlIC8gKHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcC50YXJnZXRfdmFsdWUqMS4wKSxfaW5kZXBlbmRlbnRfY29sb3JpbmcgPSBGYWxzZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX3BlcmNlbnRhZ2UoX3N5c3RlbV9jb21tYW5kLnZhbHVlIC8gKHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcC50YXJnZXRfdmFsdWUqMS4wKSxfaW5kZXBlbmRlbnRfY29sb3JpbmcgPSBUcnVlKQogICAgICAgICAgICAgICAgICAgICMgSUYgVEFSR0VUIFZBTFVFIFJFQUNIRUQgR09UTyBORVhUIFNURVAKICAgICAgICAgICAgICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQudmFsdWUgPiBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAudGFyZ2V0X3ZhbHVlOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlY2lwZV9zdGF0ZSA9IHNlbGYuUkVDSVBFX0VORF9DSEVDSwogICAgICAgICAgICBlbGlmIHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcC5hY3Rpb24gPT0gcmVjaXBlLlVTRVJfSU5URVJBQ1RJT05fTU9ERS5XQUlUOgogICAgICAgICAgICAgICAgIyBPTiBFQUNIIFNZU1RFTSBUSU1FUiBUSUNLIENPVU5UIFVQIFRIRSBUSU1FIElOIFRISVMgU1RFUAogICAgICAgICAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX1RJTUVSX0lSUToKICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RfdGltZV92YWx1ZSA9IHNlbGYubGFzdF90aW1lX3ZhbHVlICsgKF9zeXN0ZW1fY29tbWFuZC52YWx1ZSAvIDEwMDAuMCkKCiAgICAgICAgICAgICAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX3BlcmNlbnRhZ2Uoc2VsZi5sYXN0X3RpbWVfdmFsdWUgLyAoc2VsZi5jdXJyZW50X3JlY2lwZV9zdGVwLnRhcmdldF92YWx1ZSoxLjApLF9pbmRlcGVuZGVudF9jb2xvcmluZyA9IEZhbHNlKQogICAgICAgICAgICAgICAgIyBJRiBUQVJHRVQgUEFTU0VEIFRJTUUgVkFMVUUgUkVBQ0hFRCAtPiBHT1RPIE5FWFQgU1RFUAogICAgICAgICAgICAgICAgaWYgc2VsZi5sYXN0X3RpbWVfdmFsdWUgPiBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAudGFyZ2V0X3ZhbHVlOgogICAgICAgICAgICAgICAgICAgIHNlbGYucmVjaXBlX3N0YXRlID0gc2VsZi5SRUNJUEVfRU5EX0NIRUNLCgogICAgICAgICAgICAjIE9OIEFOWSBCVVRUT04gQ0xJQ0sgU1dJVENIIFRPIE5FWFQgU1RFUAogICAgICAgICAgICBlbGlmIHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcC5hY3Rpb24gPT0gcmVjaXBlLlVTRVJfSU5URVJBQ1RJT05fTU9ERS5DT05GSVJNOgogICAgICAgICAgICAgICAgbGVkcmluZygpLnNldF9uZW9waXhlbF9mdWxsKDIwLCAyMCwgMjApCiAgICAgICAgICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQudHlwZSA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5DT01NQU5EX1RZUEVfTkFWSUdBVElPTjoKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlY2lwZV9zdGF0ZSA9IHNlbGYuUkVDSVBFX0VORF9DSEVDSwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5yZWNpcGVfc3RhdGUgPSBzZWxmLlJFQ0lQRV9FTkRfQ0hFQ0sKCiAgICAgICAgIyBDSEVDSyBJRiBUSElTIFRIRSBMQVNUIFNURVAgSU4gUkVDSVBFCiAgICAgICAgIyBUT0RPIFJFV09SSwogICAgICAgIGVsaWYgc2VsZi5yZWNpcGVfc3RhdGUgPT0gc2VsZi5SRUNJUEVfRU5EX0NIRUNLOgogICAgICAgICAgICBzZWxmLnJlY2lwZV9zdGF0ZSA9IHNlbGYuUkVDSVBFX1JVTk5JTkdfR0VUX05FWFRfU1RFUAoKICAgICAgICAgICAgIyBDSEVDSyBJRiBMQVNUIFNURVAKICAgICAgICAgICAgaWYgc2VsZi5pc19lbmRfc3RlcDoKICAgICAgICAgICAgICAgIHNlbGYucmVjaXBlX3N0YXRlID0gc2VsZi5SRUNJUEVfRU5ECgogICAgICAgIGVsaWYgc2VsZi5yZWNpcGVfc3RhdGUgPT0gc2VsZi5SRUNJUEVfRU5EOgogICAgICAgICAgICB1aSgpLnNob3dfbXNnKCJFTkpPWSIpCiAgICAgICAgICAgIGxlZHJpbmcoKS5zZXRfbmVvcGl4ZWxfZnVsbF9oc3YobGVkcmluZygpLkNPTE9SX1BSRVNFVF9IU1ZfSF9fR1JFRU4pCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgbWVudV9tYW5hZ2VyKCkuZXhpdF9jdXJyZW50X21lbnUoKQ==", "config.py": "IyBIQVJEV0FSRSBDT05GSUcgU1RBUlRTIEhFUkUKIyBzc2QxMzA2ID0gMTI4eDY0IG9sZGVkIHdpdGggc3NkMTMwNiBjb250cm9sbGVyCiMgc2gxMTA2ID0gMTI4eDY0IG9sZGVkIHdpdGggc3NoMTEwNiBjb250cm9sbGVyCkNGR19ESVNQTEFZX1RZUEU6IHN0ciA9ICJzaDExMDYiICMgc2gxMTA2IHNzZDEzMDYKQ0ZHX0NBTElCUkFUSU9OX1dFSUdIVF9XRUlHSFQ6ZmxvYXQgPSA1MC4wCkNGR19TQ0FMRV9JTlZFUlRfV0VJR0hUX01FQVNVUkVEX1ZBTFVFOiBmbG9hdCA9IC0xLjAgIyBpZiB0aGUgc2NhbGUgbWVhc3VyZW1lbnQgaXMgbmVnYXRpdmUgc2V0IHRoaXMgdG8gMS4wIG9yIC0xLjAKQ0ZHX1NDQUxFX0dMQVNTX0FERElUSU9OX05FWFRfU1RFUF9XRUlHSFQ6ZmxvYXQgPSA1MC4wICMgWGcgbW9yZSBvbiBzY2FsZSB0byB0cmlnZ2VyIG5leHQgc3RlcCBpbiByZWNpcGUgPT4gMS8zIHdlaWdodCBvZiBhIHR5cGljYWwgZ2xhc3MKQ0ZHX1VTRVJfTE9OR19CVVRUT05fUFJFU1NfVElNRTogaW50ID0gNzAwICMgdGltZSB0byByZWdzaXRlciBhIGxvbmcgYnV0dG9uIHByZXNzIGluIG1zCgpDRkdfTkVPUElYRUxfTEVEX0NPVU5UOiBpbnQgPSAyNiAjMzIgIzYwIGhvdyBtYW55IGxlZHMgZm9yIHRoZSByaW5nIGFyZSB1c2VkCkNGR19ORU9QSVhFTF9MRURfU1RBUlRfT0ZGU0VUOiBpbnQgPSAoQ0ZHX05FT1BJWEVMX0xFRF9DT1VOVC8yKSAjIE1BWCBDRkdfTkVPUElYRUxfTEVEX0NPVU5UIFRPIFJPVEFURSBUSEUgU1RBUlRQT0lOVApDRkdfTkVPUElYRUxfTUFYX0JSSUdIVE5FU1M6IGZsb2F0ID0gMC44ICMgbWF4IGxlZCBicmlnaG5lc3MgbW9kaWZpZXIgMC4wIC0gMS4wCgojIERFRkFVTFQgV0lGSSBTRVRUSU5HUwojIENBTiBMQVRFUiBCRSBDQU5HRUQgSU4gVEhFIFNEQ0FSRC9TRVRUSU5HUy5KU09OIEZJTEUKQ0ZHX05FVFdPUktfSE9TVE5BTUU6IHN0ciA9ICJtaXhhbmRtZWFzdXJlYnVkZHkiICMgeFh4WC5sb2NhbApDRkdfTkVUV09SS19XSUZJQ09VTlRSWTogc3RyID0gIkRFIiAjIERFIFVTCkNGR19ORVRXT1JLX1dJRklfU1NJRDogc3RyID0gIk1ha2Vyc3BhY2UiCkNGR19ORVRXT1JLX1dJRklfUFNLOiBzdHIgPSAiTVM4Y0N2cEUiCkNGR19ORVRXT1JLX0FQSV9FTkRQT0lOVDogc3RyID0gIm1peG1lYXN1cmVidWRkeS5jb20vYXBpL21tYiIKCgojIFNFVFRJTkdTIEZPUiBBQ0NFU1MgUE9JTlQgKyBMT0NBTCBXRUJFRElUT1IKQ0ZHX0VESVRPUl9XSUZJX1NUQV9IT1NUTkFNRTogc3RyID0gIm1peGFuZG1lYXN1cmVidWRkeSIKQ0ZHX0VESVRPUl9XSUZJX1NUQV9TU0lEOiBzdHIgPSAibWl4YW5kbWVhc3VyZWJ1ZGR5IgpDRkdfRURJVE9SX1dJRklfU1RBX1BTSzogc3RyID0gInt9IiAgIwpDRkdfRURJVE9SX0hUVFBfUE9SVDogaW50ID0gODAgIyBXRUJTRVJWRVIgUE9SVCBGT1IgVEhFIE9OTElORSBFRElUT1IKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMjIyMjIyBQSU4gQ09ORklHICMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBORU9QSVhFTCBSSU5HCkNGR19ORU9QSVhFTF9QSU46IGludCA9IDI4CiMgQlVUVE9OUwpDRkdfQlVUVE9OX0xFRlRfUElOOiBpbnQgPSAzICMyMgpDRkdfQlVUVE9OX1JJR0hUX1BJTjogaW50ID0gMgoKI0VOQ09ERVIKQ0ZHX0VOQ09ERVJfSU5WRVJUOiBib29sID0gRmFsc2UKQ0ZHX0VOQ09ERVJfQ0xLX1BJTjogaW50ID0gMjAKQ0ZHX0VOQ09ERVJfRFRfUElOOiBpbnQgPSAxOQpDRkdfRU5DT0RFUl9TV19QSU46IGludCA9IDE4CiMgSFg3MTEgTU9EVUxFCkNGR19IWDcxMV9ET1VUX1BJTjogaW50ID0gNQpDRkdfSFg3MTFfU0NLX1BJTjogaW50ID0gNAojIFtPUFRJT05BTF0gU0QgQ0FSRApDRkdfU0RDQVJEX1NQSUlOU1RBTkNFOiBpbnQgPSAxICMgT04gUlAyMDQwIDAgb3IgMSBERVBFTkRJTkcgVEhFIEZPTExPV0lORyBVU0VEIFNQSSBQSU5TCkNGR19TRENBUkRfU0NLX1BJTjogaW50ID0gMTAKQ0ZHX1NEQ0FSRF9NT1NJX1BJTjogaW50ID0gMTEKQ0ZHX1NEQ0FSRF9NSVNPX1BJTjogaW50ID0gOApDRkdfU0RDQVJEX0NTX1BJTjogaW50ID0gOQojIFtPUFRJT05BTF0gU1NEMTMwNiBvciBTSDExMDYKQ0ZHX09MRURfSTJDSU5TVEFOQ0U6IGludCA9IDAgIyBPTiBSUDIwNDAgMCBvciAxIERFUEVORElORyBUSEUgRk9MTE9XSU5HIFVTRUQgSTJDIFBJTlMKQ0ZHX09MRURfU0NMX1BJTjogaW50ID0gMTcKQ0ZHX09MRURfU0RBX1BJTjogaW50ID0gMTYKQ0ZHX09MRURfQUREUjogaW50ID0gMHgzYwpDRkdfRElTUExBWV9DSEFSX1dJRFRIOiBpbnQgPSA4ICMgY2hhciB3aWR0aCBpbiBwaXhlbHMgc2VlIHZnYTJ4OHggYXMgdXNlZCBmb250ZmlsZQpDRkdfRElTUExBWV9MSU5FX1NQQUNJTkc6IGludCA9IChDRkdfRElTUExBWV9DSEFSX1dJRFRIICsgMSkgIyBwaXhlbCBmb250IGhlaWdodCArICBhIGJpdCBleHRyYSBzcGFjZSB0byBtYWtlIGxhcmdlIHRleHQgbW9yZSByZWFkYWJsZQoKIyBESVNQTEFZIFJFU09MVVRJT04KU0NSX1dJRFRIOiBpbnQgPSAxMjgKU0NSX0hFSUdIVDogaW50ID0gNjQKCgogICAgCg==", "recipe.py": "CmNsYXNzIFVTRVJfSU5URVJBQ1RJT05fTU9ERToKICAgIFVOS05PV04gPSAtMQogICAgU0NBTEUgPSAwCiAgICBDT05GSVJNID0gMQogICAgV0FJVCA9IDIKCmNsYXNzIGluZ3JlZGllbnQ6CgogICAgbmFtZTogc3RyID0gIiIKICAgIGFtb3VudDogaW50ID0gLTEKICAgIGlkOiBpbnQgPSAwCiAgICB1bml0OiBzdHIgPSAiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBfbmFtZTogc3RyLCBfYW1vdW50OiBpbnQgPSAtMSwgX2lkOiBpbnQgPSAwLCBfdW5pdDogc3RyID0gIiIpOgogICAgICAgIHNlbGYubmFtZSA9IF9uYW1lCiAgICAgICAgc2VsZi5hbW91bnQgPSBfYW1vdW50CiAgICAgICAgc2VsZi5pZCA9IF9pZAogICAgICAgIHNlbGYudW5pdCA9IF91bml0CmNsYXNzIHJlY2lwZV9zdGVwOgoKICAgIGFjdGlvbjogVVNFUl9JTlRFUkFDVElPTl9NT0RFID0gVVNFUl9JTlRFUkFDVElPTl9NT0RFLlVOS05PV04KICAgIGluZ3JlZGllbnRfbmFtZTogc3RyID0gIiIKICAgIGN1cnJlbnRfc3RlcF90ZXh0OiBzdHIgPSAiLS0tIgogICAgdGFyZ2V0X3ZhbHVlOiBpbnQgPSAwCgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBfYWN0aW9uOiBVU0VSX0lOVEVSQUNUSU9OX01PREUgPSBVU0VSX0lOVEVSQUNUSU9OX01PREUuVU5LTk9XTiwgX2luZ3JlZGllbnRfbmFtZTogc3RyID0gIiIsIF9jdXJyZW50X3N0ZXBfdGV4dDogc3RyID0gIi0tLSIsIF90YXJnZXRfdmFsdWU6IGludCA9IDApOgogICAgICAgIHNlbGYuYWN0aW9uID0gX2FjdGlvbgogICAgICAgIHNlbGYuaW5ncmVkaWVudF9uYW1lID0gX2luZ3JlZGllbnRfbmFtZQogICAgICAgIHNlbGYuY3VycmVudF9zdGVwX3RleHQgPSBfY3VycmVudF9zdGVwX3RleHQKICAgICAgICBzZWxmLnRhcmdldF92YWx1ZSA9IF90YXJnZXRfdmFsdWUKCiAgICBkZWYgdG9fZGljdChzZWxmKSAtPiBkaWN0OgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICdhY3Rpb24nOiBzZWxmLmFjdGlvbiwKICAgICAgICAgICAgJ2luZ3JlZGllbnQnIDogc2VsZi5pbmdyZWRpZW50X25hbWUsCiAgICAgICAgICAgICdhbW91bnQnOiBzZWxmLnRhcmdldF92YWx1ZSwKICAgICAgICAgICAgJ3RleHQnOiBzZWxmLmN1cnJlbnRfc3RlcF90ZXh0CiAgICAgICAgICAgIH0KICAgIAogICAgZGVmIGZyb21fZGljdChzZWxmLCBfc3RlcF9kaWN0OiBkaWN0KToKICAgICAgICBpZiAnYWN0aW9uJyBpbiBfc3RlcF9kaWN0OgogICAgICAgICAgICBzZWxmLmFjdGlvbiA9IF9zdGVwX2RpY3RbJ2FjdGlvbiddCiAgICAgICAgaWYgJ2luZ3JlZGllbnQnIGluIF9zdGVwX2RpY3Q6CiAgICAgICAgICAgIHNlbGYuaW5ncmVkaWVudF9uYW1lID0gX3N0ZXBfZGljdFsnaW5ncmVkaWVudCddCiAgICAgICAgaWYgJ2Ftb3VudCcgaW4gX3N0ZXBfZGljdDoKICAgICAgICAgICAgc2VsZi50YXJnZXRfdmFsdWUgPSBfc3RlcF9kaWN0WydhbW91bnQnXQogICAgICAgIGlmICd0ZXh0JyBpbiBfc3RlcF9kaWN0OgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfc3RlcF90ZXh0ID0gX3N0ZXBfZGljdFsndGV4dCddCgoKY2xhc3MgcmVjaXBlOgogICAgCiAgICBuYW1lOiBzdHIgPSAiIgogICAgZGVzY3JpcHRpb246IHN0ciA9ICIiCiAgICB2ZXJzaW9uOiBzdHIgPSAiMS4wLjAiCiAgICBmaWxlbmFtZTogc3RyID0gIiIKICAgIHN0ZXBzOiBsaXN0W3JlY2lwZV9zdGVwXSA9IFtdCiAgICBjYXRlZ29yaWVzOiBsaXN0W3N0cl0gPSBbImV2ZXJ5dGhpbmciXQogICAgdmFsaWQ6IGJvb2wgPSBGYWxzZQoKICAgIGN1cnJlbnRfc3RlcF9pbmRleDogaW50ID0gLTEKCiAgICBkZWYgX19pbml0X18oc2VsZiwgX25hbWU6IHN0ciA9ICJSZWNpcGUiLCBfZGVzY3JpcHRpb246c3RyID0gIkEgbmljZSBjb2NrdGFpbCIsIF92ZXJzaW9uOiBzdHIgPSAiMS4wLjAiLCBfY2F0ZWdvcmllczogbGlzdFtzdHJdID0gWyJldmVyeXRoaW5nIl0pIC0+IE5vbmU6CiAgICAgICAgc2VsZi5uYW1lID0gX25hbWUKICAgICAgICBzZWxmLmRlc2NyaXB0aW9uID0gX2Rlc2NyaXB0aW9uCiAgICAgICAgc2VsZi52ZXJzaW9uID0gX3ZlcnNpb24KCiAgICAgICAgc2VsZi5maWxlbmFtZSA9IHNlbGYubmFtZS5yZXBsYWNlKCIgIiwgIl8iKS5yZXBsYWNlKCIucmVjaXBlIiwgIiIpCiAgICAgICAgc2VsZi5maWxlbmFtZSA9IHNlbGYuZmlsZW5hbWUgKyAiLnJlY2lwZSIKCiAgICAgICAgc2VsZi5jYXRlZ29yaWVzID0gX2NhdGVnb3JpZXMKICAgICAgICBpZiBsZW4oc2VsZi5jYXRlZ29yaWVzKSA8PSAwOgogICAgICAgICAgICBzZWxmLmNhdGVnb3JpZXMuYXBwZW5kKCJldmVyeXRoaW5nIikKCiAgICAgICAKICAgICAgICBzZWxmLnN0ZXBzID0gW10KICAgICAgICBzZWxmLnJlc2V0X3N0ZXBzKCkKCiAgIAoKICAgIGRlZiBhZGRfc3RlcChzZWxmLCBfc3RlcDogcmVjaXBlX3N0ZXApOgogICAgICAgIHNlbGYuc3RlcHMuYXBwZW5kKF9zdGVwKQogICAgICAgICAgIAoKICAgIAogICAgZGVmIGZyb21fZGljdChzZWxmLCBfanNvbl9kaWN0OiBkaWN0KSAtPiBib29sOgogICAgICAgIGlmICduYW1lJyBpbiBfanNvbl9kaWN0OgogICAgICAgICAgICBzZWxmLm5hbWUgPSBfanNvbl9kaWN0WyduYW1lJ10KICAgICAgICBpZiAnZGVzY3JpcHRpb24nIGluIF9qc29uX2RpY3Q6CiAgICAgICAgICAgIHNlbGYuZGVzY3JpcHRpb24gPSBfanNvbl9kaWN0WydkZXNjcmlwdGlvbiddCiAgICAgICAgaWYgJ3ZlcnNpb24nIGluIF9qc29uX2RpY3Q6CiAgICAgICAgICAgIHNlbGYudmVyc2lvbiA9IF9qc29uX2RpY3RbJ3ZlcnNpb24nXQoKICAgICAgICBpZiAnc3RlcHMnIGluIF9qc29uX2RpY3Q6CiAgICAgICAgICAgIHN0ZXBzID0gX2pzb25fZGljdFsnc3RlcHMnXQogICAgICAgICAgICBzZWxmLnN0ZXBzID0gW10KICAgICAgICAgICAgaWYgbGVuKHN0ZXBzKSA+IDA6CiAgICAgICAgICAgICAgICBmb3IgcyBpbiBzdGVwczoKICAgICAgICAgICAgICAgICAgICBzdGVwOiByZWNpcGVfc3RlcCA9IHJlY2lwZV9zdGVwKCkKICAgICAgICAgICAgICAgICAgICBzdGVwLmZyb21fZGljdChzKQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWRkX3N0ZXAoc3RlcCkKICAgICAgICAKICAgICAgCiAgICAgICAgc2VsZi5maWxlbmFtZSA9IHNlbGYubmFtZS5yZXBsYWNlKCIgIiwgIl8iKS5yZXBsYWNlKCIucmVjaXBlIiwgIiIpCiAgICAgICAgc2VsZi5maWxlbmFtZSA9IHNlbGYuZmlsZW5hbWUgKyAiLnJlY2lwZSIKICAgICAgICBzZWxmLnZhbGlkID0gVHJ1ZQogICAgICAgIAogICAgZGVmIHRvX2RpY3Qoc2VsZiwgX2FkZF9maWxlbmFtZV9hc19yb290X2tleTogYm9vbCA9IEZhbHNlKSAtPiBkaWN0OgogICAgICAgIHJldDogZGljdCA9IHt9CiAgICAgICAgcmV0W3NlbGYuZmlsZW5hbWVdID0gewogICAgICAgICAgICAnbmFtZSc6IHNlbGYubmFtZSwKICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzogc2VsZi5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgJ3ZlcnNpb24nOiBzZWxmLnZlcnNpb24sCiAgICAgICAgICAgICdmaWxlbmFtZSc6IHNlbGYuZmlsZW5hbWUKICAgICAgICB9CiAgICAgICAgIyBBREQgU1RFUFMKICAgICAgICByZXRbc2VsZi5maWxlbmFtZV1bJ3N0ZXBzJ10gPSBbXQogICAgICAgIGZvciBzIGluIHNlbGYuc3RlcHM6CiAgICAgICAgICAgIHJldFtzZWxmLmZpbGVuYW1lXVsnc3RlcHMnXS5hcHBlbmQocy50b19kaWN0KCkpCgogICAgCiAgICAgICAgaWYgX2FkZF9maWxlbmFtZV9hc19yb290X2tleToKICAgICAgICAgICAgcmV0dXJuIHJldAoKICAgICAgICByZXR1cm4gcmV0W3NlbGYuZmlsZW5hbWVdCgoKICAgIGRlZiBpc192YWxpZChzZWxmKSAtPiBib29sOgogICAgICAgIHJldHVybiBzZWxmLnZhbGlkCgoKICAgIGRlZiBnZXRfZGVzY3JpcHRpb24oc2VsZikgLT4gc3RyOgogICAgICAgIHJldHVybiBzZWxmLmRlc2NyaXB0aW9uCgogICAgZGVmIGdldF9jYXRlZ29yaWVzKHNlbGYpIC0+IGxpc3Rbc3RyXToKICAgICAgICByZXR1cm4gc2VsZi5jYXRlZ29yaWVzCgogICAgCgoKICAgIGRlZiBnZXRfcmVjaXBlX2luZm9ybWF0aW9uKHNlbGYpIC0+IHR1cGxlW3N0ciwgc3RyXToKICAgICAgICByZXR1cm4gKHNlbGYubmFtZSwgc2VsZi5kZXNjcmlwdGlvbikKICAgIAoKICAgIGRlZiBzd2l0Y2hfbmV4dF9zdGVwKHNlbGYpOgogICAgICAgIGlmIGxlbihzZWxmLnN0ZXBzKSA8IDA6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9zdGVwX2luZGV4ID0gLTEKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgc2VsZi5jdXJyZW50X3N0ZXBfaW5kZXggPSAoc2VsZi5jdXJyZW50X3N0ZXBfaW5kZXggKyAxKSAlIGxlbihzZWxmLnN0ZXBzKQogICAgICAgICAgICAgICAgICAKICAgIGRlZiBzd2l0Y2hfcHJldl9zdGVwKHNlbGYpOgogICAgICAgIGlmIGxlbihzZWxmLnN0ZXBzKSA8IDA6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9zdGVwX2luZGV4ID0gLTEKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgc2VsZi5jdXJyZW50X3N0ZXBfaW5kZXggPSAoc2VsZi5jdXJyZW50X3N0ZXBfaW5kZXggLSAxKSAlIGxlbihzZWxmLnN0ZXBzKQoKICAgIGRlZiByZXNldF9zdGVwcyhzZWxmKToKICAgICAgICBpZiBsZW4oc2VsZi5zdGVwcykgPCAwOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfc3RlcF9pbmRleCA9IC0xCiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNlbGYuY3VycmVudF9zdGVwX2luZGV4ID0gMAogICAgCgogICAgZGVmIGdldF9pbmdyZWRpZW50cyhzZWxmKSAtPiBsaXN0W2luZ3JlZGllbnRdOgogICAgICAgIHJlczogbGlzdFtpbmdyZWRpZW50XSA9IFtdCiAgICAgICAgaW5ncmVkaWVudF9kaWN0OiBkaWN0ID0ge30KICAgICAgICAjIERFVEVSTSBUSEUgVE9UQUwgSU5HUkVESUVOVCBBTU9VTlQgT1ZFUiBBTEwgU1RFUFMKICAgICAgICAjIFRPRE8gUkVXT1JLCiAgICAgICAgZm9yIHMgaW4gc2VsZi5zdGVwczoKICAgICAgICAgICAgIyBTS0lQIFVTRVIgQUNUSU9OUyBXSVRIIE5PIFBIWVNJQ0FMIElOR1JFRElFTlRTCiAgICAgICAgICAgIGlmIHMuYWN0aW9uID09IFVTRVJfSU5URVJBQ1RJT05fTU9ERS5XQUlUIG9yIHMuYWN0aW9uID09IFVTRVJfSU5URVJBQ1RJT05fTU9ERS5VTktOT1dOOgogICAgICAgICAgICAgICAgY29udGludWUKCgogICAgICAgICAgICBpZiBub3Qgcy5pbmdyZWRpZW50X25hbWUgaW4gaW5ncmVkaWVudF9kaWN0OgogICAgICAgICAgICAgICAgaW5ncmVkaWVudF9kaWN0W3MuaW5ncmVkaWVudF9uYW1lXSA9IHsnYW1vdW50JzogMCwgJ3VuaXQnOiAnJ30KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgcy5hY3Rpb24gPT0gVVNFUl9JTlRFUkFDVElPTl9NT0RFLlNDQUxFOgogICAgICAgICAgICAgICAgICAgIGluZ3JlZGllbnRfZGljdFtzLmluZ3JlZGllbnRfbmFtZV1bJ3VuaXQnXSA9ICdnJwogICAgICAgICAgICAgICAgZWxpZiBzLmFjdGlvbiA9PSBVU0VSX0lOVEVSQUNUSU9OX01PREUuQ09ORklSTToKICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50X2RpY3Rbcy5pbmdyZWRpZW50X25hbWVdWyd1bml0J10gPSAneCcKCiAgICAgICAgICAgIGlmIHMudGFyZ2V0X3ZhbHVlID4gMDoKICAgICAgICAgICAgICAgIGluZ3JlZGllbnRfZGljdFtzLmluZ3JlZGllbnRfbmFtZV1bJ2Ftb3VudCddID0gaW5ncmVkaWVudF9kaWN0W3MuaW5ncmVkaWVudF9uYW1lXVsnYW1vdW50J10gKyBzLnRhcmdldF92YWx1ZQoKICAgICAgICAgICAgCiAgICAgICAgIyBSRUFTU0VNQkxFIERJQ1QgSU5UTyBBUlJBWQogICAgICAgIGluZGV4OiBpbnQgPSAwCiAgICAgICAgZm9yIGssIHYgaW4gaW5ncmVkaWVudF9kaWN0Lml0ZW1zKCk6CiAgICAgICAgICAgIHJlcy5hcHBlbmQoaW5ncmVkaWVudChrLCB2WydhbW91bnQnXSwgaW5kZXgsIHZbJ3VuaXQnXSkpCiAgICAgICAgICAgIGluZGV4ID0gaW5kZXggKzEKCiAgICAgICAgcmV0dXJuIHJlcwogICAgICAgCiAgICAKICAgIGRlZiBnZXRfaW5ncmVkaWVudHNfYXNfbmFtZXNfbGlzdChzZWxmLCBfd2l0aG91dF9hbW91bnQ6IGJvb2wgPSBUcnVlKSAtPiBsaXN0W3N0cl06CiAgICAgICAgcnQ6IGxpc3Rbc3RyXSA9IFtdCiAgICAgICAgZm9yIGkgaW4gc2VsZi5nZXRfaW5ncmVkaWVudHMoKToKICAgICAgICAgICAgaWYgaS5hbW91bnQgaXMgTm9uZSBvciBpLmFtb3VudCA8PSAwIG9yIF93aXRob3V0X2Ftb3VudDoKICAgICAgICAgICAgICAgIHJ0LmFwcGVuZCgie30iLmZvcm1hdChpLm5hbWUpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcnQuYXBwZW5kKCJ7fXt9IHt9Ii5mb3JtYXQoaS5hbW91bnQsIGkudW5pdCwgaS5uYW1lKSkKICAgIAogICAgICAgIHJldHVybiBydAoKCiAgICBkZWYgZ2V0X2N1cnJlbnRfcmVjaXBlX3N0ZXAoc2VsZikgLT4gdHVwbGVbcmVjaXBlX3N0ZXAsIGJvb2xdOiAKICAgICAgICBpZiBsZW4oc2VsZi5zdGVwcykgPD0gMCBvciBzZWxmLmN1cnJlbnRfc3RlcF9pbmRleCA8IDA6CiAgICAgICAgICAgIHByaW50KCJzZWxmLmN1cnJlbnRfc3RlcF9pbmRleCBpcyBpbnZhbGlkIC8gb3V0IG9mIHJhbmdlIikKICAgICAgICAgICAgcmV0dXJuIHJlY2lwZV9zdGVwKCksIFRydWUKICAgICAgICB0cnk6CiAgICAgICAgICAgICNERVRFUk0gSUYgVEhJUyBJUyBUSEUgTEFTVCBTVEVQCiAgICAgICAgICAgIGlzX2VuZHN0ZXA6IGJvb2wgPSBGYWxzZQogICAgICAgICAgICBpZiBzZWxmLmN1cnJlbnRfc3RlcF9pbmRleCA+PSBsZW4oc2VsZi5zdGVwcykgLTE6CiAgICAgICAgICAgICAgICBpc19lbmRzdGVwID0gVHJ1ZQoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3RlcHNbc2VsZi5jdXJyZW50X3N0ZXBfaW5kZXhdLCBpc19lbmRzdGVwCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChlKQoKICAgICAgICByZXR1cm4gcmVjaXBlX3N0ZXAoKSwgVHJ1ZQogICAgICAgIAogICAgCgoKCgoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBpbXBvcnQgZXhhbXBsZV9yZWNpcGVzCgogICAgciA9IGV4YW1wbGVfcmVjaXBlcy5FWEFNUExFX1JFQ0lQRVNfQ09MTEVDVElPTl9URVNUKCkKICAgIGkgPSByLmdldF9pbmdyZWRpZW50cygpCiAgICBsID0gci5nZXRfaW5ncmVkaWVudHNfYXNfbmFtZXNfbGlzdCgpCiAgICBlciA9IDAKCiAgICA=", "settings.py": "aW1wb3J0IHNkY2FyZAppbXBvcnQgbWFjaGluZQppbXBvcnQgdW9zCmltcG9ydCBqc29uCmltcG9ydCBjb25maWcKaW1wb3J0IG9zCmZyb20gc2luZ2xldG9uIGltcG9ydCBzaW5nbGV0b24KCmNsYXNzIFNFVFRJTkdTX0VOVFJJRVMob2JqZWN0KToKICAgIFNDQUxFX0NBTElCUkFUSU9OX01JTl9WQUxVRSA9ICJzY2FsZV9taW4iCiAgICBTQ0FMRV9DQUxJQlJBVElPTl9NQVhfVkFMVUUgPSAic2NhbGVfZnVsbCIKICAgIFNDQUxFX0NBTElCUkFUSU9OX0NBTElCUkFUSU9OX1dFSUdIVCA9ICJzY2FsZV93ZWlnaHQiCgogICAgTkVUV09SS19XSUZJX1NTSUQgPSAid2lmaV9zc2lkIgogICAgTkVUV09SS19XSUZJX1BTSyA9ICJ3aWZpX3BzayIKICAgIE5FVFdPUktfQVBJX0VOUE9JTlQgPSAiYXBpX2VucG9pbnQiCgoKCkBzaW5nbGV0b24KY2xhc3Mgc2V0dGluZ3Mob2JqZWN0KToKCiAgIAoKICAgIHNkID0gTm9uZSAjIHNkY2FyZCBjbGFzcyBpbnN0YW5jZQoKICAgIFJFQ0lQRV9CQVNFX0RJUjogc3RyID0gIi9kYXRhIiAjIEZPTERFUiBPRiBUSEUgU0VUVElOR1MgRklMRVMgU1RPUkFHRSBJRiBTRCBDQVJEIEZPVU5EIFNEIENBUkQgV0lMTCBCRSBNT1VOVEVEIFRIRVJFCiAgICBTRVRUSU5HU19GSUxFTkFNRTogc3RyID0gIlNFVFRJTkdTLmpzb24iCiAgICAgCiAgICBkZWYgX19pbml0X18oc2VsZiwgX3NwaSA9IE5vbmUsIF9jc19waW4gPSBjb25maWcuQ0ZHX1NEQ0FSRF9DU19QSU4sIF9kYXRhX2Rpcjogc3RyID0gIi9kYXRhIik6CiAgICAgICAgc2VsZi5SRUNJUEVfQkFTRV9ESVIgPSBfZGF0YV9kaXIKCiAgICAgICAgaWYgX3NwaSBpcyBOb25lOgogICAgICAgICAgICBfc3BpID0gbWFjaGluZS5TUEkoY29uZmlnLkNGR19TRENBUkRfU1BJSU5TVEFOQ0UsIGJhdWRyYXRlPTEwMDAwMDAsIHBvbGFyaXR5PTAsIHBoYXNlPTAsIGJpdHM9OCwgZmlyc3RiaXQ9bWFjaGluZS5TUEkuTVNCLCBzY2s9bWFjaGluZS5QaW4oY29uZmlnLkNGR19TRENBUkRfU0NLX1BJTiksIG1vc2k9bWFjaGluZS5QaW4oY29uZmlnLkNGR19TRENBUkRfTU9TSV9QSU4pLCBtaXNvPW1hY2hpbmUuUGluKGNvbmZpZy5DRkdfU0RDQVJEX01JU09fUElOKSkKICAgICAgICAjIEFzc2lnbiBjaGlwIHNlbGVjdCAoQ1MpIHBpbiAoYW5kIHN0YXJ0IGl0IGhpZ2gpCiAgICAgICAgc2VsZi5jcyA9IG1hY2hpbmUuUGluKF9jc19waW4sIG1hY2hpbmUuUGluLk9VVCkKCiAgICAgICAgc2VsZi5zZCA9IE5vbmUKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuc2QgPSBzZGNhcmQuU0RDYXJkKF9zcGksIHNlbGYuY3MpCgogICAgICAgICAjIE1vdW50IGZpbGVzeXN0ZW0KICAgICAgICAgICAgc2VsZi52ZnMgPSB1b3MuVmZzRmF0KHNlbGYuc2QpCiAgICAgICAgICAgIHVvcy5tb3VudChzZWxmLnZmcywgc2VsZi5SRUNJUEVfQkFTRV9ESVIpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludCgic2RjYXJkIGluaXQgZmFpbGVkIHVzaW5nIGxvY2FsIGZpbGVzeXN0ZW0gb24gL2RhdGEiLCBzdHIoZSkpCgoKICAgICAgICBpZiBzZWxmLnNkIGlzIE5vbmU6CiAgICAgICAgICAgIHRyeTogCiAgICAgICAgICAgICAgICBvcy5ta2RpcihzZWxmLlJFQ0lQRV9CQVNFX0RJUikgCiAgICAgICAgICAgICAgICBwcmludCgiRGlyZWN0b3J5ICclcycgY3JlYXRlZCBzdWNjZXNzZnVsbHkiICUgc2VsZi5SRUNJUEVfQkFTRV9ESVIpIAogICAgICAgICAgICBleGNlcHQgT1NFcnJvciBhcyBlcnJvcjogCiAgICAgICAgICAgICAgICBwcmludCgiRGlyZWN0b3J5ICclcycgY2FuIG5vdCBiZSBjcmVhdGVkIiAlIHNlbGYuUkVDSVBFX0JBU0VfRElSKQoKCiAgICAgICAgc2VsZi5jcmVhdGVfc2V0dGluZ3NfZmlsZSgpCiAgICAgICAgc2VsZi5jcmVhdGVfaW5pdGlhbF9jb25maWcoKQoKICAgIGRlZiBjcmVhdGVfc2V0dGluZ3NfZmlsZShzZWxmKToKICAgICAgICBzZXR0aW5nc19kaWN0OiBkaWN0ID0ge30KICAgICAgICBpZiBub3Qgc2VsZi5TRVRUSU5HU19GSUxFTkFNRSBpbiBzZWxmLmxpc3RfZmlsZXMoKToKICAgICAgICAgICAgc2VsZi53cml0ZV9qc29uX2ZpbGUoc2VsZi5SRUNJUEVfQkFTRV9ESVIgKyAiLyIgKyBzZWxmLlNFVFRJTkdTX0ZJTEVOQU1FLCBzZXR0aW5nc19kaWN0KQoKICAgIGRlZiBjcmVhdGVfaW5pdGlhbF9jb25maWcoc2VsZik6CiAgICAgICAgbWVtYmVycyA9IFthdHRyIGZvciBhdHRyIGluIGRpcihTRVRUSU5HU19FTlRSSUVTKSBpZiBub3QgY2FsbGFibGUoZ2V0YXR0cihTRVRUSU5HU19FTlRSSUVTLCBhdHRyKSkgYW5kIG5vdCBhdHRyLnN0YXJ0c3dpdGgoIl9fIildCiAgICAgICAgIyBQT1BVTEFURSBDT05GSUcgRklMRSBXSVRIIEFMTCBQT1NTSUJMRSBLRVlTCiAgICAgICAgZm9yIG0gaW4gbWVtYmVyczoKICAgICAgICAgICAgaWYgc2VsZi5nZXRfc2V0dGluZ3NfZW50cnkobSkgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBzZWxmLnNldF9zZXR0aW5nc19lbnRyeShtLCBOb25lKSAgCgoKICAgICAgICAjIEFERCBTT01FIERFRkFVTFQgVkFMVUVTIEZST00gQ09ORklHCgogICAgICAgIGlmIHNlbGYuZ2V0X3NldHRpbmdzX2VudHJ5KFNFVFRJTkdTX0VOVFJJRVMuTkVUV09SS19XSUZJX1NTSUQpIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuc2V0X3NldHRpbmdzX2VudHJ5KFNFVFRJTkdTX0VOVFJJRVMuTkVUV09SS19XSUZJX1NTSUQsIGNvbmZpZy5DRkdfTkVUV09SS19XSUZJX1NTSUQpCgogICAgICAgIGlmIHNlbGYuZ2V0X3NldHRpbmdzX2VudHJ5KFNFVFRJTkdTX0VOVFJJRVMuTkVUV09SS19XSUZJX1BTSykgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5zZXRfc2V0dGluZ3NfZW50cnkoU0VUVElOR1NfRU5UUklFUy5ORVRXT1JLX1dJRklfUFNLLCBjb25maWcuQ0ZHX05FVFdPUktfV0lGSV9QU0spCgogICAgICAgIGlmIHNlbGYuZ2V0X3NldHRpbmdzX2VudHJ5KFNFVFRJTkdTX0VOVFJJRVMuTkVUV09SS19BUElfRU5QT0lOVCkgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5zZXRfc2V0dGluZ3NfZW50cnkoU0VUVElOR1NfRU5UUklFUy5ORVRXT1JLX0FQSV9FTlBPSU5ULCBjb25maWcuQ0ZHX05FVFdPUktfQVBJX0VORFBPSU5UKQogICAgICAgIAoKCiAgICBkZWYgZ2V0X3NldHRpbmdzX2VudHJ5KHNlbGYsIF9rZXk6IHN0cikgLT4gYW55OgogICAgICAgIHNldHRpbmdzX2RpY3Q6IGRpY3QgPSBzZWxmLmxvYWRfanNvbl9maWxlKHNlbGYuUkVDSVBFX0JBU0VfRElSICsgIi8iICsgc2VsZi5TRVRUSU5HU19GSUxFTkFNRSkKCiAgICAgICAgaWYgX2tleSBpbiBzZXR0aW5nc19kaWN0OgogICAgICAgICAgICByZXR1cm4gc2V0dGluZ3NfZGljdFtfa2V5XQoKICAgICAgICBwcmludCgiZ2V0X3NldHRpbmdzX2VudHJ5IGtleToge30gbm90IGZvdW5kIGluIHNldHRpbmdzIGZpbGUiLmZvcm1hdChfa2V5KSkKICAgICAgICByZXR1cm4gTm9uZQogICAgCgoKICAgIGRlZiBzZXRfc2V0dGluZ3NfZW50cnkoc2VsZiwgX2tleTogc3RyLCBfdmFsdWU6IGFueSk6CiAgICAgICAgc2V0dGluZ3NfZGljdDogZGljdCA9IHNlbGYubG9hZF9qc29uX2ZpbGUoc2VsZi5SRUNJUEVfQkFTRV9ESVIgKyAiLyIgKyBzZWxmLlNFVFRJTkdTX0ZJTEVOQU1FKQoKICAgICAgICBzZXR0aW5nc19kaWN0W3N0cihfa2V5KV0gPSBfdmFsdWUKCiAgICAgICAgc2VsZi53cml0ZV9qc29uX2ZpbGUoc2VsZi5SRUNJUEVfQkFTRV9ESVIgKyAiLyIgKyBzZWxmLlNFVFRJTkdTX0ZJTEVOQU1FLCBzZXR0aW5nc19kaWN0KQoKCgogICAgZGVmIGdldF9zZXR0aW5nc19iYXNlX2ZvbGRlcl9wYXRoKHNlbGYpIC0+IHN0cjoKICAgICAgICByZXR1cm4gc2VsZi5SRUNJUEVfQkFTRV9ESVIKCiAgICBkZWYgbGlzdF9maWxlcyhzZWxmKSAtPmxpc3Rbc3RyXToKICAgICAgICByZXR1cm4gb3MubGlzdGRpcihzZWxmLlJFQ0lQRV9CQVNFX0RJUikKCgogICAgCiAgICBkZWYgd3JpdGVfanNvbl9maWxlKHNlbGYsIF9wYXRoOnN0ciwgX2RpY3RfY29udGVudDogZGljdCk6CiAgICAgICAgIyBBREQgU0VUVElOR1MgU1RPUkFHRSBESVJFQ1RPUlkgSUYgUkVMIFBBVEggSVMgUkVRVUVTVEVECiAgICAgICAgaWYgbm90IF9wYXRoLnN0YXJ0c3dpdGgoIi8iKToKICAgICAgICAgICAgX3BhdGggPSBzZWxmLlJFQ0lQRV9CQVNFX0RJUiArICIvIiArIF9wYXRoCgogICAgICAgIHdpdGggb3BlbihfcGF0aCwgInciKSBhcyBmaWxlOgogICAgICAgICAgICBmaWxlLndyaXRlKGpzb24uZHVtcHMoX2RpY3RfY29udGVudCkpCgoKICAgIGRlZiBsb2FkX2pzb25fZmlsZShzZWxmLCBfcGF0aDogc3RyKSAtPiBkaWN0OgoKICAgICAgICBpZiBub3QgX3BhdGguc3RhcnRzd2l0aCgiLyIpOgogICAgICAgICAgICBfcGF0aCA9IHNlbGYuUkVDSVBFX0JBU0VfRElSICsgIi8iICsgX3BhdGgKICAgICAgICAKICAgICAgICAjIFRPRE8gQUREIENIRUNLIEZPUiBGSUxFIEVYU0lUUwogICAgICAgIHRyeToKICAgICAgICAgICAgc2V0dGluZ3NfZGljdDogZGljdCA9IHt9CiAgICAgICAgICAgIHdpdGggb3BlbihfcGF0aCwgInIiKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgc2V0dGluZ3NfZGljdCA9IGpzb24ubG9hZHMoZmlsZS5yZWFkKCkpCiAgICAgICAgICAgIHJldHVybiBzZXR0aW5nc19kaWN0CiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChlKQogICAgICAgICAgICByZXR1cm4ge30KCiAgICAjIyMjIyMjIyMjIyMjIyMjIFNQRUNJRklDIFNFVFRJTkdTIExPQURJTkcgRlVDVElPTlMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCiAgICBkZWYgc2F2ZV9zY2FsZV9jYWxpYnJhdGlvbl92YWx1ZXMoc2VsZiwgX3NjYWxlX2NhbGlicmF0aW9uXzBnOiBmbG9hdCwgX3NjYWxlX2NhbGlicmF0aW9uXzUwZzogZmxvYXQsIF9zY2FsZV9jYWxpYnJhdGlvbl93ZWlnaHRfd2VpZ2h0OiBmbG9hdCA9IGNvbmZpZy5DRkdfQ0FMSUJSQVRJT05fV0VJR0hUX1dFSUdIVCk6CiAgICAgICAgc2VsZi5zZXRfc2V0dGluZ3NfZW50cnkoU0VUVElOR1NfRU5UUklFUy5TQ0FMRV9DQUxJQlJBVElPTl9NSU5fVkFMVUUsIF9zY2FsZV9jYWxpYnJhdGlvbl8wZykKICAgICAgICBzZWxmLnNldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLlNDQUxFX0NBTElCUkFUSU9OX01BWF9WQUxVRSwgX3NjYWxlX2NhbGlicmF0aW9uXzUwZykKICAgICAgICBzZWxmLnNldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLlNDQUxFX0NBTElCUkFUSU9OX0NBTElCUkFUSU9OX1dFSUdIVCwgX3NjYWxlX2NhbGlicmF0aW9uX3dlaWdodF93ZWlnaHQpCgogICAgICAgIHByaW50KCJzYXZlX3NjYWxlX2NhbGlicmF0aW9uX3ZhbHVlcyAoe30te30pIC8ge30iLmZvcm1hdChfc2NhbGVfY2FsaWJyYXRpb25fMGcsIF9zY2FsZV9jYWxpYnJhdGlvbl81MGcsIF9zY2FsZV9jYWxpYnJhdGlvbl93ZWlnaHRfd2VpZ2h0KSkKCgogICAgCiAgICBkZWYgZ2V0X3NjYWxlX2NhbGlicmF0aW9uX2ZhY3RvcihzZWxmKToKICAgICAgICBzY19taW4gPSAwLjAKICAgICAgICBzY19mdWxsID0gNTAwMC4wCiAgICAgICAgc2Nfd2VpZ2h0ID0gY29uZmlnLkNGR19DQUxJQlJBVElPTl9XRUlHSFRfV0VJR0hUCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzY19taW4gPSBmbG9hdChzZWxmLmdldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLlNDQUxFX0NBTElCUkFUSU9OX01JTl9WQUxVRSkpCiAgICAgICAgICAgIHNjX2Z1bGwgPSBmbG9hdChzZWxmLmdldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLlNDQUxFX0NBTElCUkFUSU9OX01BWF9WQUxVRSkpCiAgICAgICAgICAgIHNjX3dlaWdodCA9IGZsb2F0KHNlbGYuZ2V0X3NldHRpbmdzX2VudHJ5KFNFVFRJTkdTX0VOVFJJRVMuU0NBTEVfQ0FMSUJSQVRJT05fQ0FMSUJSQVRJT05fV0VJR0hUKSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuc2F2ZV9zY2FsZV9jYWxpYnJhdGlvbl92YWx1ZXMoc2NfbWluLCBzY19mdWxsKQoKCiAgICAgICAgY2FsaWJyYXRpb25fZmFjdG9yID0gIChzY19taW4gLSBzY19mdWxsKSAvIHNjX3dlaWdodAogICAgICAgIHByaW50KCJnZXRfc2NhbGVfY2FsaWJyYXRpb25fZmFjdG9yIHVzaW5nICh7fS17fSkgLyB7fSA9IHt9Ii5mb3JtYXQoc2NfbWluLCBzY19mdWxsLCBzY193ZWlnaHQsIGNhbGlicmF0aW9uX2ZhY3RvcikpCiAgICAgICAgcmV0dXJuIGNhbGlicmF0aW9uX2ZhY3Rvcg==", "recipe_loader.py": "aW1wb3J0IG1hY2hpbmUNCmltcG9ydCBvcw0KaW1wb3J0IHRpbWUNCmltcG9ydCBqc29uDQoNCmZyb20gdWkgaW1wb3J0IHVpDQppbXBvcnQgY29uZmlnDQppbXBvcnQgaGVscGVyDQppbXBvcnQgZXhhbXBsZV9yZWNpcGVzDQppbXBvcnQgc2V0dGluZ3MNCmltcG9ydCByZWNpcGUNCmZyb20gc2luZ2xldG9uIGltcG9ydCBzaW5nbGV0b24NCg0KDQoNCkBzaW5nbGV0b24NCmNsYXNzIHJlY2lwZV9sb2FkZXI6DQogICAgDQogIA0KICAgDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBwcmludCgicmVjaXBlX2xvYWRlcjogX19pbml0X18iKQ0KDQogICAgICAgIHNlbGYuY3JlYXRlX2luaXRpYWxfcmVjaXBlKCkNCiAgICAgICAgDQogICANCiAgICAgDQogICAgZGVmIGNyZWF0ZV9pbml0aWFsX3JlY2lwZShzZWxmKToNCiAgICAgICAgcjogcmVjaXBlLnJlY2lwZQ0KICAgICAgICBmb3IgciBpbiBleGFtcGxlX3JlY2lwZXMuR0VUX0VYQU1QTEVfUkVDSVBFU19DT0xMRUNUSU9OKCk6DQogICAgICAgICAgICBzZXR0aW5ncy5zZXR0aW5ncygpLndyaXRlX2pzb25fZmlsZShyLmZpbGVuYW1lLCByLnRvX2RpY3QoKSkNCiAgICAgICAgICAgIA0KDQogICAgZGVmIGxpc3RfcmVjcGllcyhzZWxmLCBfaW5jbHVkZV9kZXNjcmlwdGlvbjogYm9vbCA9IEZhbHNlKSAtPiB0dXBsZVtzdHIsIHN0ciwgc3RyXToNCiAgICAgICAgcmVzID0gW10NCiAgICAgICAgZm9yIGYgaW4gc2V0dGluZ3Muc2V0dGluZ3MoKS5saXN0X2ZpbGVzKCk6DQogICAgICAgICAgICBpZiBmLmVuZHN3aXRoKCcucmVjaXBlJyk6DQogICAgICAgICAgICAgICAgIyBmID0gdGVxdWlsYV9zdW5yaXNlLnJlY2lwZQ0KICAgICAgICAgICAgICAgIG5hbWU6IHN0ciA9IGYucmVwbGFjZSgnLnJlY2lwZScsICcnKS5yZXBsYWNlKCdfJywgJyAnKQ0KDQogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHN0ciA9ICIiDQoNCiAgICAgICAgICAgICAgICBpZiBfaW5jbHVkZV9kZXNjcmlwdGlvbjoNCiAgICAgICAgICAgICAgICAgICAgcjogcmVjaXBlLnJlY2lwZSA9IHNlbGYuZ2V0X3JlY2lwZV9ieV9maWxlbmFtZShmKQ0KICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IHIuZ2V0X2Rlc2NyaXB0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgZGVsIHINCg0KICAgICAgICAgICAgICAgIHJlcy5hcHBlbmQoKGYsbmFtZSwgZGVzY3JpcHRpb24pKQ0KICAgICAgICByZXR1cm4gcmVzDQogICAgDQoNCiAgICBkZWYgZ2V0X3JlY2lwZV9maWxlX2NvbnRlbnQoc2VsZiwgX2ZpbGVuYW1lOiBzdHIpIC0+IGRpY3Q6DQogICAgICAgICMgQ0hFQ0sgRk9SIEVYVEVOVElPTg0KICAgICAgICBpZiBub3QgX2ZpbGVuYW1lLmVuZHN3aXRoKCcucmVjaXBlJyk6DQogICAgICAgICAgICBfZmlsZW5hbWUgPSBfZmlsZW5hbWUgKyAiLnJlY2lwZSINCiAgICAgICAgIyBDSEVDSyBGSUxFIEVYSVNUUw0KICAgICAgICBpZiBfZmlsZW5hbWUgbm90IGluIHNldHRpbmdzLnNldHRpbmdzKCkubGlzdF9maWxlcygpOg0KICAgICAgICAgICAgcmV0dXJuIHJlY2lwZS5yZWNpcGUoKQ0KICAgICAgICAjIExPQUQgQ09OVEVOVCBBUyBKU09ODQogICAgICAgIGpzb25fcmVjaXBlID0gc2V0dGluZ3Muc2V0dGluZ3MoKS5sb2FkX2pzb25fZmlsZShfZmlsZW5hbWUpDQogICAgICAgIHJldHVybiBqc29uX3JlY2lwZQ0KICAgIA0KDQogICAgZGVmIGdldF9yZWNpcGVfYnlfZmlsZW5hbWUoc2VsZiwgX2ZpbGVuYW1lOiBzdHIpIC0+IHJlY2lwZS5yZWNpcGU6DQogICAgICAgICMgTE9BRCBKU09OIENPTlRFTlQgT0YgUkVDSVBFIEZJTEUgDQogICAgICAgIGpzb25fcmVjaXBlOiBkaWN0ID0gc2VsZi5nZXRfcmVjaXBlX2ZpbGVfY29udGVudChfZmlsZW5hbWUpDQoNCiAgICAgICAgIyBDUkVBVEUgUkVDSVBFDQogICAgICAgIHI6IHJlY2lwZS5yZWNpcGUgPSByZWNpcGUucmVjaXBlKCkNCg0KICAgICAgICBpZiBqc29uX3JlY2lwZSBpcyBOb25lIG9yIG5vdCBqc29uX3JlY2lwZTogICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHINCiAgICAgICAgDQogICAgICAgICMgUEFSU0UgSlNPTiBUTyBSRUNJUEUNCiAgICAgICAgci5mcm9tX2RpY3QoanNvbl9yZWNpcGUpDQogICAgICAgIHJldHVybiByDQogICAgICAgIA0KDQogICAgDQogICAgDQo=", "recipe_editor.py": "aW1wb3J0IGNvbmZpZwppbXBvcnQgc2V0dGluZ3MKaW1wb3J0IHRpbWUKaW1wb3J0IGhlbHBlcgppbXBvcnQganNvbgppbXBvcnQgcmVjaXBlX2xvYWRlcgoKCnRyeToKICAgIGltcG9ydCBuZXR3b3JrCiAgICBpbXBvcnQgbWljcm9weXNlcnZlcgoKICAgIGNsYXNzIHJlY2lwZV9lZGl0b3I6CiAgICAgICAgCgogICAgICAgIHNlcnZlcjogbWljcm9weXNlcnZlci5NaWNyb1B5U2VydmVyID0gbWljcm9weXNlcnZlci5NaWNyb1B5U2VydmVyKHBvcnQ9Y29uZmlnLkNGR19FRElUT1JfSFRUUF9QT1JUKQogICAgICAgIAogICAgICAgIGRlZiBzZXJ2ZV9pbmRleChzZWxmLCByZXF1ZXN0KToKICAgICAgICAgICAgc2VsZi5zZXJ2ZXIuc2VuZCgiVEhJUyBJUyBJTkRFWCBQQUdFISIpCgogICAgICAgIGRlZiBzZXJ2ZV9yZWNpcGUoc2VsZiwgcmVxdWVzdCk6CiAgICAgICAgICAgIHBhcmFtcyA9IG1pY3JvcHlzZXJ2ZXIuZ2V0X3JlcXVlc3RfcXVlcnlfcGFyYW1zKHJlcXVlc3QpCQogICAgICAgICAgICBqc29uX3JlcHNvbnNlOiBkaWN0ID0ge30KICAgICAgICAgICAgaWYgJ2ZpbGVuYW1lJyBpbiBwYXJhbXM6CiAgICAgICAgICAgICAgICBqc29uX3JlcHNvbnNlID0gcmVjaXBlX2xvYWRlci5yZWNpcGVfbG9hZGVyLmdldF9yZWNpcGVfZmlsZV9jb250ZW50KHBhcmFtc1snZmlsZW5hbWUnXSkKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLnNlcnZlci5zZW5kKCJIVFRQLzEuMCAyMDAgT0tcclxuIikKICAgICAgICAgICAgc2VsZi5zZXJ2ZXIuc2VuZCgiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXHJcblxyXG4iKQogICAgICAgICAgICBzZWxmLnNlcnZlci5zZW5kKGpzb24uZHVtcHMoanNvbl9yZXBzb25zZSkpCgogICAgICAgIGRlZiBzZXJ2ZV9yZWNpcGVzKHNlbGYsIHJlcXVlc3QpOgogICAgICAgICAgICBqc29uX3JlcHNvbnNlOiBkaWN0ID0ge30KICAgICAgICAgICAgCgogICAgICAgICAgICBmb3IgciBpbiByZWNpcGVfbG9hZGVyLnJlY2lwZV9sb2FkZXIoKS5saXN0X3JlY3BpZXMoX2luY2x1ZGVfZGVzY3JpcHRpb249VHJ1ZSk6CiAgICAgICAgICAgICAgICBmaWxlbmFtZSwgbmFtZSwgZGVzY3JpcHRpb24gPSByCiAgICAgICAgICAgICAgICBsaW5rOiBzdHIgPSAiL3JlY2lwZT9maWxlbmFtZT17fSIuZm9ybWF0KGZpbGVuYW1lKQogICAgICAgICAgICAgICAganNvbl9yZXBzb25zZVtmaWxlbmFtZV0gPSB7Im5hbWUiOiBuYW1lLCAiZGVzY3JpcHRpb24iOiBkZXNjcmlwdGlvbiwgImxpbmsiOiBsaW5rfQoKICAgICAgICAgICAgc2VsZi5zZXJ2ZXIuc2VuZCgiSFRUUC8xLjAgMjAwIE9LXHJcbiIpCiAgICAgICAgICAgIHNlbGYuc2VydmVyLnNlbmQoIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxyXG5cclxuIikKICAgICAgICAgICAgc2VsZi5zZXJ2ZXIuc2VuZChqc29uLmR1bXBzKGpzb25fcmVwc29uc2UpKQoKCiAgICAgICAgZGVmIF9faW5pdF9fKCk6CiAgICAgICAgICAgIHBhc3MKICAgICAgICAKCiAgICAgICAgZGVmIGhhc19jYXBhYmlsaXRpZXMoc2VsZikgLT4gYm9vbDoKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgICAgICBkZWYgZGlzYWJsZV93aWZpKHNlbGYpOgogICAgICAgICAgICB3bGFuID0gbmV0d29yay5XTEFOKG5ldHdvcmsuU1RBX0lGKQogICAgICAgICAgICB3bGFuLmFjdGl2ZShGYWxzZSkKICAgICAgICAKCiAgICAgICAgZGVmIHNldHVwX3dlYnNlcnZlcihzZWxmKToKICAgICAgICAgICAgCiAgICAgICAgICAgICMgQUREIFJPVVRFUwogICAgICAgICAgICBzZWxmLnNlcnZlci5hZGRfcm91dGUoIi8iLCBzZWxmLnNlcnZlX2luZGV4KQogICAgICAgICAgICBzZWxmLnNlcnZlci5hZGRfcm91dGUoIi9pbmRleCIsIHNlbGYuc2VydmVfaW5kZXgpCiAgICAgICAgICAgIHNlbGYuc2VydmVyLm9uX25vdF9mb3VuZChzZWxmLnNlcnZlX2luZGV4KSAjIDQwNAoKICAgICAgICAgICAgc2VsZi5zZXJ2ZXIuYWRkX3JvdXRlKCIvcmVjaXBlIiwgc2VsZi5zZXJ2ZV9yZWNpcGUpCiAgICAgICAgICAgIHNlbGYuc2VydmVyLmFkZF9yb3V0ZSgiL3JlY2lwZXMiLCBzZWxmLnNlcnZlX3JlY2lwZXMpCgoKICAgICAgICAgICAgc2VsZi5zZXJ2ZXIubG9vcF9pbml0KCkKCiAgICAgICAgZGVmIHN0b3Bfd2Vic2VydmVyKHNlbGYpOgogICAgICAgICAgICBzZWxmLnNlcnZlci5zdG9wKCkKCiAgICAgICAgZGVmIGhhbmRsZV9jb25uZWN0aW9uKHNlbGYpOgogICAgICAgICAgICBzZWxmLnNlcnZlci5sb29wKCkKICAgCgogICAgICAgIGRlZiBvcGVuX2FjY2Vzc3BvaW50KHNlbGYsIF9zc2lkOiBzdHIsIF9wc2s6IHN0ciA9IE5vbmUpIC0+IHN0cjoKCiAgICAgICAgICAgIG5ldHdvcmsuY291bnRyeShjb25maWcuQ0ZHX05FVFdPUktfV0lGSUNPVU5UUlkpCiAgICAgICAgICAgIG5ldHdvcmsuaG9zdG5hbWUoY29uZmlnLkNGR19FRElUT1JfV0lGSV9TVEFfSE9TVE5BTUUuZm9ybWF0KCJfIiArIGhlbHBlci5nZXRfc3lzdGVtX2lkKCkpKQoKICAgICAgICAgICAgd2xhbiA9IG5ldHdvcmsuV0xBTihuZXR3b3JrLlNUQV9JRikKICAgICAgICAgICAgd2xhbi5hY3RpdmUoVHJ1ZSkKICAgICAgICAgICAgd2xhbi5jb25maWcoZXNzaWQ9X3NzaWQsIHBhc3N3b3JkPV9wc2spCiAgICAgICAgICAgIAogICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gd2xhbi5pZmNvbmZpZygpCiAgICAgICAgCgoKICAgICAgCiAgICAgICAgCgpleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgCiAgICBjbGFzcyByZWNpcGVfZWRpdG9yOgogICAgICAgIAogICAgICAgIGRlZiBfX2luaXRfXygpOgogICAgICAgICAgICBwYXNzCgogICAgICAgIGRlZiBoYXNfY2FwYWJpbGl0aWVzKHNlbGYpIC0+IGJvb2w6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICBkZWYgZGlzYWJsZV93aWZpKHNlbGYpOgogICAgICAgICAgICBwYXNzCiAgICAgICAgCiAgICAgICAgZGVmIHNldHVwX3dlYnNlcnZlcihzZWxmKToKICAgICAgICAgICAgcGFzcwogICAgICAgIAogICAgICAgIGRlZiBzdG9wX3dlYnNlcnZlcihzZWxmKToKICAgICAgICAgICAgcGFzcwoKICAgICAgICBkZWYgaGFuZGxlX2Nvbm5lY3Rpb24oc2VsZik6CiAgICAgICAgICAgIHBhc3MKCiAgICAgICAgZGVmIG9wZW5fYWNjZXNzcG9pbnQoc2VsZiwgX3NzaWQ6IHN0ciwgX3Bzazogc3RyID0gTm9uZSkgLT4gc3RyOgogICAgICAgICAgICByZXR1cm4gIiI=", "menu_entry_restore.py": "ZnJvbSBhYmMgaW1wb3J0IGFic3RyYWN0bWV0aG9kCmltcG9ydCBtZW51X2VudHJ5CmltcG9ydCBzeXN0ZW1fY29tbWFuZApmcm9tIHVpIGltcG9ydCB1aQpmcm9tIGxlZHJpbmcgaW1wb3J0IGxlZHJpbmcKZnJvbSByZWNpcGVfdXBkYXRlciBpbXBvcnQgcmVjaXBlX3VwZGF0ZXIKZnJvbSBtZW51X21hbmFnZXIgaW1wb3J0IG1lbnVfbWFuYWdlcgpjbGFzcyBtZW51X2VudHJ5X3Jlc3RvcmUobWVudV9lbnRyeS5tZW51X2VudHJ5KToKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygiUkVTVE9SRSBGSVJNV0FSRSIsICJSZXN0b3JlIHN5c3RlbSBmaXJtd2FyZSIpCgogICAgZGVmIHByZXZpZXcoc2VsZik6CiAgICAgICAgcHJpbnQoInByZXZpZXcge30iLmZvcm1hdChzZWxmLm5hbWUpKQogICAgICAgIHVpKCkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oc2VsZi5uYW1lLCBzZWxmLmRlc2NyaXB0aW9uKQoKCiAgICBkZWYgYWN0aXZhdGUoc2VsZik6CiAgICAgICAgcHJpbnQoImFjdGl2YXRlIHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICB1aSgpLnNob3dfcmVjaXBlX2luZm9ybWF0aW9uKCJTVVJFID8iLCAiUHJlc3Mgb2sgdG8gcmVzZXQgdGhlIGZpcm1ud2FyZS4gQ3VzdG9tIHJlY2lwZXMgd2lsbCBiZSBkZWxldGVkIikKICAgICAgICBsZWRyaW5nKCkuc2V0X25lb3BpeGVsX2Z1bGwoNTAsIDAsIDApCgogICAgZGVmIHRlYXJkb3duKHNlbGYpOgogICAgICAgIHByaW50KCJ0ZWFyZG93biB7fSIuZm9ybWF0KHNlbGYubmFtZSkpCgoKICAgIGRlZiB1cGRhdGUoc2VsZiwgX3N5c3RlbV9jb21tYW5kOiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCk6CiAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX05BVklHQVRJT046CiAgICAgICAgICAgIGlmIF9zeXN0ZW1fY29tbWFuZC5hY3Rpb24gPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9FTlRFUjoKICAgICAgICAgICAgICAgIGxlZHJpbmcoKS5zZXRfbmVvcGl4ZWxfZnVsbCg1MCwgMCwgNTApCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaW1wb3J0IG1hY2hpbmUKICAgICAgICAgICAgICAgICAgICBpbXBvcnQgZnNkYXRhcmVjb25zdHJ1Y3RvcgogICAgICAgICAgICAgICAgICAgIGZzZGF0YXJlY29uc3RydWN0b3IucmVzdG9yZShUcnVlKQogICAgICAgICAgICAgICAgICAgIG1hY2hpbmUucmVzZXQoKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgIHByaW50KGUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtZW51X21hbmFnZXIoKS5leGl0X2N1cnJlbnRfbWVudSgpCiAgICAgICAgICAg", "menu_entry_hardwaretest.py": "ZnJvbSBhYmMgaW1wb3J0IGFic3RyYWN0bWV0aG9kCmltcG9ydCBtZW51X2VudHJ5CmltcG9ydCBzeXN0ZW1fY29tbWFuZApmcm9tIHVpIGltcG9ydCB1aQpmcm9tIGxlZHJpbmcgaW1wb3J0IGxlZHJpbmcKZnJvbSBtZW51X21hbmFnZXIgaW1wb3J0IG1lbnVfbWFuYWdlcgpjbGFzcyBtZW51X2VudHJ5X2hhcmR3YXJldGVzdChtZW51X2VudHJ5Lm1lbnVfZW50cnkpOgoKCiAgIAogICAgbGFzdF90aW1lcl9ldmVudDogc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQgPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCgpCiAgICBsYXN0X3NjYWxlX2V2ZW50OiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCA9IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kKCkKICAgIGxhc3RfdXNlcl9ldmVudDogc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQgPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCgpCgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oIkhBUkRXQVJFIFRFU1QiLCAiVGVzdHMgdGhlIGludGVybmFsIGhhcmR3YXJlIikKCiAgICBkZWYgcHJldmlldyhzZWxmKToKICAgICAgICBwcmludCgicHJldmlldyBje30iLmZvcm1hdChzZWxmLm5hbWUpKQogICAgICAgIHVpKCkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oc2VsZi5uYW1lLCBzZWxmLmRlc2NyaXB0aW9uKQoKCiAgICBkZWYgYWN0aXZhdGUoc2VsZik6CiAgICAgICAgcHJpbnQoImFjdGl2YXRlIHt9Ii5mb3JtYXQoc2VsZi5uYW1lKSkKICAgICAgICB1aSgpLmNsZWFyKCkKICAgICAgICAKCgogICAgZGVmIHRlYXJkb3duKHNlbGYpOgogICAgICAgIHByaW50KCJ0ZWFyZG93biB7fSIuZm9ybWF0KHNlbGYubmFtZSkpCgoKICAgIGRlZiB1cGRhdGUoc2VsZiwgX3N5c3RlbV9jb21tYW5kOiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCk6CiAgICAgICAKICAgICAgICBpZiBfc3lzdGVtX2NvbW1hbmQudHlwZSA9PSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5DT01NQU5EX1RZUEVfVElNRVJfSVJROgogICAgICAgICAgIHNlbGYubGFzdF90aW1lcl9ldmVudCA9IF9zeXN0ZW1fY29tbWFuZAogICAgICAgIGVsaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX1NDQUxFX1ZBTFVFOgogICAgICAgICAgIHNlbGYubGFzdF9zY2FsZV9ldmVudCA9IF9zeXN0ZW1fY29tbWFuZAogICAgICAgIGVsaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX05BVklHQVRJT046CiAgICAgICAgICAgIHNlbGYubGFzdF91c2VyX2V2ZW50ID0gX3N5c3RlbV9jb21tYW5kCiAgICAgICAgICAgIAogICAgICAgIHVpKCkuc2hvd19tc2coInQ6e30gYTp7fSBiOnt9IHQ6e30gczp7fSIuZm9ybWF0KHNlbGYubGFzdF91c2VyX2V2ZW50LnR5cGUsIHNlbGYubGFzdF91c2VyX2V2ZW50LmFjdGlvbiwgc2VsZi5sYXN0X3VzZXJfZXZlbnQudmFsdWUsIHNlbGYubGFzdF90aW1lcl9ldmVudC52YWx1ZSwgc2VsZi5sYXN0X3NjYWxlX2V2ZW50LnZhbHVlKSk=", "menu_manager.py": "aW1wb3J0IG1lbnVfZW50cnkKaW1wb3J0IHN5c3RlbV9jb21tYW5kCmltcG9ydCBsZWRyaW5nCmZyb20gc2luZ2xldG9uIGltcG9ydCBzaW5nbGV0b24KCgpAc2luZ2xldG9uCmNsYXNzIG1lbnVfbWFuYWdlcjoKCgogICAgTUVOVV9TVEFURV9JTkFDVElWRSA9IDAKICAgIE1FTlVfU1RBVEVfQUNUSVZFID0gMQoKICAgIG1lbnVfZW50aXJlczogW21lbnVfZW50cnkubWVudV9lbnRyeV0gPSBbXQoKICAgIGN1cnJlbnRfYWN0aXZlX2VudHJ5X2luZGV4OiBpbnQgPSAtMQogICAgY3VycmVudF9tZW51X3N0YXRlOiBpbnQgPSBNRU5VX1NUQVRFX0lOQUNUSVZFCgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICAKICAgIGRlZiBhZGRfc3ViZW50cmllcyhzZWxmLCBfZW50cnk6IG1lbnVfZW50cnkubWVudV9lbnRyeSk6CgogICAgICAgIHNlbGYubWVudV9lbnRpcmVzLmFwcGVuZChfZW50cnkpCgogICAgICAgICMgVEhFIEZJUlNUIEVOVFJZIEFEREVEIElTIFRIRSBTVEFSVElORyBFTlRSWQogICAgICAgIGlmIHNlbGYuY3VycmVudF9hY3RpdmVfZW50cnlfaW5kZXggPCAwOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfYWN0aXZlX2VudHJ5X2luZGV4ID0gMAogICAgICAgICAgICBzZWxmLmRpc3BsYXlfcHJldmlldygpCiAgICAgICAgICAgIAogICAgCgoKCiAgICBkZWYgZ2V0X21lbnVfZW50cnkoc2VsZikgLT4gbWVudV9lbnRyeS5tZW51X2VudHJ5OgogICAgICAgIGlmIHNlbGYuY3VycmVudF9hY3RpdmVfZW50cnlfaW5kZXggPCAwOgogICAgICAgICAgICBwcmludCgibm8gbWVudV9lbnRyaWVzIGFkZGVkID8iKQogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGVsaWYgc2VsZi5jdXJyZW50X2FjdGl2ZV9lbnRyeV9pbmRleCA+PSBsZW4oc2VsZi5tZW51X2VudGlyZXMpOgogICAgICAgICAgICBzZWxmLmN1cnJlbnRfYWN0aXZlX2VudHJ5X2luZGV4ID0gMAoKICAgICAgICByZXR1cm4gc2VsZi5tZW51X2VudGlyZXNbc2VsZi5jdXJyZW50X2FjdGl2ZV9lbnRyeV9pbmRleF0KCgogICAgZGVmIGV4aXRfY3VycmVudF9tZW51KHNlbGYpOgogICAgICAgIGlmIHNlbGYuZ2V0X21lbnVfZW50cnkoKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi5nZXRfbWVudV9lbnRyeSgpLnRlYXJkb3duKCkKICAgICAgICAgICAgc2VsZi5kaXNwbGF5X3ByZXZpZXcoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuY3VycmVudF9hY3RpdmVfZW50cnlfaW5kZXggPSAwCgogICAgICAgIHNlbGYuY3VycmVudF9tZW51X3N0YXRlID0gc2VsZi5NRU5VX1NUQVRFX0lOQUNUSVZFCgoKICAgIGRlZiBkaXNwbGF5X3ByZXZpZXcoc2VsZik6CiAgICAgICAgc2VsZi5nZXRfbWVudV9lbnRyeSgpLnByZXZpZXcoKQogICAgICAgICMgT1BUSU9OQUwgRElTUExBWSBMRUQgU1RBVEUKICAgICAgICBsZWRyaW5nLmxlZHJpbmcoKS5zZXRfbmVvcGl4ZWxfc3Bpbm5lcihzZWxmLmN1cnJlbnRfYWN0aXZlX2VudHJ5X2luZGV4LCBsZW4oc2VsZi5tZW51X2VudGlyZXMpLCBsZWRyaW5nLmxlZHJpbmcoKS5DT0xPUl9QUkVTRVRfSFNWX0hfX1BJTkssIGxlZHJpbmcubGVkcmluZygpLkNPTE9SX1BSRVNFVF9IU1ZfSF9fQkxVRSkKICAgICAgICAKICAgIGRlZiBwcm9jZXNzX3VzZXJfY29tbWFuZHMoc2VsZiwgX3N5c3RlbV9jb21tYW5kOiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCk6CiAgICAgICAgaWYgc2VsZi5nZXRfbWVudV9lbnRyeSgpIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgIAogICAgICAgIGlmIHNlbGYuY3VycmVudF9tZW51X3N0YXRlID09IHNlbGYuTUVOVV9TVEFURV9JTkFDVElWRToKICAgICAgICAgICAgaWYgX3N5c3RlbV9jb21tYW5kLnR5cGUgPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuQ09NTUFORF9UWVBFX05BVklHQVRJT046CgogICAgICAgICAgICAgICAgIyBTQ1JPTCBUSE9VR0ggTUVOVVMKICAgICAgICAgICAgICAgIGlmIF9zeXN0ZW1fY29tbWFuZC5hY3Rpb24gPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9MRUZUOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudF9hY3RpdmVfZW50cnlfaW5kZXggPSAoc2VsZi5jdXJyZW50X2FjdGl2ZV9lbnRyeV9pbmRleCArIDEpICUgbGVuKHNlbGYubWVudV9lbnRpcmVzKQogICAgICAgICAgICAgICAgICAgIHByaW50KHNlbGYuY3VycmVudF9hY3RpdmVfZW50cnlfaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXNwbGF5X3ByZXZpZXcoKQogICAgICAgICAgICAgICAgZWxpZiBfc3lzdGVtX2NvbW1hbmQuYWN0aW9uID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fUklHSFQ6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50X2FjdGl2ZV9lbnRyeV9pbmRleCA9IChzZWxmLmN1cnJlbnRfYWN0aXZlX2VudHJ5X2luZGV4IC0gMSkgJSBsZW4oc2VsZi5tZW51X2VudGlyZXMpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXNwbGF5X3ByZXZpZXcoKQogICAgICAgICAgICAgICAgIyBFTlRFUiBNRU5VCiAgICAgICAgICAgICAgICBlbGlmIF9zeXN0ZW1fY29tbWFuZC5hY3Rpb24gPT0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9FTlRFUjoKICAgICAgICAgICAgICAgICAgICBzZWxmLmdldF9tZW51X2VudHJ5KCkuYWN0aXZhdGUoKQogICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudF9tZW51X3N0YXRlID0gc2VsZi5NRU5VX1NUQVRFX0FDVElWRQoKICAgICAgICBlbGlmIHNlbGYuY3VycmVudF9tZW51X3N0YXRlID09IHNlbGYuTUVOVV9TVEFURV9BQ1RJVkU6CiAgICAgICAgICAgIGlmIF9zeXN0ZW1fY29tbWFuZC50eXBlID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLkNPTU1BTkRfVFlQRV9OQVZJR0FUSU9OIGFuZCBfc3lzdGVtX2NvbW1hbmQuYWN0aW9uID09IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fRVhJVDoKICAgICAgICAgICAgICAgICMgTEVBVkUgTUVOVQogICAgICAgICAgICAgICAgc2VsZi5leGl0X2N1cnJlbnRfbWVudSgpCiAgICAgICAgICAgICMgQUxMIE9USEVSIElOUFVUIFdJTEwgQkUgUEFTU0VEIFRPIFRIRSBNRU5VIEVOVFJZIElUU0VMRgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5nZXRfbWVudV9lbnRyeSgpLnVwZGF0ZShfc3lzdGVtX2NvbW1hbmQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5leGl0X2N1cnJlbnRfbWVudSgpICAgIAoKCiAgICBkZWYgcHJvY2Vzc19zeXN0ZW1fY29tbWFuZHMoc2VsZiwgX3N5c3RlbV9jb21tYW5kOiBzeXN0ZW1fY29tbWFuZCk6CiAgICAgICAgaWYgc2VsZi5jdXJyZW50X21lbnVfc3RhdGUgPT0gc2VsZi5NRU5VX1NUQVRFX0FDVElWRToKICAgICAgICAgICAgc2VsZi5nZXRfbWVudV9lbnRyeSgpLnVwZGF0ZShfc3lzdGVtX2NvbW1hbmQpCg=="}

# FOR DEBUGGING
ALWAYS_HARD_RESTORE: bool = False

RESTORE_IGNORED_FILES_LIST = ['static_modules', 'thridparty_libs', 'boot.py', 'lib', 'fsdatareconstructor']

def restore_filesystem(_basepath: str = "/", _override: bool = False, _erase: bool = False):
    import ubinascii
    import os

    if _erase:
        print("erase enabled")
        for f in os.listdir():
            if f in __file__:
                print("skipping {} to vaoid installer override".format(f))
                continue 
            
            # UGLY REWORK
            for n in RESTORE_IGNORED_FILES_LIST:
                if n in f:
                    print("skipping {} to vaoid installer override".format(f))
                    continue

            os.remove(f)

    for k in FILE_DATA:

        if k in os.listdir() and not _override:
            continue
        
        print(k)
        d = FILE_DATA[k]
        ubinascii.a2b_base64(d)

        with open(_basepath + "/" + k, "w") as file:
            file.write(ubinascii.a2b_base64(d))

    # CLEANUP
    del ubinascii
    del os


def restore(_hard_restore: bool = False):
    import machine
    import time
    RESTORE_BUTTON_PIN: int = 15
    RESTORE_LED_PIN: int = 25

    push_button_restore = machine.Pin(RESTORE_BUTTON_PIN, machine.Pin.IN, machine.Pin.PULL_UP)
    led_onboard = machine.Pin(RESTORE_LED_PIN, machine.Pin.OUT)

    if not push_button_restore.value() or ALWAYS_HARD_RESTORE or _hard_restore:
        led_onboard.on()
        time.sleep(0.2)
        led_onboard.off()
        time.sleep(0.2)
        led_onboard.on()
        time.sleep(0.2)
        led_onboard.on()
        # RESTORE HARD OVERRIDE USER CHANGES
        restore_filesystem(_override=True, _erase=True)
        led_onboard.off()

    else:
        led_onboard.on()
        # RESTORE SOFT ONLY ADD MISSING FILES IN VIRTUAL FS
        restore_filesystem()
        led_onboard.off()

    # RESTORE PIN STATE
    machine.Pin(RESTORE_BUTTON_PIN, machine.Pin.IN, machine.Pin.OPEN_DRAIN)
    machine.Pin(RESTORE_LED_PIN, machine.Pin.IN)
    
    del machine


if __name__ == "__main__":
    restore()

