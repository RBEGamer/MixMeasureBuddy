FILE_DATA = {"menu_entry_scale.py": "ZnJvbSBhYmMgaW1wb3J0IEFCQwppbXBvcnQgbWVudV9lbnRyeQoKY2xhc3MgbWVudV9lbnRyeV9zY2FsZShtZW51X2VudHJ5KToKCiAgICBkZWYgX19pbml0X18oc2VsZiwgX25hbWU6IHN0cik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBhY3RpdmF0ZShzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHRlYXJkb3duKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgdXBkYXRlKHNlbGYpOgogICAgICAgIHBhc3M=", "ledring.py": "aW1wb3J0IG5lb3BpeGVsCmltcG9ydCBtYWNoaW5lCmltcG9ydCBjb25maWcKaW1wb3J0IG5lb3BpeGVsCmltcG9ydCByYW5kb20KZnJvbSBzaW5nbGV0b24gaW1wb3J0IHNpbmdsZXRvbgoKQHNpbmdsZXRvbgpjbGFzcyBsZWRyaW5nOgoKCiAgICBuZW9waXhlbHJpbmc6IG5lb3BpeGVsLk5lb1BpeGVsID0gTm9uZQogICAKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLm5lb3BpeGVscmluZyA9IG5lb3BpeGVsLk5lb1BpeGVsKG1hY2hpbmUuUGluKGNvbmZpZy5DRkdfTkVPUElYRUxfUElOKSwgY29uZmlnLkNGR19ORU9QSVhFTF9MRURfQ09VTlQpCiAgIAogICAgZGVmIGNsZWFyKHNlbGYpOgogICAgICAgIHNlbGYuc2V0X25lb3BpeGVsX2Z1bGwoMCwgMCwgMCkKCiAgICBkZWYgc2V0X25lb3BpeGVsX2Z1bGwoc2VsZiwgX3I6IGludCwgX2c6IGludCwgX2I6IGludCk6CiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoY29uZmlnLkNGR19ORU9QSVhFTF9MRURfQ09VTlQpOgogICAgICAgICAgICBzZWxmLm5lb3BpeGVscmluZ1tpXSA9IChfciwgX2csIF9iKQogICAgICAgIHNlbGYubmVvcGl4ZWxyaW5nLndyaXRlKCkKCiAgICBkZWYgc2V0X25lb3BpeGVsX3JhbmRvbShzZWxmLCBfZXI6IGJvb2wgPSBGYWxzZSwgX2VnOiBib29sID0gRmFsc2UsIF9lYjogYm9vbCA9IFRydWUpOgogICAgICAgIHI6IGludCA9IGludCgxMjgqIHJhbmRvbS5yYW5kb20oKSkgKiBfZXIKICAgICAgICBnOiBpbnQgPSBpbnQoMTI4KiByYW5kb20ucmFuZG9tKCkpICogX2VnCiAgICAgICAgYjogaW50ID0gaW50KDEyOCogcmFuZG9tLnJhbmRvbSgpKSAqIF9lYgogICAgICAgIHNlbGYuc2V0X25lb3BpeGVsX2Z1bGwociwgZywgYik=", "system_command.py": "ZnJvbSBtaWNyb3B5dGhvbiBpbXBvcnQgY29uc3QKCmNsYXNzIHN5c3RlbV9jb21tYW5kOgogICAgVU5LTk9XTjogaW50ID0gY29uc3QoLTEpCiAgICBDT01NQU5EX1RZUEVfTkFWSUdBVElPTjogaW50ID0gY29uc3QoMCkKCiAgICBOQVZJR0FUSU9OX0xFRlQ6IGludCA9IGNvbnN0KDApCiAgICBOQVZJR0FUSU9OX1JJR0hUOiBpbnQgPSBjb25zdCgxKQogICAgTkFWSUdBVElPTl9FTlRFUjogaW50ID0gY29uc3QoMikKICAgIE5BVklHQVRJT05fRVhJVDogaW50ID0gY29uc3QoMykKCgoKICAgIHR5cGU6IGludCA9IFVOS05PV04KICAgIGFjdGlvbjogaW50ID0gVU5LTk9XTgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBfdHlwZTogaW50ID0gVU5LTk9XTiwgX2FjdGlvbjogaW50ID0gVU5LTk9XTik6CiAgICAgICAgc2VsZi50eXBlID0gX3R5cGUKICAgICAgICBzZWxmLmFjdGlvbiA9IF9hY3Rpb24=", "menu_manager.py": "aW1wb3J0IG1lbnVfZW50cnkKaW1wb3J0IHN5c3RlbV9jb21tYW5kCmZyb20gc2luZ2xldG9uIGltcG9ydCBzaW5nbGV0b24KCgpAc2luZ2xldG9uCmNsYXNzIG1lbnVfbWFuYWdlcjoKCiAgICBtZW51X2VudGlyZXM6IFttZW51X2VudHJ5Lm1lbnVfZW50cnldID0gW10KCiAgICBjdXJyZW50X2FjdGl2ZV9lbnRyeTogbWVudV9lbnRyeS5tZW51X2VudHJ5ID0gTm9uZQoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBwYXNzCgogICAgCiAgICBkZWYgYWRkX3N1YmVudHJpZXMoc2VsZiwgX2VudHJ5OiBtZW51X2VudHJ5Lm1lbnVfZW50cnkpOgogICAgICAgIHBhc3MKCgogICAgZGVmIHByb2Nlc3NfdXNlcl9jb21tYW5kcyhzZWxmLCBfc3lzdGVtX2NvbW1hbmQ6IHN5c3RlbV9jb21tYW5kKToKICAgICAgICBwYXNzCiAgICAKICAgIGRlZiBwcm9jZXNzX3N5c3RlbV9jb21tYW5kcyhzZWxmLCBfc3lzdGVtX2NvbW1hbmQ6IHN5c3RlbV9jb21tYW5kKToKICAgICAgICBwYXNz", "while.bck": "IAoKCgogICAgI3RhcmVfdmFsdWUgPSBzY2FsZXMuZ2V0X3VuaXQoVHJ1ZSkgIyBTVEFCTEUgUkVBRAogICAgI3RhcmVfdmFsdWVfaW5pdGlhbCA9IHRhcmVfdmFsdWUKICAgICNwcmludCgidGFyZV92YWx1ZTp7fSIuZm9ybWF0KHRhcmVfdmFsdWUpKQogICAgI3NjYWxlX3ZhbHVlID0gMAogICAgI3ByaW50KCJsb2FkZWQgc2NhbGUgY2FsaWJyYXRpb24gdmFsdWVkIGNhbF93e30gY2FsLWZhY3R7fSIuZm9ybWF0KGNvbmZpZy5DRkdfQ0FMSUJSQVRJT05fV0VJR0hUX1dFSUdIVCwgY2FsaWJyYXRpb25fZmFjdG9yKSkKICAgIAogICAgCgoKICAgICMgQ09ORklHVVJFIFVTRVIgQlVUVE9OUwogICAgI3B1c2hfYnV0dG9uX3VwID0gbWFjaGluZS5QaW4oY29uZmlnLkNGR19CVVRUT05fVVBfUElOLCBtYWNoaW5lLlBpbi5JTiwgbWFjaGluZS5QaW4uUFVMTF9VUCkKICAgICNwdXNoX2J1dHRvbl9kb3duID0gbWFjaGluZS5QaW4oY29uZmlnLkNGR19CVVRUT05fRE9XTl9QSU4sIG1hY2hpbmUuUGluLklOLCBtYWNoaW5lLlBpbi5QVUxMX1VQKQogICAgCiAgICAKICAgCiAgICAKICAgICNkZWxheV92YWx1ZSA9IE5vbmUgIyBGT1IgVVNFUiBUSU1FUiAgICAgIAogICAgICAgICAgIAogICAgI3RhcmdldF92YWx1ZSA9IE5vbmUKICAgICNzY2FsZV9vZmZzZXQgPSAwLjAKICAgICNzY2FsZV92YWx1ZV9iZWZvcmVfZ2xhc3NfYWRkZWQgPSAwCiAgICAKICAgIAogICAgCiAgICAKICAgIAogICAgI2xhc3RfZGlzcGxheV91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICNsYXN0X3N5c3RhdGVfdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAjbGFzdF9yZWNpcGVfc3RlcF91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICNsYXN0X3JlY2lwZV9pbmdfdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAjbGFzdF91c2VyYnV0dG9uX3VwZGF0ZSA9IE5vbmUKICAgIAogICAgI2luZ3JlZGllbnRfY291bnRlciA9IDAKICAgIAogICAgCiAgICAjbGFzdF9idXR0b25fcHJlc3NlZCA9IE5vbmUKICAgICNidXR0b25fcHJlc3NlZCA9IFVCX05PTkUKICAgICN0aW1lX2VsYXBzZWQgPSAwCiAgICAjbG9hZF9uZXh0X3N0ZXAgPSBGYWxzZQogICAgCiAgICAKICAKCiAgICAKICAgICN0YXJnZXRfdmFsdWUgPSAwLjAKICAgICNmb3VuZF9yZWNpcGVzID0gW10KICAgICNtYWlubWVudV9yZWNpcGVfaW5kZXggPSAwCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKICAgICAgICAjIFJFQUQgVVNFUl9CVVRUT05TCiAgICAgICAgaWYgbm90IHB1c2hfYnV0dG9uX3VwLnZhbHVlKCkgYW5kIG5vdCBwdXNoX2J1dHRvbl9kb3duLnZhbHVlKCkgYW5kIGJ1dHRvbl9wcmVzc2VkIGlzIFVCX1JFTEVBU0U6CiAgICAgICAgICAgICNwcmludCgpCiAgICAgICAgICAgICNsYXN0X3VzZXJidXR0b25fdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgICNsYXN0X2J1dHRvbl9wcmVzc2VkID0gVUJfRE9XTgogICAgICAgICAgICBpZiBsYXN0X3VzZXJidXR0b25fdXBkYXRlIGlzIG5vdCBOb25lIGFuZChoZWxwZXIubWlsbGlzKCkgLSBsYXN0X3VzZXJidXR0b25fdXBkYXRlKSA+IDEwMDoKICAgICAgICAgICAgICAgIGJ1dHRvbl9wcmVzc2VkID0gVUJfVVBMT05HCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBsYXN0X3VzZXJidXR0b25fdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgICAgICAKICAgICAgICBlbGlmIHB1c2hfYnV0dG9uX3VwLnZhbHVlKCkgYW5kIG5vdCBwdXNoX2J1dHRvbl9kb3duLnZhbHVlKCkgYW5kIGJ1dHRvbl9wcmVzc2VkIGlzIFVCX1JFTEVBU0U6CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgbGFzdF91c2VyYnV0dG9uX3VwZGF0ZSBpcyBub3QgTm9uZSBhbmQoaGVscGVyLm1pbGxpcygpIC0gbGFzdF91c2VyYnV0dG9uX3VwZGF0ZSkgPiA1MDA6CiAgICAgICAgICAgICAgICBidXR0b25fcHJlc3NlZCA9IFVCX1VQCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBsYXN0X3VzZXJidXR0b25fdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgI2xhc3RfYnV0dG9uX3ByZXNzZWQgPSBVQl9VUAogICAgICAgICAgICAgICAgI2J1dHRvbl9wcmVzc2VkID0gVUJfVVAKICAgICAgICBlbGlmIG5vdCBwdXNoX2J1dHRvbl91cC52YWx1ZSgpIGFuZCBwdXNoX2J1dHRvbl9kb3duLnZhbHVlKCkgYW5kIGJ1dHRvbl9wcmVzc2VkIGlzIFVCX1JFTEVBU0U6CiAgICAgICAgICAgIGlmIGxhc3RfdXNlcmJ1dHRvbl91cGRhdGUgaXMgbm90IE5vbmUgYW5kKGhlbHBlci5taWxsaXMoKSAtIGxhc3RfdXNlcmJ1dHRvbl91cGRhdGUpID4gNTAwOgogICAgICAgICAgICAgICAgYnV0dG9uX3ByZXNzZWQgPSBVQl9ET1dOCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBsYXN0X3VzZXJidXR0b25fdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgIAoKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICBlbGlmIHB1c2hfYnV0dG9uX3VwLnZhbHVlKCkgYW5kIHB1c2hfYnV0dG9uX2Rvd24udmFsdWUoKSBhbmQgYnV0dG9uX3ByZXNzZWQgaXMgVUJfTk9ORToKICAgICAgICAgICAgaWYgbGFzdF91c2VyYnV0dG9uX3VwZGF0ZSBpcyBub3QgTm9uZSBhbmQoaGVscGVyLm1pbGxpcygpIC0gbGFzdF91c2VyYnV0dG9uX3VwZGF0ZSkgPiAxMDA6CiAgICAgICAgICAgICAgICBidXR0b25fcHJlc3NlZCA9IFVCX1JFTEVBU0UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxhc3RfdXNlcmJ1dHRvbl91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICAgICAgICAgCiAgICAgICAgCgogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkKCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgIyBSRUFEIFNDQUxFCiAgICAgICAgaWYgc3lzdGVtX3N0YXRlID49IFNZU1RBVEVfUkVDSVBFX1NUQVJUIG9yIHN5c3RlbV9zdGF0ZSA9PSBTWVNURU1TVEFURV9TQ0FMRV9NT0RFIG9yIHN5c3RlbV9zdGF0ZSA9PSBTWVNURU1TVEFURV9SQVdfTU9ERSBvciBzeXN0ZW1fc3RhdGUgPT0gU1lTVEVNU1RBVEVfQ0FMSUJSQVRJT05fTU9ERV9GVUxMIG9yIHN5c3RlbV9zdGF0ZSA9PSBTWVNURU1TVEFURV9DQUxJQlJBVElPTl9NT0RFX1pFUk86CiAgICAgICAgICAgIHNjYWxlX3ZhbHVlX2cgPSBzY2FsZXMuZ2V0X3VuaXQoVHJ1ZSkgLSB0YXJlX3ZhbHVlCgogICAgICAgICAgICAKCiAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgIyBSRVRVUk4gQlVUVE9OCiAgICAgICAgaWYgc3lzdGVtX3N0YXRlID4gU1lTVEVNU1RBVEVfTUFJTk1FTlUgYW5kIGJ1dHRvbl9wcmVzc2VkID09IFVCX1VQTE9ORzoKICAgICAgICAgICAgYnV0dG9uX3ByZXNzZWQgPSBVQl9OT05FCiAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RBVEVfSURMRQogICAgICAgICAgICBsYXN0X3N5c3RhdGVfdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICMgR0xPQkFMIFNUQVRFIE1BQ0hJRU5FCiAgICAgICAgaWYgc3lzdGVtX3N0YXRlID09IFNZU1RBVEVfSURMRTogIyBJTklUSUFMIFNZU1RFTVNUQVRFCiAgICAgICAgICAgIGd1aS5zaG93X3RpdGxlc2NyZWVuKCkKICAgICAgICAgICAgaWYgIGFicyhsYXN0X3N5c3RhdGVfdXBkYXRlIC0gaGVscGVyLm1pbGxpcygpKSA+IDIwMDAwIG9yIGJ1dHRvbl9wcmVzc2VkICE9IFVCX05PTkU6CiAgICAgICAgICAgICAgICBidXR0b25fcHJlc3NlZCA9IFVCX05PTkUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGFzdF9zeXN0YXRlX3VwZGF0ZSA9IGhlbHBlci5taWxsaXMoKQogICAgICAgICAgICAgICAgc3lzdGVtX3N0YXRlID0gU1lTVEVNU1RBVEVfRU5URVJfTUFJTk1FTlUKICAgICAgICAgICAgCiAgICAgICAgZWxpZiBzeXN0ZW1fc3RhdGUgPT0gU1lTVEVNU1RBVEVfRU5URVJfTUFJTk1FTlU6ICMgUkVMT0FEIFJFQ0lQRVMKICAgICAgICAgICAgaGVscGVyLnNldF9uZW9waXhlbF9mdWxsKG5lb3BpeGVscmluZywgMCwgMCwgMTAwKQogICAgICAgICAgICBmb3VuZF9yZWNpcGVzID0gcmVjaXBlLmxpc3RfcmVjcGllcygpCiAgICAgICAgICAgIG1haW5tZW51X3JlY2lwZV9pbmRleCA9IC0xICMgVE8gVFJJR0dFUiBGSVJTVCBUSU1FIERJU1BMQVkgVVBEQVRFIEFGVEVSIEVOVEVSSU5HIFRIRSBTVEFURQogICAgICAgICAgICBwcmludChmb3VuZF9yZWNpcGVzKQogICAgICAgICAgICBsYXN0X3N5c3RhdGVfdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RFTVNUQVRFX01BSU5NRU5VCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgIGVsaWYgc3lzdGVtX3N0YXRlID09IFNZU1RFTVNUQVRFX01BSU5NRU5VOiAjIERJU1BMQVkgTUFOSU1FTlUKICAgICAgICAgICAgCiAgICAgICAgICAgICMgRElTUExBWSBORVhUIE1FTlUKCiAgICAgICAgICAgIGlmIGJ1dHRvbl9wcmVzc2VkID09IFVCX1VQIG9yIG1haW5tZW51X3JlY2lwZV9pbmRleCA9PSAtMToKICAgICAgICAgICAgICAgIGJ1dHRvbl9wcmVzc2VkID0gVUJfTk9ORQogICAgICAgICAgICAgICAgIyBUTyBUUklHR0VSIEZJUlNUIFRJTUUgRElTUExBWSBVUERBVEUgQUZURVIgRU5URVJJTkcgVEhFIFNUQVRFCiAgICAgICAgICAgICAgICBpZiBtYWlubWVudV9yZWNpcGVfaW5kZXggPT0gLTE6CiAgICAgICAgICAgICAgICAgICAgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID0gMAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIAogICAgICAgICAgICAgICAgaWYgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID49IChsZW4oZm91bmRfcmVjaXBlcyktMSkgKyA0OiAjICsyIGZvciBVUERBVEVfUkVDSVBFUywgU0NBTEVfTU9ERQogICAgICAgICAgICAgICAgICAgIG1haW5tZW51X3JlY2lwZV9pbmRleCA9IDAKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID0gbWFpbm1lbnVfcmVjaXBlX2luZGV4ICsgMQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBTSE9XIFJFQ0lQRVMKICAgICAgICAgICAgICAgIGlmIG1haW5tZW51X3JlY2lwZV9pbmRleCA8IGxlbihmb3VuZF9yZWNpcGVzKToKICAgICAgICAgICAgICAgICAgICByZWNfbmFtZSA9IGZvdW5kX3JlY2lwZXNbbWFpbm1lbnVfcmVjaXBlX2luZGV4XVswXQogICAgICAgICAgICAgICAgICAgIHByaW50KHJlY19uYW1lKQogICAgICAgICAgICAgICAgICAgIGlmIHJlY2lwZS5sb2FkX3JlY2lwZShyZWNfbmFtZSk6CiAgICAgICAgICAgICAgICAgICAgICAgIGd1aS5zZXRfZnVsbF9yZWZyZXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5mb3JtYXRpb24gPSByZWNpcGUuZ2V0X3JlY2lwZV9pbmZvcm1hdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGluZm9ybWF0aW9uKQogICAgICAgICAgICAgICAgICAgICAgICBndWkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oaW5mb3JtYXRpb25bMF0sIGluZm9ybWF0aW9uWzFdKQogICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByZWNpcGUudW5sb2FkX3JlY2lwZSgpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID09IChsZW4oZm91bmRfcmVjaXBlcyktMSkrMToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGVscGVyLmhhc193aWZpKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWkuc2V0X2Z1bGxfcmVmcmVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oIlNDQUxFIE1PREUiLCAibGlrZSBhIG5vcm1hbCBraXRjaGVuIHNjYWxlIikKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5tZW51X3JlY2lwZV9pbmRleCA9IChsZW4oZm91bmRfcmVjaXBlcyktMSkrMwogICAgICAgICAgICAgICAgICAgIGVsaWYgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID09IChsZW4oZm91bmRfcmVjaXBlcyktMSkrMjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGVscGVyLmhhc193aWZpKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWkuc2V0X2Z1bGxfcmVmcmVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oIlJFQ0lQRSBVUERBVEUiLCAidXBkYXRlcyBhbGwgcmVjaXBlcyB1c2luZyB0aGUgd2ViYXBwIikKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5tZW51X3JlY2lwZV9pbmRleCA9IChsZW4oZm91bmRfcmVjaXBlcyktMSkrMwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZWxpZiBtYWlubWVudV9yZWNpcGVfaW5kZXggPT0gKGxlbihmb3VuZF9yZWNpcGVzKS0xKSszOgogICAgICAgICAgICAgICAgICAgICAgICBndWkuc2V0X2Z1bGxfcmVmcmVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGd1aS5zaG93X3JlY2lwZV9pbmZvcm1hdGlvbigiQ0FMSUJSQVRFIiwgInJ1biBhIHNjYWxlIGNhbGlicmF0aW9uIHByb2dyYW0uIEEgNTBnIHdlaWdodCBpcyBuZWVkZWQiKQogICAgICAgICAgICAgICAgICAgIGVsaWYgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID09IChsZW4oZm91bmRfcmVjaXBlcyktMSkrNDoKICAgICAgICAgICAgICAgICAgICAgICAgZ3VpLnNldF9mdWxsX3JlZnJlc2goKQogICAgICAgICAgICAgICAgICAgICAgICBndWkuc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oIkhBUkRXQVJFIFRFU1QiLCAidGVzdCBpbnRlcm5hbCBoYXJkd2FyZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHByaW50KCJleHRyYSBtZW51IHt9Ii5mb3JtYXQobWFpbm1lbnVfcmVjaXBlX2luZGV4KSkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBlbGlmIGJ1dHRvbl9wcmVzc2VkID09IFVCX1VQTE9ORyBvciBidXR0b25fcHJlc3NlZCA9PSBVQl9ET1dOOgogICAgICAgICAgICAgICAgYnV0dG9uX3ByZXNzZWQgPSBVQl9OT05FCiAgICAgICAgICAgICAgICBsYXN0X3N5c3RhdGVfdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIHJlY2lwZS5pc19yZWNpcGVfbG9hZGVkKCk6CiAgICAgICAgICAgICAgICAgICAgc3lzdGVtX3N0YXRlID0gU1lTVEFURV9SRUNJUEVfU1RBUlQKICAgICAgICAgICAgICAgIGVsaWYgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID09IChsZW4oZm91bmRfcmVjaXBlcyktMSkrMToKICAgICAgICAgICAgICAgICAgICBzeXN0ZW1fc3RhdGUgPSBTWVNURU1TVEFURV9TQ0FMRV9NT0RFCiAgICAgICAgICAgICAgICAgICAgIyBVUERBVEUgTkVPUElYRUwKICAgICAgICAgICAgICAgICAgICBoZWxwZXIuc2V0X25lb3BpeGVsX2Z1bGwobmVvcGl4ZWxyaW5nLCAwLCAxMDAsIDEwMCkKCiAgICAgICAgICAgICAgICBlbGlmIG1haW5tZW51X3JlY2lwZV9pbmRleCA9PSAobGVuKGZvdW5kX3JlY2lwZXMpLTEpKzI6CiAgICAgICAgICAgICAgICAgICAgc3lzdGVtX3N0YXRlID0gU1lTVEVNU1RBVEVfVVBEQVRFX01PREVfUVJfU1RBUlQKICAgICAgICAgICAgICAgICAgICAjIFVQREFURSBORU9QSVhFTAogICAgICAgICAgICAgICAgICAgIGhlbHBlci5zZXRfbmVvcGl4ZWxfZnVsbChuZW9waXhlbHJpbmcsIDEwMCwgMCwgMTAwKQoKICAgICAgICAgICAgICAgIGVsaWYgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID09IChsZW4oZm91bmRfcmVjaXBlcyktMSkrMzoKICAgICAgICAgICAgICAgICAgICBzeXN0ZW1fc3RhdGUgPSBTWVNURU1TVEFURV9DQUxJQlJBVElPTl9NT0RFX0VOVFJZCiAgICAgICAgICAgICAgICAgICAgIyBVUERBVEUgTkVPUElYRUwKICAgICAgICAgICAgICAgICAgICBoZWxwZXIuc2V0X25lb3BpeGVsX2Z1bGwobmVvcGl4ZWxyaW5nLCAxMDAsIDEwLCA1MCkKICAgICAgICAgICAgICAgIGVsaWYgbWFpbm1lbnVfcmVjaXBlX2luZGV4ID09IChsZW4oZm91bmRfcmVjaXBlcyktMSkrNDoKICAgICAgICAgICAgICAgICAgICBzeXN0ZW1fc3RhdGUgPSBTWVNURU1TVEFURV9SQVdfTU9ERQogICAgICAgICAgICAgICAgICAgICMgVVBEQVRFIE5FT1BJWEVMCiAgICAgICAgICAgICAgICAgICAgaGVscGVyLnNldF9uZW9waXhlbF9mdWxsKG5lb3BpeGVscmluZywgMTAwLCAwLCAxMDApCgoKICAgICAgICBlbGlmIHN5c3RlbV9zdGF0ZSA9PSBTWVNURU1TVEFURV9SQVdfTU9ERToKICAgICAgICAgICAgICAgIGd1aS5zaG93X21zZygiU1JWOnt9XG5QQlU6e31cblBCRDp7fVxuU1M6e31cblRSRTp7fVxuSUQ6e30iLmZvcm1hdChzY2FsZXMuc3RhYmxlX3Jhd192YWx1ZSh3aXRob3V0X29mZnNldD1UcnVlKSwgcHVzaF9idXR0b25fdXAudmFsdWUoKSwgcHVzaF9idXR0b25fZG93bi52YWx1ZSgpLCBzeXN0ZW1fc3RhdGUsIHRhcmVfdmFsdWUsIGhlbHBlci5nZXRfc3lzdGVtX2lkKCkpKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBidXR0b25fcHJlc3NlZCA9PSBVQl9VUDoKICAgICAgICAgICAgICAgICAgICBidXR0b25fcHJlc3NlZCA9IFVCX05PTkUKICAgICAgICAgICAgICAgICAgICB1c2VyX3BvcnRhbF91cmw6IHN0ciA9IHJlY2lwZS5jaGVja191cGRhdGVfdXJsKCkKICAgICAgICAgICAgICAgICAgICBpZiB1c2VyX3BvcnRhbF91cmwgIT0gIiI6CiAgICAgICAgICAgICAgICAgICAgICAgIGd1aS5zaG93X2RldmljZV9xcl9jb2RlKHVzZXJfcG9ydGFsX3VybCkKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxMCkKICAgICAgICAgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgIGVsaWYgc3lzdGVtX3N0YXRlID09IFNZU1RFTVNUQVRFX0NBTElCUkFUSU9OX01PREVfRU5UUlk6CiAgICAgICAgICAgICAgICBndWkuc2hvd19tc2coIlJFTU9WRSBFVkVSWVRISU5HIEZST00gU0NBTEUiKQogICAgICAgICAgICAgICAgaWYgIGJ1dHRvbl9wcmVzc2VkID09IFVCX1VQOgogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9wcmVzc2VkID0gVUJfTk9ORQogICAgICAgICAgICAgICAgICAgIGd1aS5zaG93X21zZygiUExFQVNFIFdBSVQiKQogICAgICAgICAgICAgICAgICAgIG1hcF92YWx1ZV8wZyA9IHNjYWxlcy5zdGFibGVfcmF3X3ZhbHVlKHdpdGhvdXRfb2Zmc2V0PVRydWUpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIm1hcF92YWx1ZV8wZzp7fSIuZm9ybWF0KG1hcF92YWx1ZV8wZykpCiAgICAgICAgICAgICAgICAgICAgc3lzdGVtX3N0YXRlID0gU1lTVEVNU1RBVEVfQ0FMSUJSQVRJT05fTU9ERV9GVUxMCgogICAgICAgIGVsaWYgc3lzdGVtX3N0YXRlID09IFNZU1RFTVNUQVRFX0NBTElCUkFUSU9OX01PREVfRlVMTDoKICAgICAgICAgICAgICAgIGd1aS5zaG93X21zZygiUExFQVNFIFBMQUNFIHt9ZyBXRUlHSFQiLmZvcm1hdChjb25maWcuQ0ZHX0NBTElCUkFUSU9OX1dFSUdIVF9XRUlHSFQpKQogICAgICAgICAgICAgICAgaWYgIGJ1dHRvbl9wcmVzc2VkID09IFVCX1VQOgogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl9wcmVzc2VkID0gVUJfTk9ORQogICAgICAgICAgICAgICAgICAgIGd1aS5zaG93X21zZygiUExFQVNFIFdBSVQiKQogICAgICAgICAgICAgICAgICAgIG1hcF92YWx1ZV81MGcgPSBzY2FsZXMuc3RhYmxlX3Jhd192YWx1ZSh3aXRob3V0X29mZnNldD1UcnVlKQogICAgICAgICAgICAgICAgICAgICMgRkxJUCBNSU4gTUFYIElGIExPQURDRUxMIElTIElOVkVSVEVECiAgICAgICAgICAgICAgICAgICAgaWYgbWFwX3ZhbHVlXzBnID4gbWFwX3ZhbHVlXzUwZzoKICAgICAgICAgICAgICAgICAgICAgICB0ID0gbWFwX3ZhbHVlXzBnCiAgICAgICAgICAgICAgICAgICAgICAgbWFwX3ZhbHVlXzBnID0gbWFwX3ZhbHVlXzUwZwogICAgICAgICAgICAgICAgICAgICAgIG1hcF92YWx1ZV81MGcgPSB0CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICByZWNpcGUuc2F2ZV9jYWxpYnJhdGlvbl92YWx1ZXMobWFwX3ZhbHVlXzBnLCBtYXBfdmFsdWVfNTBnKQogICAgICAgICAgICAgICAgICAgIHByaW50KCJDQUxJQlJBVElPTiBTQVZFRCBtYXBfdmFsdWVfMGc6e30gbWFwX3ZhbHVlXzUwZzp7fSIuZm9ybWF0KG1hcF92YWx1ZV8wZywgbWFwX3ZhbHVlXzUwZykpCiAgICAgICAgICAgICAgICAgICAgY2FsaWJyYXRpb25fZmFjdG9yID0gcmVjaXBlLmdldF9jYWxpYnJhdGlvbl9mYWN0b3IoKQogICAgICAgICAgICAgICAgICAgIHNjYWxlcy5zZXRfc2NhbGUoY2FsaWJyYXRpb25fZmFjdG9yKQogICAgICAgICAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RBVEVfSURMRQogICAgICAgICAgICAgICAgICAgIAoKCiAgICAgICAgZWxpZiBzeXN0ZW1fc3RhdGUgPT0gU1lTVEVNU1RBVEVfU0NBTEVfTU9ERToKICAgICAgICAgICAgIyBVUERBVEUgRElTUExBWSBXSVRIIFNDQUxFIFJFQURJTkcKICAgICAgICAgICAgcHJpbnQoInNjYWxlX3ZhbHVlX2c6e31nIi5mb3JtYXQoc2NhbGVfdmFsdWVfZykpCiAgICAgICAgICAgIGd1aS5zaG93X3NjYWxlKGludChzY2FsZV92YWx1ZV9nKSkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGJ1dHRvbl9wcmVzc2VkID09IFVCX1VQOgogICAgICAgICAgICAgICAgYnV0dG9uX3ByZXNzZWQgPSBVQl9OT05FCiAgICAgICAgICAgICAgICB0YXJlX3ZhbHVlID0gc2NhbGVzLmdldF91bml0KFRydWUpCiAgICAgICAgICAgIGVsaWYgYnV0dG9uX3ByZXNzZWQgPT0gVUJfRE9XTjoKICAgICAgICAgICAgICAgIGJ1dHRvbl9wcmVzc2VkID0gVUJfTk9ORQogICAgICAgICAgICAgICAgdGFyZ2V0X3ZhbHVlID0gMC4wCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZWxpZiBidXR0b25fcHJlc3NlZCA9PSBVQl9VUExPTkc6CiAgICAgICAgICAgICAgICBsYXN0X2J1dHRvbl9wcmVzc2VkID0gVUJfTk9ORQogICAgICAgICAgICAgICAgbGFzdF9zeXN0YXRlX3VwZGF0ZSA9IGhlbHBlci5taWxsaXMoKQogICAgICAgICAgICAgICAgc3lzdGVtX3N0YXRlID0gU1lTVEFURV9JRExFCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFVQREFURSBORU9QSVhFTCBSSU5HIEZST00gVEFSRVZBTFVFIFRPIE1BWCBNRUFTVVJFRCBWQUxVRQogICAgICAgICAgICB0YXJnZXRfdmFsdWUgPSBtYXgoW3NjYWxlX3ZhbHVlX2csIHRhcmdldF92YWx1ZSwgMTBdKQogICAgICAgICAgICBkaXNwX3ZhbHVlID0gbWluKFtoZWxwZXIuaW1hcChzY2FsZV92YWx1ZV9nLCB0YXJlX3ZhbHVlLCB0YXJnZXRfdmFsdWUsIDAgLCBjb25maWcuQ0ZHX05FT1BJWEVMX0xFRF9DT1VOVCksIGNvbmZpZy5DRkdfTkVPUElYRUxfTEVEX0NPVU5UXSkKICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoY29uZmlnLkNGR19ORU9QSVhFTF9MRURfQ09VTlQpOgogICAgICAgICAgICAgICAgY29sb3JfdmFsdWUgPSBoZWxwZXIuaW1hcChpLCAwLCBjb25maWcuQ0ZHX05FT1BJWEVMX0xFRF9DT1VOVCwgMCAsIDEuMCkKICAgICAgICAgICAgICAgICMgQVBQTFkgU1RBUlQgaW5kRVggT0ZGU0VUCiAgICAgICAgICAgICAgICBsZWRfaW5kZXggPSBpbnQoKGkrY29uZmlnLkNGR19ORU9QSVhFTF9MRURfU1RBUlRfT0ZGU0VUKSAlIGNvbmZpZy5DRkdfTkVPUElYRUxfTEVEX0NPVU5UKQoKICAgICAgICAgICAgICAgIGlmIHRhcmdldF92YWx1ZSA8IDA6CiAgICAgICAgICAgICAgICAgICAgbmVvcGl4ZWxyaW5nW2xlZF9pbmRleF0gPSAoMTAsIDAsIDEwKQogICAgICAgICAgICAgICAgZWxpZiBzY2FsZV92YWx1ZV9nID49IHRhcmdldF92YWx1ZToKICAgICAgICAgICAgICAgICAgICBuZW9waXhlbHJpbmdbbGVkX2luZGV4XSA9ICgyNTUsIDAsIDI1NSkKICAgICAgICAgICAgICAgIGVsaWYgaSA8IGRpc3BfdmFsdWU6CiAgICAgICAgICAgICAgICAgICAgIyAgICAgICBSICBHICBCCiAgICAgICAgICAgICAgICAgICAgbmVvcGl4ZWxyaW5nW2xlZF9pbmRleF0gPSAoaW50KGNvbG9yX3ZhbHVlKjI1NSksIDAsIGludCgoMS4wIC0gY29sb3JfdmFsdWUpICogMjU1KSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbmVvcGl4ZWxyaW5nW2xlZF9pbmRleF0gPSAoMTAsIDEwLCAxMCkKICAgICAgICAgICAgbmVvcGl4ZWxyaW5nLndyaXRlKCkKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICBlbGlmIHN5c3RlbV9zdGF0ZSA9PSBTWVNURU1TVEFURV9VUERBVEVfTU9ERV9RUl9TVEFSVDoKICAgICAgICAgICAgaWYgY29uZmlnLkNGR19ESVNQTEFZX1VTRVJfUVJfQ09ERToKICAgICAgICAgICAgICAgIHVzZXJfcG9ydGFsX3VybDogc3RyID0gcmVjaXBlLmNoZWNrX3VwZGF0ZV91cmwoKQogICAgICAgICAgICAgICAgaWYgdXNlcl9wb3J0YWxfdXJsICE9ICIiOgogICAgICAgICAgICAgICAgICAgIGd1aS5zaG93X2RldmljZV9xcl9jb2RlKHVzZXJfcG9ydGFsX3VybCkKICAgICAgICAgICAgICAgICAgICBzeXN0ZW1fc3RhdGUgPSBTWVNURU1TVEFURV9VUERBVEVfTU9ERV9RUl9SVU5OSU5HCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RFTVNUQVRFX1VQREFURV9NT0RFCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzeXN0ZW1fc3RhdGUgPSBTWVNURU1TVEFURV9VUERBVEVfTU9ERQogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgZWxpZiBzeXN0ZW1fc3RhdGUgPT0gU1lTVEVNU1RBVEVfVVBEQVRFX01PREVfUVJfUlVOTklORzoKICAgICAgICAgICAgZ3VpLnNob3dfbXNnKCJMT0FESU5HIFVQREFURSBNQU5BR0VSIikKICAgICAgICAgICAgaWYgYnV0dG9uX3ByZXNzZWQgPT0gVUJfRE9XTiBvciBidXR0b25fcHJlc3NlZCA9PSBVQl9VUDoKICAgICAgICAgICAgICAgIGJ1dHRvbl9wcmVzc2VkID0gVUJfTk9ORQogICAgICAgICAgICAgICAgc3lzdGVtX3N0YXRlID0gU1lTVEVNU1RBVEVfVVBEQVRFX01PREUKICAgICAgICAgICAgICAgIAogICAgICAgIGVsaWYgc3lzdGVtX3N0YXRlID09IFNZU1RFTVNUQVRFX1VQREFURV9NT0RFOgogICAgICAgICAgICBndWkuc2hvd19tc2coIlVQREFUSU5HIFJFQ0lQRVMiKQogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAgICAgcmVjaXBlLnVubG9hZF9yZWNpcGUoKQogICAgICAgICAgICBpZiByZWNpcGUudXBkYXRlX3JlY2lwZXMoZ3VpKToKICAgICAgICAgICAgICAgIGhlbHBlci5zZXRfbmVvcGl4ZWxfZnVsbChuZW9waXhlbHJpbmcsIDAsIDAsIDEwMCkKICAgICAgICAgICAgICAgIGd1aS5zaG93X21zZygiUkVDSVBFIFVQREFURSBTVUNDRVNTIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGhlbHBlci5zZXRfbmVvcGl4ZWxfZnVsbChuZW9waXhlbHJpbmcsIDEwMCwgMCwgMCkKICAgICAgICAgICAgICAgIGd1aS5zaG93X21zZygiUkVDSVBFIFVQREFURSBGQUlMRUQiKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgYnV0dG9uX3ByZXNzZWQgPT0gVUJfVVAgb3IgYnV0dG9uX3ByZXNzZWQgPT0gVUJfVVBMT05HIG9yIGJ1dHRvbl9wcmVzc2VkID09IFVCX0RPV046CiAgICAgICAgICAgICAgICBidXR0b25fcHJlc3NlZCA9IFVCX05PTkUKICAgICAgICAgICAgICAgIGxhc3Rfc3lzdGF0ZV91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RBVEVfSURMRQogICAgICAgICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICBlbGlmIHN5c3RlbV9zdGF0ZSA9PSBTWVNUQVRFX1JFQ0lQRV9TVEFSVDogIyBTVEFSVCBSRUNJUEUKICAgICAgICAgICAgaWYgIGFicyhsYXN0X3N5c3RhdGVfdXBkYXRlIC0gaGVscGVyLm1pbGxpcygpKSA+IDEwMDA6CiAgICAgICAgICAgICAgICBsYXN0X3N5c3RhdGVfdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgICAgICBsYXN0X3JlY2lwZV9pbmdfdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGhlbHBlci5zZXRfbmVvcGl4ZWxfZnVsbChuZW9waXhlbHJpbmcsIDEwMCwgMTAwLCAwKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIEVOVEVSIFNIT1cgSU5HUkVESUVOVFMgSUYgVEhFUkUgQVJFIFNPTUUgUFJFU0VOVCBFTFNFIFNLSVAgVEhJUyBTVEVQCiAgICAgICAgICAgICAgICBpbmdyZWRpZW50X2NvdW50ZXIgPSAtMQogICAgICAgICAgICAgICAgaWYgbGVuKHJlY2lwZS5nZXRfaW5ncmVkaWVudF9saXN0KCkpID4gMDoKICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50X2NvdW50ZXIgPSAwCiAgICAgICAgICAgICAgICAgICAgZ3VpLnNob3dfcmVjaXBlX2luZ3JlZGllbnRzKFtyZWNpcGUuZ2V0X2luZ3JlZGllbnRfbGlzdCgpW2luZ3JlZGllbnRfY291bnRlcl1dKQogICAgICAgICAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RBVEVfUkVDSVBFX1NIT1dfSU5HUkVESUVOVFMKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3lzdGVtX3N0YXRlID0gU1lTVEFURV9SRUNJUEVfUExBQ0VHTEFTUwogICAgICAgICAgICAgICAgCiAgICAgICAgZWxpZiBzeXN0ZW1fc3RhdGUgPT0gU1lTVEFURV9SRUNJUEVfU0hPV19JTkdSRURJRU5UUzoKICAgICAgICAgICAgaWYgYnV0dG9uX3ByZXNzZWQgPT0gVUJfRE9XTjoKICAgICAgICAgICAgICAgIGJ1dHRvbl9wcmVzc2VkID0gVUJfTk9ORQogICAgICAgICAgICAgICAgaW5ncmVkaWVudF9jb3VudGVyID0gaW5ncmVkaWVudF9jb3VudGVyICsgMQogICAgICAgICAgICAgICAgaWYgaW5ncmVkaWVudF9jb3VudGVyID49IGxlbihyZWNpcGUuZ2V0X2luZ3JlZGllbnRfbGlzdCgpKToKICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50X2NvdW50ZXIgPSAwCiAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgZ3VpLnNob3dfcmVjaXBlX2luZ3JlZGllbnRzKFtyZWNpcGUuZ2V0X2luZ3JlZGllbnRfbGlzdCgpW2luZ3JlZGllbnRfY291bnRlcl1dKQogICAgICAgICAgICAKCgogICAgICAgICAgICBpZiAgYWJzKGxhc3Rfc3lzdGF0ZV91cGRhdGUgLSBoZWxwZXIubWlsbGlzKCkpID4gMjAwMDAgb3IgYnV0dG9uX3ByZXNzZWQgPT0gVUJfVVA6CiAgICAgICAgICAgICAgICBidXR0b25fcHJlc3NlZCA9IFVCX05PTkUKICAgICAgICAgICAgICAgIHNjYWxlX3ZhbHVlX2JlZm9yZV9nbGFzc19hZGRlZCA9IHNjYWxlX3ZhbHVlX2cKICAgICAgICAgICAgICAgIGxhc3Rfc3lzdGF0ZV91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RBVEVfUkVDSVBFX1BMQUNFR0xBU1MKICAgICAgICAgICAgCiAgICAgICAgZWxpZiBzeXN0ZW1fc3RhdGUgPT0gU1lTVEFURV9SRUNJUEVfUExBQ0VHTEFTUzoKICAgICAgICAgICAgZ3VpLnNob3dfbXNnKCJQTEFDRSBHTEFTUyIpCiAgICAgICAgICAgICNwcmludChzY2FsZV92YWx1ZV9nKQogICAgICAgICAgICBpZiAgYWJzKGxhc3Rfc3lzdGF0ZV91cGRhdGUgLSBoZWxwZXIubWlsbGlzKCkpID4gMTAwMDAgb3Igc2NhbGVfdmFsdWVfZyA+IChzY2FsZV92YWx1ZV9iZWZvcmVfZ2xhc3NfYWRkZWQgKyBjb25maWcuQ0ZHX1NDQUxFX0dMQVNTX0FERElUSU9OX05FWFRfU1RFUF9XRUlHSFQpOgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBndWkuc2hvd19tc2coIkNBTElCUkFUSU5HIikKICAgICAgICAgICAgICAgIHRhcmVfdmFsdWUgPSBzY2FsZXMuZ2V0X3VuaXQoVHJ1ZSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc3lzdGVtX3N0YXRlID0gU1lTVEFURV9SRUNJUEVfUlVOTklORwogICAgICAgICAgICAgICAgbGFzdF9zeXN0YXRlX3VwZGF0ZSA9IGhlbHBlci5taWxsaXMoKQogICAgICAgICAgICAgICAgbGFzdF9yZWNpcGVfc3RlcF91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICAgICAKICAgICAgICBlbGlmIHN5c3RlbV9zdGF0ZSA9PSBTWVNUQVRFX1JFQ0lQRV9GSU5JU0hFRDoKICAgICAgICAgICAgaGVscGVyLnNldF9uZW9waXhlbF9yYW5kb20obmVvcGl4ZWxyaW5nLCBGYWxzZSwgVHJ1ZSwgRmFsc2UpCiAgICAgICAgICAgIGd1aS5zaG93X21zZygiRFJJTksgUkVBRFkgVE8gU0VSVkUiKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgYnV0dG9uX3ByZXNzZWQgPT0gVUJfVVAgb3IgYWJzKGxhc3Rfc3lzdGF0ZV91cGRhdGUgLSBoZWxwZXIubWlsbGlzKCkpID4gNzAwMDoKICAgICAgICAgICAgICAgIGxhc3Rfc3lzdGF0ZV91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RBVEVfSURMRQogICAgICAgICAgICAgICAgCiAgICAgICAgZWxpZiBzeXN0ZW1fc3RhdGUgPT0gU1lTVEFURV9SRUNJUEVfUlVOTklORzoKICAgICAgICAgICAgCiAgICAgICAgICAgICMgR0VUIFJFQ0lQRSBTVEVQCiAgICAgICAgICAgIHJzciA9IHJlY2lwZS5nZXRfY3VycmVudF9yZWNpcGVfc3RlcCgpICMgKGFjdGlvbiwgaW5ncmVkaWVudCwgY3VycmVudF9zdGVwLCBtYXhfc3RlcHMsIHRhcmdldF93ZWlnaHQsIGZpbmlzaGVkKQogICAgICAgICAgICB1c2VyX21vdmUgPSByc3JbMF0KICAgICAgICAgICAgYWN0aW9uICA9IHJzclsxXQogICAgICAgICAgICBpbmdyZWRpZW50ID0gcnNyWzJdCiAgICAgICAgICAgIGN1cnJlbnRfc3RlcCA9IHJzclszXQogICAgICAgICAgICBtYXhfc3RlcHMgPSByc3JbNF0KICAgICAgICAgICAgYW1vdW50ID0gcnNyWzVdCiAgICAgICAgICAgIGZpbmlzaGVkID0gcnNyWzZdCiAgICAgICAgICAgIHByaW50KHJzcikKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFVQREFURSBWQVJJQUJMRVMKICAgICAgICAgICAgaWYgdXNlcl9tb3ZlID09IHJlY2lwZV9sb2FkZXIuVVNFUl9JTlRFUkFDVElPTl9NT0RFLlNDQUxFOgogICAgICAgICAgICAgICAgdGFyZ2V0X3ZhbHVlID0gYW1vdW50CiAgICAgICAgICAgICAgICBkZWxheV92YWx1ZSA9IE5vbmUKICAgICAgICAgICAgZWxpZiB1c2VyX21vdmUgPT0gcmVjaXBlX2xvYWRlci5VU0VSX0lOVEVSQUNUSU9OX01PREUuV0FJVDoKICAgICAgICAgICAgICAgIGRlbGF5X3ZhbHVlID0gYW1vdW50CiAgICAgICAgICAgICAgICB0YXJnZXRfdmFsdWUgPSBOb25lCiAgICAgICAgICAgICAgICB0aW1lX2VsYXBzZWQgPSAoKGhlbHBlci5taWxsaXMoKSAtIGxhc3RfcmVjaXBlX3N0ZXBfdXBkYXRlKSkvMTAwMAogICAgICAgICAgICAgICAgcHJpbnQodGltZV9lbGFwc2VkKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGFyZ2V0X3ZhbHVlID0gTm9uZQogICAgICAgICAgICAgICAgZGVsYXlfdmFsdWUgPSBOb25lCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIyBDSEVDSyBPSyBBQ1RJT04gT0sKICAgICAgICAgICAgaWYgZmluaXNoZWQ6CiAgICAgICAgICAgICAgICBsYXN0X3N5c3RhdGVfdXBkYXRlID0gaGVscGVyLm1pbGxpcygpCiAgICAgICAgICAgICAgICAjIEdPVE8gTUFJTiBNRU5VIElGIEdMQVNTIElTIFJFTU9WRUQKICAgICAgICAgICAgICAgIGlmIHNjYWxlX3ZhbHVlX2cgPCBzY2FsZV92YWx1ZV9iZWZvcmVfZ2xhc3NfYWRkZWQ6CiAgICAgICAgICAgICAgICAgICAgZ3VpLnNob3dfbXNnKCJSRU1PVkUgR0xBU1MiKQogICAgICAgICAgICAgICAgICAgIHN5c3RlbV9zdGF0ZSA9IFNZU1RBVEVfUkVDSVBFX0ZJTklTSEVECiAgICAgICAgICAgICAgICAgICAgIyBSRVNUT1JFIElOSVRJQUwgVEFSRSBWQUxVRQogICAgICAgICAgICAgICAgICAgIHRhcmVfdmFsdWUgPSB0YXJlX3ZhbHVlX2luaXRpYWwKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbGlmIHVzZXJfbW92ZSA9PSByZWNpcGVfbG9hZGVyLlVTRVJfSU5URVJBQ1RJT05fTU9ERS5TQ0FMRSBhbmQgc2NhbGVfdmFsdWVfZyA+IHRhcmdldF92YWx1ZToKICAgICAgICAgICAgICAgIGxvYWRfbmV4dF9zdGVwID0gVHJ1ZQogICAgICAgICAgICBlbGlmIHVzZXJfbW92ZSA9PSByZWNpcGVfbG9hZGVyLlVTRVJfSU5URVJBQ1RJT05fTU9ERS5XQUlUIGFuZCB0aW1lX2VsYXBzZWQgPiBkZWxheV92YWx1ZToKICAgICAgICAgICAgICAgIGxvYWRfbmV4dF9zdGVwID0gVHJ1ZQogICAgICAgICAgICBlbGlmIHVzZXJfbW92ZSA9PSByZWNpcGVfbG9hZGVyLlVTRVJfSU5URVJBQ1RJT05fTU9ERS5DT05GSVJNIGFuZCAoYnV0dG9uX3ByZXNzZWQgPT0gVUJfVVAgb3IgYnV0dG9uX3ByZXNzZWQgPT0gVUJfRE9XTik6CiAgICAgICAgICAgICAgICBidXR0b25fcHJlc3NlZCA9PSBVQl9OT05FCiAgICAgICAgICAgICAgICBsb2FkX25leHRfc3RlcCA9IFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxvYWRfbmV4dF9zdGVwID0gRmFsc2UKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGxvYWRfbmV4dF9zdGVwOgogICAgICAgICAgICAgICAgbG9hZF9uZXh0X3N0ZXAgPSBGYWxzZQogICAgICAgICAgICAgICAgcmVjaXBlLnN3aXRjaF9uZXh0X3N0ZXAoKQogICAgICAgICAgICAgICAgZ3VpLnNldF9mdWxsX3JlZnJlc2goKQogICAgICAgICAgICAgICAgbGFzdF9yZWNpcGVfc3RlcF91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICAgICAgICAgICAgICMgSVMgVEhFIE5FVyBTVEVQIFRIRSBGSU5JU0ggU1RFUCA9PiBTS0lQIFRBUkUgUFJPQ0VTUwogICAgICAgICAgICAgICAgaWYgbm90IHJlY2lwZS5nZXRfY3VycmVudF9yZWNpcGVfc3RlcCgpWzZdOgogICAgICAgICAgICAgICAgICAgIGd1aS5zaG93X21zZygiQ0FMSUJSQVRJTkciKQogICAgICAgICAgICAgICAgICAgIHRhcmVfdmFsdWUgPSBzY2FsZXMuZ2V0X3VuaXQoVHJ1ZSkKICAgICAgICAgICAgICAgICAgICBzY2FsZV92YWx1ZV9iZWZvcmVfZ2xhc3NfYWRkZWQgPSB0YXJlX3ZhbHVlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAjIFVQREFURSBVSQogICAgICAgICAgICBpZiAgYWJzKGxhc3RfZGlzcGxheV91cGRhdGUgLSBoZWxwZXIubWlsbGlzKCkpID4gMTAwMDoKICAgICAgICAgICAgICAgIGxhc3RfZGlzcGxheV91cGRhdGUgPSBoZWxwZXIubWlsbGlzKCkKICAgICAgICAgICAgICAgIGd1aS5zaG93X3JlY2lwZV9zdGVwKGFjdGlvbiwgaW5ncmVkaWVudCwgY3VycmVudF9zdGVwLCBtYXhfc3RlcHMpCiAgICAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgIyBVUERBVEUgTkVPUElYRUwgIAogICAgICAgICAgICBpZiB1c2VyX21vdmUgPT0gcmVjaXBlX2xvYWRlci5VU0VSX0lOVEVSQUNUSU9OX01PREUuU0NBTEUgYW5kIHNjYWxlX3ZhbHVlX2cgaXMgbm90IE5vbmUgYW5kIHRhcmdldF92YWx1ZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGRpc3BfdmFsdWUgPSBtaW4oW2hlbHBlci5pbWFwKHNjYWxlX3ZhbHVlX2csIDAsIHRhcmdldF92YWx1ZSwgMCAsIGNvbmZpZy5DRkdfTkVPUElYRUxfTEVEX0NPVU5UKSwgY29uZmlnLkNGR19ORU9QSVhFTF9MRURfQ09VTlRdKQogICAgICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UoY29uZmlnLkNGR19ORU9QSVhFTF9MRURfQ09VTlQpOgogICAgICAgICAgICAgICAgICAgIGNvbG9yX3ZhbHVlID0gaGVscGVyLmltYXAoaSwgMCwgY29uZmlnLkNGR19ORU9QSVhFTF9MRURfQ09VTlQsIDAgLCAxLjApCiAgICAgICAgICAgICAgICAgICAgIyBBUFBMWSBTVEFSVCBpbmRFWCBPRkZTRVQKICAgICAgICAgICAgICAgICAgICBsZWRfaW5kZXggPSBpbnQoKGkrY29uZmlnLkNGR19ORU9QSVhFTF9MRURfU1RBUlRfT0ZGU0VUKSAlIGNvbmZpZy5DRkdfTkVPUElYRUxfTEVEX0NPVU5UKQoKICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXRfdmFsdWUgPCAwOgogICAgICAgICAgICAgICAgICAgICAgICBuZW9waXhlbHJpbmdbbGVkX2luZGV4XSA9ICgwLCAwLCAxMjgpCiAgICAgICAgICAgICAgICAgICAgZWxpZiBzY2FsZV92YWx1ZV9nID49IHRhcmdldF92YWx1ZToKICAgICAgICAgICAgICAgICAgICAgICAgbmVvcGl4ZWxyaW5nW2xlZF9pbmRleF0gPSAoMCwgMjU1LCAwKQogICAgICAgICAgICAgICAgICAgIGVsaWYgaSA8IGRpc3BfdmFsdWU6CiAgICAgICAgICAgICAgICAgICAgICAgICMgICAgICAgUiAgRyAgQgogICAgICAgICAgICAgICAgICAgICAgICBuZW9waXhlbHJpbmdbbGVkX2luZGV4XSA9IChpbnQoKDEuMCAtIGNvbG9yX3ZhbHVlKSAqIDI1NSksIGludChjb2xvcl92YWx1ZSoyNTUpLCAwKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIG5lb3BpeGVscmluZ1tsZWRfaW5kZXhdID0gKDEwLCAwLCAwKQogICAgICAgICAgICAgICAgbmVvcGl4ZWxyaW5nLndyaXRlKCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBlbGlmIHVzZXJfbW92ZSA9PSByZWNpcGVfbG9hZGVyLlVTRVJfSU5URVJBQ1RJT05fTU9ERS5DT05GSVJNOgogICAgICAgICAgICAgICAgaGVscGVyLnNldF9uZW9waXhlbF9mdWxsKG5lb3BpeGVscmluZywgMTAwLCAxMDAsIDApCiAgICAgICAgICAgIAogICAgICAgICAgICBlbGlmIHVzZXJfbW92ZSA9PSByZWNpcGVfbG9hZGVyLlVTRVJfSU5URVJBQ1RJT05fTU9ERS5XQUlUIGFuZCBkZWxheV92YWx1ZSBpcyBub3QgTm9uZSBhbmQgdGltZV9lbGFwc2VkIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgbGlnaHR1cCA9IG1pbihbaGVscGVyLmltYXAodGltZV9lbGFwc2VkLCAwLCBkZWxheV92YWx1ZSwgMCAsIGNvbmZpZy5DRkdfTkVPUElYRUxfTEVEX0NPVU5UKSwgY29uZmlnLkNGR19ORU9QSVhFTF9MRURfQ09VTlRdKQogICAgICAgICAgICAgICAgI3ByaW50KCJsaWdodHVwIHt9IHt9IHt9Ii5mb3JtYXQobGlnaHR1cCwgdGltZV9lbGFwc2VkLCBkZWxheV92YWx1ZSkKICAgICAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGNvbmZpZy5DRkdfTkVPUElYRUxfTEVEX0NPVU5UKToKICAgICAgICAgICAgICAgICAgICBsZWRfaW5kZXggPSBpbnQoKGkrY29uZmlnLkNGR19ORU9QSVhFTF9MRURfU1RBUlRfT0ZGU0VUKSAlIGNvbmZpZy5DRkdfTkVPUElYRUxfTEVEX0NPVU5UKQogICAgICAgICAgICAgICAgICAgIGlmIGkgPCBsaWdodHVwOgogICAgICAgICAgICAgICAgICAgICAgICBuZW9waXhlbHJpbmdbbGVkX2luZGV4XSA9ICgxMCwgMTAsIDEwKQogICAgICAgICAgICAgICAgICAgIGVsaWYgaSA9PSBsaWdodHVwOgogICAgICAgICAgICAgICAgICAgICAgICBuZW9waXhlbHJpbmdbbGVkX2luZGV4XSA9ICgxMDAsIDEwMCwgMTAwKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIG5lb3BpeGVscmluZ1tsZWRfaW5kZXhdID0gKDEwLCAxMCwgMTApCiAgICAgICAgICAgICAgICBuZW9waXhlbHJpbmcud3JpdGUoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBoZWxwZXIuc2V0X25lb3BpeGVsX3JhbmRvbShuZW9waXhlbHJpbmcsIFRydWUsIEZhbHNlLCBGYWxzZSkKICAgICAgICAgICAgCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaGVscGVyLnNldF9uZW9waXhlbF9mdWxsKG5lb3BpeGVscmluZywgMCwgMCwgMTAwKQoKCg==", "recipe_loader.py": "aW1wb3J0IG1hY2hpbmUNCmltcG9ydCBvcw0KaW1wb3J0IHRpbWUNCmltcG9ydCBqc29uDQoNCmZyb20gdWkgaW1wb3J0IHVpDQppbXBvcnQgY29uZmlnDQppbXBvcnQgaGVscGVyDQppbXBvcnQgZXhhbXBsZV9yZWNpcGVzDQppbXBvcnQgc2V0dGluZ3MNCg0KDQpjbGFzcyBVU0VSX0lOVEVSQUNUSU9OX01PREU6DQogICAgU0NBTEUgPSAwDQogICAgQ09ORklSTSA9IDENCiAgICBXQUlUID0gMg0KDQoNCg0KY2xhc3MgcmVjaXBlX2xvYWRlcjoNCiAgICANCiAgDQogICAgbG9hZGVkX3JlY2lwZSA9IE5vbmUNCiAgICBjdXJyZW50X3JlY2lwZV9zdGVwID0gTm9uZQ0KICAgDQoNCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIHByaW50KCJyZWNpcGVfbG9hZGVyOiBfX2luaXRfXyIpDQoNCiAgICAgICAgc2VsZi51bmxvYWRfcmVjaXBlKCkNCiAgICAgICAgc2VsZi5jcmVhdGVfaW5pdGlhbF9yZWNpcGUoKQ0KICAgICAgICANCiAgICBkZWYgZ2V0X3JlY2lwZV9pbmZvcm1hdGlvbihzZWxmKSAtPiAoc3RyLCBzdHIpOg0KICAgICAgICBpZiBzZWxmLmxvYWRlZF9yZWNpcGUgaXMgTm9uZToNCiAgICAgICAgICAgIHJldHVybiAoImludmFsaWQiLCAiLS0tIikNCiAgICAgICAgDQogICAgICAgIHJldHVybiAoc2VsZi5sb2FkZWRfcmVjaXBlWyduYW1lJ10sIHNlbGYubG9hZGVkX3JlY2lwZVsnZGVzY3JpcHRpb24nXSkNCiAgICANCiAgICBkZWYgc3dpdGNoX25leHRfc3RlcChzZWxmKToNCiAgICAgICAgaWYgc2VsZi5sb2FkZWRfcmVjaXBlIGlzIE5vbmU6DQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgaWYgc2VsZi5jdXJyZW50X3JlY2lwZV9zdGVwIGlzIE5vbmU6DQogICAgICAgICAgICBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAgPSAwDQogICAgICAgIHN0ZXBzID0gc2VsZi5sb2FkZWRfcmVjaXBlWydzdGVwcyddDQogICAgICAgIG5fc3RlcHMgPSBsZW4oc3RlcHMpDQogICAgICAgIGlmIHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcCA8IG5fc3RlcHM6DQogICAgICAgICAgICBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAgPSBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAgKyAxDQogICAgICAgICAgICAgICAgICANCiAgICBkZWYgc3dpdGNoX3ByZXZfc3RlcChzZWxmKToNCiAgICAgICAgcGFzcw0KICAgIA0KICAgIGRlZiBpc19yZWNpcGVfbG9hZGVkKHNlbGYpOg0KICAgICAgICBpZiBzZWxmLmxvYWRlZF9yZWNpcGUgaXMgbm90IE5vbmU6DQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgDQogICAgZGVmIGdldF9jdXJyZW50X3JlY2lwZV9zdGVwKHNlbGYpIC0+IChVU0VSX0lOVEVSQUNUSU9OX01PREUsIHN0ciwgc3RyLCBpbnQsIGludCwgaW50LCBib29sKTogIyAoYWN0aW9uLCBpbmdyZWRpZW50LCBjdXJyZW50X3N0ZXAsIG1heF9zdGVwcywgdGFyZ2V0X3dlaWdodCwgZmluaXNoZWQpDQogICAgICAgIGlmIHNlbGYubG9hZGVkX3JlY2lwZSBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIChOb25lLCBOb25lLCBOb25lLCBOb25lLCBOb25lLCBOb25lLCBUcnVlKQ0KICAgICAgICBzdGVwcyA9IHNlbGYubG9hZGVkX3JlY2lwZVsnc3RlcHMnXQ0KICAgICAgICBuX3N0ZXBzID0gbGVuKHN0ZXBzKQ0KICAgICAgICBpZiBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXAgaXMgTm9uZToNCiAgICAgICAgICAgIHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcCA9IDANCiAgICAgICAgDQogICAgICAgIGlmIHNlbGYuY3VycmVudF9yZWNpcGVfc3RlcCA+PSBuX3N0ZXBzOg0KICAgICAgICAgICAgIHJldHVybiAoTm9uZSwgTm9uZSwgTm9uZSwgTm9uZSwgTm9uZSwgTm9uZSwgVHJ1ZSkNCiAgICAgICAgICAgIA0KICAgICAgICBzdGVwID0gc3RlcHNbc2VsZi5jdXJyZW50X3JlY2lwZV9zdGVwXQ0KICAgICAgICBpZiBzdGVwWydhY3Rpb24nXSA9PSAnc2NhbGUnOg0KICAgICAgICAgICAgaW5ncmVkaWVudF9uYW1lID0gc2VsZi5sb2FkZWRfcmVjaXBlWydpbmdyZWRpZW50cyddW3N0ZXBbJ2luZ3JlZGllbnQnXV0NCiAgICAgICAgICAgIHJldHVybiAoVVNFUl9JTlRFUkFDVElPTl9NT0RFLlNDQUxFLCBzdGVwWydhY3Rpb24nXSwgaW5ncmVkaWVudF9uYW1lLCBzZWxmLmN1cnJlbnRfcmVjaXBlX3N0ZXArMSwgbl9zdGVwcywgc3RlcFsnYW1vdW50J10sIEZhbHNlKQ0KICAgICAgICBlbGlmIHN0ZXBbJ2FjdGlvbiddID09ICdjb25maXJtJzogICAgIA0KICAgICAgICAgICAgcmV0dXJuIChVU0VSX0lOVEVSQUNUSU9OX01PREUuQ09ORklSTSwgc3RlcFsnYWN0aW9uJ10sIHN0ZXBbJ3RleHQnXSwgc2VsZi5jdXJyZW50X3JlY2lwZV9zdGVwKzEsIG5fc3RlcHMsIDAsIEZhbHNlKQ0KICAgICAgICBlbGlmIHN0ZXBbJ2FjdGlvbiddID09ICd3YWl0JzogICAgIA0KICAgICAgICAgICAgcmV0dXJuIChVU0VSX0lOVEVSQUNUSU9OX01PREUuV0FJVCwgc3RlcFsnYWN0aW9uJ10sIHN0ZXBbJ3RleHQnXSwgc2VsZi5jdXJyZW50X3JlY2lwZV9zdGVwKzEsIG5fc3RlcHMsIHN0ZXBbJ2Ftb3VudCddLCBGYWxzZSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiAoTm9uZSwgTm9uZSwgTm9uZSwgTm9uZSwgTm9uZSwgTm9uZSwgVHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgDQogICAgZGVmIHVubG9hZF9yZWNpcGUoc2VsZik6DQogICAgICAgIHNlbGYubG9hZGVkX3JlY2lwZSA9IE5vbmUNCiAgICAgICAgDQogICAgZGVmIGdldF9pbmdyZWRpZW50X2xpc3Qoc2VsZikgLT4gW3N0cl06DQogICAgICAgIGlmIHNlbGYubG9hZGVkX3JlY2lwZSBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIFtdDQogICAgICAgIHJ0ID0gW10NCiAgICAgICAgaW5nID0gc2VsZi5sb2FkZWRfcmVjaXBlWydpbmdyZWRpZW50cyddDQogICAgICAgIGlmIGluZyBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIFtdDQogICAgICAgIGZvciBrIGluIGluZzoNCiAgICAgICAgICAgIHJ0LmFwcGVuZChpbmdba10pDQogICAgICAgIHJldHVybiBydA0KICAgIA0KICAgIGRlZiBnZXRfaW5ncmVkaWVudF9zdHIoc2VsZikgLT4gc3RyOg0KICAgICAgICBydCA9ICIiDQogICAgICAgIGZvciBpdGVtIGluIHNlbGYuZ2V0X2luZ3JlZGllbnRfbGlzdCgpOg0KICAgICAgICAgICAgcnQgPSBydCArIGl0ZW0gKyAiXG4iDQogICAgICAgIHJldHVybiBydA0KICAgICAgICANCg0KDQogICAgZGVmIGNyZWF0ZV9pbml0aWFsX3JlY2lwZShzZWxmKToNCiAgICAgICAgZm9yIGsgaW4gZXhhbXBsZV9yZWNpcGVzLkVYQU1QTEVfUkVDSVBFU19DT0xMRUNUSU9OOg0KICAgICAgICAgICAgc2V0dGluZ3Muc2V0dGluZ3MoKS53cml0ZV9qc29uX2ZpbGUoayArICIucmVjaXBlIiwgZXhhbXBsZV9yZWNpcGVzLkVYQU1QTEVfUkVDSVBFU19DT0xMRUNUSU9OW2tdKQ0KICAgICAgICAgICAgDQoNCiAgICBkZWYgbGlzdF9yZWNwaWVzKHNlbGYpIC0+IChzdHIsIHN0cik6DQogICAgICAgIHJlcyA9IFtdDQogICAgICAgIGZvciBmIGluIHNldHRpbmdzLnNldHRpbmdzKCkubGlzdF9maWxlcygpOg0KICAgICAgICAgICAgaWYgZi5lbmRzd2l0aCgnLnJlY2lwZScpOg0KICAgICAgICAgICAgICAgICMgZiA9IHRlcXVpbGFfc3VucmlzZS5yZWNpcGUNCiAgICAgICAgICAgICAgICBuYW1lID0gZi5yZXBsYWNlKCcucmVjaXBlJywgJycpLnJlcGxhY2UoJ18nLCAnICcpDQogICAgICAgICAgICAgICAgcmVzLmFwcGVuZCgoZixuYW1lKSkNCiAgICAgICAgcmV0dXJuIHJlcw0KICAgIA0KICAgIGRlZiBsb2FkX3JlY2lwZShzZWxmLCBfZmlsZW5hbWU6IHN0cikgLT4gYm9vbDoNCiAgICAgICAgIA0KICAgICAgICBpZiAnLnJlY2lwZScgbm90IGluIF9maWxlbmFtZToNCiAgICAgICAgICAgIF9maWxlbmFtZSA9IF9maWxlbmFtZSArICIucmVjaXBlIg0KICAgICAgICAgICAgDQogICAgICAgIGlmIF9maWxlbmFtZSBub3QgaW4gc2V0dGluZ3Muc2V0dGluZ3MoKS5saXN0X2ZpbGVzKCk6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgDQogICAgICAgIGpzb25fcmVjaXBlID0gc2V0dGluZ3Muc2V0dGluZ3MoKS5sb2FkX2pzb25fZmlsZShfZmlsZW5hbWUpDQogICAgICAgIA0KICAgICAgICBpZiBqc29uX3JlY2lwZToNCiAgICAgICAgICAgIHNlbGYubG9hZGVkX3JlY2lwZSA9IGpzb25fcmVjaXBlDQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KDQogICAgDQogICAgDQogICAgDQo=", "mmb_display.py": "aW1wb3J0IGNvbmZpZwppbXBvcnQgbWFjaGluZQoKCmNsYXNzIG1tYl9kaXNwbGF5KCk6CgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGRpc3BsYXlfaW5zdGFuY2VfY3JlYXRvcigpOgogICAgICAgICAgICAgICAgICAgCiAgICAgICAgaWYgY29uZmlnLkNGR19ESVNQTEFZX1RZUEUgPT0gInNoMTEwNiI6CiAgICAgICAgICAgIGltcG9ydCBzaDExMDYKICAgICAgICAgICAgaTJjID0gbWFjaGluZS5JMkMoY29uZmlnLkNGR19PTEVEX0kyQ0lOU1RBTkNFLCBzY2w9bWFjaGluZS5QaW4oY29uZmlnLkNGR19PTEVEX1NDTF9QSU4pLCBzZGE9bWFjaGluZS5QaW4oY29uZmlnLkNGR19PTEVEX1NEQV9QSU4pLCBmcmVxPTQwMDAwMCkKICAgICAgICAgICAgZGlzcCA9IHNoMTEwNi5TSDExMDZfSTJDKGNvbmZpZy5TQ1JfV0lEVEgsIGNvbmZpZy5TQ1JfSEVJR0hULCBpMmMsIE5vbmUsIGNvbmZpZy5DRkdfT0xFRF9BRERSKQogICAgICAgICAgICBkaXNwLnNsZWVwKEZhbHNlKQogICAgICAgICAgICByZXR1cm4gZGlzcAoKICAgICAgICBlbGlmIGNvbmZpZy5DRkdfRElTUExBWV9UWVBFID09ICJzc2QxMzA2IjoKICAgICAgICAgICAgaW1wb3J0IHNzZDEzMDYKICAgICAgICAgICAgaTJjID0gbWFjaGluZS5JMkMoY29uZmlnLkNGR19PTEVEX0kyQ0lOU1RBTkNFLCBzY2w9bWFjaGluZS5QaW4oY29uZmlnLkNGR19PTEVEX1NDTF9QSU4pLCBzZGE9bWFjaGluZS5QaW4oY29uZmlnLkNGR19PTEVEX1NEQV9QSU4pLCBmcmVxPTQwMDAwMCkKICAgICAgICAgICAgZGlzcCA9IHNzZDEzMDYuU1NEMTMwNl9JMkMoY29uZmlnLlNDUl9XSURUSCwgY29uZmlnLlNDUl9IRUlHSFQsIGkyYywgY29uZmlnLkNGR19PTEVEX0FERFIpCiAgICAgICAgICAgIHJldHVybiBkaXNwCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAKCiAgICAKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHBhc3MKCiAgICBkZWYgcGl4ZWwoc2VsZiwgeCwgeSwgdmFsdWUpOgogICAgICAgIHBhc3MKIAogICAgZGVmIHNob3coKToKICAgICAgICBwYXNzCiAgICAgIAogICAgZGVmIGZpbGxfcmVjdChzZWxmLCB4LCB5LCB3LCBoLCB2KToKICAgICAgICBwYXNzCiAgICAKICAgIGRlZiBwcmludChzZWxmLCBfc3RyKToKICAgICAgICBwYXNzCgogICAgZGVmIHdyaXRlKHNlbGYsIF9zdHIpOgogICAgICAgIHBhc3MKICAgIAogICAgZGVmIGVyYXNlKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgdGV4dChzZWxmLCB0ZXh0LCB4LCB5LCBjb2xvcj0xKToKICAgICAgICBwYXNz", "config.py": "IyBIQVJEV0FSRSBDT05GSUcgU1RBUlRTIEhFUkUKIyBzc2QxMzA2ID0gMTI4eDY0IG9sZGVkIHdpdGggc3NkMTMwNiBjb250cm9sbGVyCiMgc2gxMTA2ID0gMTI4eDY0IG9sZGVkIHdpdGggc3NoMTEwNiBjb250cm9sbGVyCkNGR19ESVNQTEFZX1RZUEUgPSAic2gxMTA2IiAjIHNoMTEwNiBzc2QxMzA2CkNGR19DQUxJQlJBVElPTl9XRUlHSFRfV0VJR0hUID0gNTAKQ0ZHX1NDQUxFX0dMQVNTX0FERElUSU9OX05FWFRfU1RFUF9XRUlHSFQgPSA1MCAjIFhnIG1vcmUgb24gc2NhbGUgdG8gdHJpZ2dlciBuZXh0IHN0ZXAgaW4gcmVjaXBlID0+IDEvMyB3ZWlnaHQgb2YgYSB0eXBpY2FsIGdsYXNzCkNGR19VU0VSX0xPTkdfQlVUVE9OX1BSRVNTX1RJTUUgPSAxMDAwICMgdGltZSB0byByZWdzaXRlciBhIGxvbmcgYnV0dG9uIHByZXNzIGluIG1zCkNGR19ESVNQTEFZX1VTRVJfUVJfQ09ERSA9IFRydWUgIyBUcnVlIEZhbHNlCkNGR19ORU9QSVhFTF9MRURfQ09VTlQgPSAyNiAjNjAKQ0ZHX05FT1BJWEVMX0xFRF9TVEFSVF9PRkZTRVQgPSAoQ0ZHX05FT1BJWEVMX0xFRF9DT1VOVC8yKSAjIE1BWCBDRkdfTkVPUElYRUxfTEVEX0NPVU5UIFRPIFJPVEFURSBUSEUgU1RBUlRQT0lOVAoKCiMgREVGQVVMVCBXSUZJIFNFVFRJTkdTCiMgQ0FOIExBVEVSIEJFIENBTkdFRCBJTiBUSEUgU0RDQVJEL1NFVFRJTkdTLkpTT04gRklMRQpDRkdfTkVUV09SS19IT1NUTkFNRSA9ICJtaXhhbmRtZWFzdXJlYmVycnkiICMgeFh4WC5sb2NhbApDRkdfTkVUV09SS19XSUZJQ09VTlRSWSA9ICJERSIgIyBERSBVUwpDRkdfTkVUV09SS19XSUZJX1NTSUQgPSAiTWFrZXJzcGFjZSIKQ0ZHX05FVFdPUktfV0lGSV9QU0sgPSAiTVM4Y0N2cEUiCkNGR19ORVRXT1JLX0FQSV9FTkRQT0lOVCA9ICJtaXhtZWFzdXJlYnVkZHkuY29tL2FwaS9tbWIiCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIFBJTiBDT05GSUcgIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIE5FT1BJWEVMIFJJTkcKQ0ZHX05FT1BJWEVMX1BJTiA9IDI4CiMgQlVUVE9OUwpDRkdfQlVUVE9OX0xFRlRfUElOID0gMTIKQ0ZHX0JVVFRPTl9SSUdIVF9QSU4gPSAxMwojIEhYNzExIE1PRFVMRQpDRkdfSFg3MTFfRE9VVF9QSU4gPSA1CkNGR19IWDcxMV9TQ0tfUElOID0gMTIKIyBbT1BUSU9OQUxdIFNEIENBUkQKQ0ZHX1NEQ0FSRF9TUElJTlNUQU5DRSA9IDEKQ0ZHX1NEQ0FSRF9TQ0tfUElOID0gMTAKQ0ZHX1NEQ0FSRF9NT1NJX1BJTiA9IDExCkNGR19TRENBUkRfTUlTT19QSU4gPSA4CkNGR19TRENBUkRfQ1NfUElOID0gOQojIFtPUFRJT05BTF0gU1NEMTMwNiBvciBTSDExMDYKQ0ZHX09MRURfSTJDSU5TVEFOQ0UgPSAwCkNGR19PTEVEX1NDTF9QSU4gPSAyMQpDRkdfT0xFRF9TREFfUElOID0gMjAKQ0ZHX09MRURfQUREUiA9IDB4M2MKQ0ZHX0RJU1BMQVlfTElORV9TUEFDSU5HID0gOSAjIHBpeGVsIGZvbnQgd2lkdGgKQ0ZHX0RJU1BMQVlfQ0hBUl9XSURUSCA9IDgKClNDUl9XSURUSCA9IDEyOApTQ1JfSEVJR0hUID0gNjQKCgogICAgCg==", "ui.py": "aW1wb3J0IGNvbmZpZw0KaW1wb3J0IG1tYl9kaXNwbGF5DQppbXBvcnQgdVFSDQppbXBvcnQgaGVscGVyDQpjbGFzcyB1aToNCiAgICANCiAgICBfaW5zdGFuY2UgPSBOb25lDQoNCiAgICBAY2xhc3NtZXRob2QNCiAgICBkZWYgX19uZXdfXyhjbHMpOg0KICAgICAgICBpZiBjbHMuX2luc3RhbmNlIGlzIE5vbmU6DQogICAgICAgICAgICBwcmludCgnQ3JlYXRpbmcgdGhlIHVpIG9iamVjdCcpDQogICAgICAgICAgICBjbHMuX2luc3RhbmNlID0gc3VwZXIodWksIGNscykuX19uZXdfXyhjbHMpDQogICAgICAgICAgICAjIFB1dCBhbnkgaW5pdGlhbGl6YXRpb24gaGVyZS4NCiAgICAgICAgcmV0dXJuIGNscy5faW5zdGFuY2UNCiAgICANCg0KICAgIGRpc3BsYXk6IG1tYl9kaXNwbGF5DQoNCg0KDQogICAgZGVmIHBpeGVsKHNlbGYsIHgsIHksIHZhbHVlKToNCiAgICAgICAgc2VsZi5kaXNwbGF5LnBpeGVsKHgsIHksIHZhbHVlKQ0KICAgICAgICANCiAgICBkZWYgc2hvdyhzZWxmKToNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5zaG93KCkNCiAgICAgICAgDQogICAgZGVmIGRpc3BsYXlfcmVjdChzZWxmLCBfcG9zX3hfcGVyY2VudGFnZTppbnQsIF9wb3NfeV9wZXJjZW50YWdlOmludCwgX3Bvc194X2VuZF9wZXJjOmludCwgX3Bvc195X2VuZF9wZXJjKToNCiAgICAgICAgeDogaW50ID0gaW50KChjb25maWcuU0NSX1dJRFRIIC8gMTAwLjApICogX3Bvc194X3BlcmNlbnRhZ2UpDQogICAgICAgIHk6IGludCA9IGludCgoY29uZmlnLlNDUl9IRUlHSFQgLyAxMDAuMCkgKiBfcG9zX3lfcGVyY2VudGFnZSkNCiAgICAgICAgDQogICAgICAgIHhlOiBpbnQgPSBpbnQoKGNvbmZpZy5TQ1JfV0lEVEggLyAxMDAuMCkgKiBfcG9zX3hfZW5kX3BlcmMpDQogICAgICAgIHllOiBpbnQgPSBpbnQoKGNvbmZpZy5TQ1JfSEVJR0hUIC8gMTAwLjApICogX3Bvc195X2VuZF9wZXJjKQ0KICAgICAgICANCg0KICAgICAgICBzZWxmLmRpc3BsYXkuZmlsbF9yZWN0KHgsIHksIGFicyh4LXhlKSwgYWJzKHkteWUpLCAwKSAjIDAgPSBCRyBDT0xPUg0KICAgICAgICBzZWxmLmRpc3BsYXkuc2hvdygpDQogICAgICAgIA0KICAgICAgICANCiAgICBkZWYgZGlzcGxheV90ZXh0KHNlbGYsIF9zdHI6c3RyLCBfd3JhcDpib29sID0gRmFsc2UsIF9wb3NfeF9wZXJjZW50YWdlOmludCA9IDAsIF9wb3NfeV9wZXJjZW50YWdlOmludCA9IDApOg0KICAgICAgICBfc3RyID0gX3N0ci5yZXBsYWNlKCLDnyIsICJzcyIpLnJlcGxhY2UoIsO2IiwgIm9lIikucmVwbGFjZSgiw6QiLCAiYWUiKS5yZXBsYWNlKCLDvCIsICJ1ZSIpDQoNCiAgICAgICAgeDogaW50ID0gaW50KChjb25maWcuU0NSX1dJRFRIIC8gMTAwLjApICogX3Bvc194X3BlcmNlbnRhZ2UpDQogICAgICAgIHk6IGludCA9IGludCgoY29uZmlnLlNDUl9IRUlHSFQgLyAxMDAuMCkgKiBfcG9zX3lfcGVyY2VudGFnZSkNCg0KICAgICAgICBpZiBub3QgX3dyYXA6DQogICAgICAgICAgICBzZWxmLmRpc3BsYXkudGV4dChfc3RyLCB4LCB5KQ0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5LnNob3coKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICANCg0KICAgICAgICAjIFdSQVAgVEVYVA0KICAgICAgICB3b3JkcyA9IFtdDQogICAgICAgIG5ld19saW5lcyA9IF9zdHIuc3BsaXQoIlxuIikNCiAgICAgICAgZm9yIGwgaW4gbmV3X2xpbmVzOg0KICAgICAgICAgICAgaWYgbm90IGwgPT0gIiAiOiANCiAgICAgICAgICAgICAgICBmb3IgdyBpbiBzdHIobCkuc3BsaXQoIiAiKToNCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHcgPT0gIiAiOg0KICAgICAgICAgICAgICAgICAgICAgICAgd29yZHMuYXBwZW5kKHcpDQogICAgICAgIA0KICAgICAgICBjaGFyc19sZWZ0ID0gMSArIChjb25maWcuU0NSX1dJRFRIIC0geCkvIGludChjb25maWcuQ0ZHX0RJU1BMQVlfQ0hBUl9XSURUSCkNCiAgICAgICAgI3ByaW50KCJjaGFyc19sZWZ0OiB7fSIuZm9ybWF0KGNoYXJzX2xlZnQpKQ0KICAgICAgICB3b3Jkc193cml0dGVuID0gMA0KICAgICAgICBsaW5lX3kgPSB5DQogICAgICAgICNwcmludCh3b3JkcykNCiAgICAgICAgZm9yIHcgaW4gd29yZHM6DQogICAgICAgICAgICB3X3NwYWNlID0gInt9ICIuZm9ybWF0KHcpDQoNCg0KICAgICAgICAgICAgaWYgKHdvcmRzX3dyaXR0ZW4rbGVuKHdfc3BhY2UpKSA+PSBjaGFyc19sZWZ0Og0KICAgICAgICAgICAgICAgICNwcmludCgibGluZV95Ont9Ii5mb3JtYXQobGluZV95KSkNCiAgICAgICAgICAgICAgICB3b3Jkc193cml0dGVuID0gMA0KICAgICAgICAgICAgICAgIGxpbmVfeSA9IGxpbmVfeSArIGludChjb25maWcuQ0ZHX0RJU1BMQVlfTElORV9TUEFDSU5HKQ0KDQoNCiAgICAgICAgICAgICNwcmludCgidzoge30iLmZvcm1hdCh3X3NwYWNlLCBsaW5lX3kpKSANCiAgICAgICAgICAgIHhwb3MgPSB4ICsgd29yZHNfd3JpdHRlbiAqIGludChjb25maWcuQ0ZHX0RJU1BMQVlfQ0hBUl9XSURUSCkNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS50ZXh0KHdfc3BhY2UsIHhwb3MsIGxpbmVfeSkNCg0KICAgICAgICAgICAgd29yZHNfd3JpdHRlbiA9IHdvcmRzX3dyaXR0ZW4gKyBsZW4od19zcGFjZSkNCg0KICAgICAgICAgICAgaWYgd29yZHNfd3JpdHRlbiA+PSBjaGFyc19sZWZ0Og0KICAgICAgICAgICAgICAgICNwcmludCgibGluZV95Ont9Ii5mb3JtYXQobGluZV95KSkNCiAgICAgICAgICAgICAgICB3b3Jkc193cml0dGVuID0gMA0KICAgICAgICAgICAgICAgIGxpbmVfeSA9IGxpbmVfeSArIGludChjb25maWcuQ0ZHX0RJU1BMQVlfTElORV9TUEFDSU5HKQ0KICAgICAgICAgICAgDQogICAgICAgIHNlbGYuZGlzcGxheS5zaG93KCkNCiAgICAgICAgICAgDQoNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKToNCiAgICAgICAgIyBDUkVBVEUgQSBESVNQTEFZIElOU1RBTkNFDQogICAgICAgIHNlbGYuZGlzcGxheSA9IG1tYl9kaXNwbGF5Lm1tYl9kaXNwbGF5LmRpc3BsYXlfaW5zdGFuY2VfY3JlYXRvcigpDQoNCiAgICAgICAgaWYgc2VsZi5kaXNwbGF5IGlzIE5vbmU6DQogICAgICAgICAgICBwcmludCgiaW52YWxpZCBkaXNwbGF5IGNvbmZpZyIpDQoNCiAgICAgICAgIA0KICAgICAgICBzZWxmLmRpc3BsYXkuZXJhc2UoKQ0KDQogICAgICAgIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZTogaW50ID0gLTENCiAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfY29udGVudCA9ICIuIg0KICAgIA0KICANCiAgICANCiAgICBkZWYgc2hvd19tc2coc2VsZiwgX21lc3NhZ2U6IHN0ciA9ICIiKToNCg0KICAgICAgICBpZiBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgIT0gMCBvciBfbWVzc2FnZSAhPSBzZWxmLmxhc3RfZGlzcGxheV9jb250ZW50Og0KICAgICAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfY29udGVudCA9IF9tZXNzYWdlDQoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5lcmFzZSgpDQogICAgICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCgie30iLmZvcm1hdChfbWVzc2FnZSksIFRydWUsIDAsIDApDQoNCiAgICAgICAgICAgIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSA9IDANCiANCiAgICAgICAgDQogIA0KICAgICAgICANCiAgICBkZWYgc2hvd19yZWNpcGVfaW5mb3JtYXRpb24oc2VsZiwgX25hbWU6c3RyLCBfZGVzY3JpcHRpb246IHN0ciA9ICIiKToNCiAgICAgICAgZnVsbF9yZWZyZXNoID0gRmFsc2UNCiAgICAgICAgaWYgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlICE9IDE6DQogICAgICAgICAgICBmdWxsX3JlZnJlc2ggPSBUcnVlDQogICAgICAgIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSA9IDENCiAgICAgICAgDQogICAgICAgIGlmIGZ1bGxfcmVmcmVzaDoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5lcmFzZSgpDQoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJ7fSIuZm9ybWF0KF9uYW1lKSwgVHJ1ZSwgMCwgNykNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJ7fSIuZm9ybWF0KF9kZXNjcmlwdGlvbiksIFRydWUsIDAsIDM1KQ0KICAgICAgICAgIA0KICAgIA0KICAgIA0KICAgIGRlZiBzZXRfZnVsbF9yZWZyZXNoKHNlbGYpOg0KICAgICAgICBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgPSAtMQ0KICAgICAgICANCiAgICAgDQogICAgZGVmIHNob3dfcmVjaXBlX3N0ZXAoc2VsZiwgX2FjdGlvbjogc3RyLCBfaW5ncmVkaWVudDogc3RyLCBfY3VycmVudF9zdGVwOiBpbnQsIF9tYXhfc3RlcHM6IGludCk6DQogICAgICAgIGZ1bGxfcmVmcmVzaCA9IEZhbHNlDQogICAgICAgIGlmIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSAhPSAyOg0KICAgICAgICAgICAgZnVsbF9yZWZyZXNoID0gVHJ1ZQ0KICAgICAgICBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgPSAyDQogICAgICAgIGlmIGZ1bGxfcmVmcmVzaDoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5lcmFzZSgpDQoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJ7fSIuZm9ybWF0KF9hY3Rpb24pLCBUcnVlLCAzMSwgNykNCiAgICAgICAgICAgDQogICAgICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCgie30iLmZvcm1hdChfaW5ncmVkaWVudCksIFRydWUsIDAsIDI3KSAgICANCiAgICAgICAgICAgICMgU0hPVyBTVEVQUw0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5X3RleHQoInt9IC8ge30iLmZvcm1hdChfY3VycmVudF9zdGVwLCBfbWF4X3N0ZXBzKSwgVHJ1ZSwgMzcsIDkwKQ0KDQoNCiAgICAgICAgICAgICANCiAgICAgICAgIA0KICAgICAgICANCiAgICAgICAgICAgICAgDQogICAgICAgIA0KICAgIGRlZiBzaG93X3RpdGxlc2NyZWVuKHNlbGYpOg0KICAgICAgICBmdWxsX3JlZnJlc2ggPSBGYWxzZQ0KICAgICAgICBpZiBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgIT0gMzoNCiAgICAgICAgICAgIGZ1bGxfcmVmcmVzaCA9IFRydWUNCiAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlID0gMw0KICAgICAgICANCiAgICAgICAgaWYgZnVsbF9yZWZyZXNoOg0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5LmVyYXNlKCkNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJNSVgiLCBUcnVlLCAyNSwgMTApDQogICAgICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCgiTUVBU1VSRSIsIFRydWUsIDI1LCAzMCkNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJCVUREWSIsIFRydWUsIDI1LCA1MCkNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJ7fSIuZm9ybWF0KGhlbHBlci5nZXRfc3lzdGVtX2lkKCkpLCBUcnVlLCA3LCA3MCkNCiAgICANCiAgICANCiAgICBkZWYgc2hvd19yZWNpcGVfaW5ncmVkaWVudHMoc2VsZiwgX2luZ3JlZGllbnRzOiBbc3RyXSwgX2ZvcmNlX3JlZnJlc2g6IGJvb2wgPSBUcnVlKToNCiAgICAgICAgZnVsbF9yZWZyZXNoID0gRmFsc2UNCiAgICAgICAgaWYgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlICE9IDQgb3IgX2ZvcmNlX3JlZnJlc2g6DQogICAgICAgICAgICBmdWxsX3JlZnJlc2ggPSBUcnVlDQogICAgICAgIHNlbGYubGFzdF9kaXNwbGF5X3NvdXJjZSA9IDQNCiAgICAgICAgDQogICAgICAgIGlmIGZ1bGxfcmVmcmVzaDoNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheS5lcmFzZSgpDQogICAgICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCgiSW5ncmVkaWVudHMiLCBUcnVlLCAwLCA3KQ0KIA0KICAgICAgICB0ZXh0ID0gIiINCiAgICAgICAgZm9yIGl0ZW0gaW4gX2luZ3JlZGllbnRzOg0KICAgICAgICAgICAgdGV4dCA9IHRleHQgKyAie31cbiIuZm9ybWF0KGl0ZW0pDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCh0ZXh0LCBUcnVlLCAwLCAzMCkNCg0KICAgIA0KICAgICAgDQogICAgZGVmIHNob3dfc2NhbGUoc2VsZiwgX3ZhbHVlOiBpbnQpOg0KICAgICAgICBmdWxsX3JlZnJlc2ggPSBGYWxzZQ0KICAgICAgICBpZiBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgIT0gNToNCiAgICAgICAgICAgIGZ1bGxfcmVmcmVzaCA9IFRydWUNCiAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlID0gNQ0KICAgICAgICANCiAgICAgICAgaWYgZnVsbF9yZWZyZXNoOg0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5LmVyYXNlKCkNCiAgICAgICAgICAgIHNlbGYuZGlzcGxheV90ZXh0KCJTQ0FMRSBNT0RFIiwgVHJ1ZSwgMCwgNykNCiAgICAgICAgDQogICAgICAgIHNlbGYuZGlzcGxheV9yZWN0KDI1LDUwLCAxMDAsIDYwKQ0KICAgICAgICBzZWxmLmRpc3BsYXlfdGV4dCgiezowNGR9ZyIuZm9ybWF0KF92YWx1ZSksIFRydWUsIDI1LCA1MCkNCiAgICANCiAgICBkZWYgc2hvd19kZXZpY2VfcXJfY29kZShzZWxmLCBfdXJsOnN0ciA9ICIiLCBfb2Zmc2V0X3g6aW50ID0gMCwgX29mZnNldF95OmludCA9IDApOg0KICAgICAgICBmdWxsX3JlZnJlc2ggPSBGYWxzZQ0KICAgICAgICBpZiBzZWxmLmxhc3RfZGlzcGxheV9zb3VyY2UgIT0gNjoNCiAgICAgICAgICAgIGZ1bGxfcmVmcmVzaCA9IFRydWUNCiAgICAgICAgc2VsZi5sYXN0X2Rpc3BsYXlfc291cmNlID0gNg0KICAgICAgICANCiAgICAgICAgaWYgZnVsbF9yZWZyZXNoOg0KICAgICAgICAgICAgc2VsZi5kaXNwbGF5LmVyYXNlKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcXIgPSB1UVIuUVJDb2RlKCkNCiAgICAgICAgICAgIGlmIF91cmwgPT0gIiI6DQogICAgICAgICAgICAgICAgcXIuYWRkX2RhdGEoInt9Ii5mb3JtYXQoaGVscGVyLmdldF9zeXN0ZW1faWQoKSkpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHFyLmFkZF9kYXRhKCJ7fSIuZm9ybWF0KF91cmwpKQ0KICAgICAgICAgICAgbWF0cml4ID0gcXIuZ2V0X21hdHJpeCgpDQogICAgICAgICAgICBmb3IgeSBpbiByYW5nZShsZW4obWF0cml4KSoyKTogICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZm9yIHggaW4gcmFuZ2UobGVuKG1hdHJpeFswXSkqMik6ICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbm90IG1hdHJpeFtpbnQoeS8yKV1baW50KHgvMildICAgDQogICAgICAgICAgICAgICAgICAgIHNlbGYucGl4ZWwoeCArIF9vZmZzZXRfeCwgeSArIF9vZmZzZXRfeSwgdmFsdWUpDQogICAgICAgIHNlbGYuc2hvdygpICANCg0K", "example_recipes.py": "RVhBTVBMRV9SRUNJUEVTX0NPTExFQ1RJT046IGRpY3QgPSB7CiAgICAiZXhhbXBsZV9yZWNpcGUucmVjaXBlIjogewogICAgICAgICJuYW1lIjogIkVYQU1QTEVfUkVDSVBFIiwKICAgICAgICAiZGVzY3JpcHRpb24iOiAiQSBuaWNlIEV4YW1wbGUgQ29ja3RhaWwiLAogICAgICAgICJ2ZXJzaW9uIjogIjEuMC4wIiwKICAgICAgICAiaW5ncmVkaWVudHMiOiB7IjAiOiAiQSIsICIxIjogIkIiLCAiMiI6ICJDIn0sCiAgICAgICAgInN0ZXBzIjogWwogICAgICAgICAgICB7ImFjdGlvbiI6ICJzY2FsZSIsICJpbmdyZWRpZW50IjogIjAiLCAiYW1vdW50IjogMTB9LAogICAgICAgICAgICB7ImFjdGlvbiI6ICJjb25maXJtIiwgInRleHQiOiAic2hha2UgaXQifSwKICAgICAgICAgICAgeyJhY3Rpb24iOiAid2FpdCIsICJ0ZXh0IjogIndhaXQgZm9yIGl0IiwgImFtb3VudCI6IDIwfSwKICAgICAgICBdLAogICAgfSwKICAgICJUZXF1aWxhX1N1bnJpc2UucmVjaXBlIjogewogICAgICAgICJuYW1lIjogIlRlcXVpbGEgU3VucmlzZSIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIkEgbmljZSBUZXF1aWxhIFN1bnJpc2UgQ29ja3RhaWwiLAogICAgICAgICJ2ZXJzaW9uIjogIjEuMC4wIiwKICAgICAgICAiaW5ncmVkaWVudHMiOiB7IjAiOiAid2Vpw59lciBUZXF1aWxhIiwgIjEiOiAiT3JhbmdlbnNhZnQiLCAiMiI6ICJHcmVuYWRpbmUifSwKICAgICAgICAic3RlcHMiOiBbCiAgICAgICAgICAgIHsiYWN0aW9uIjogInNjYWxlIiwgImluZ3JlZGllbnQiOiAiMCIsICJhbW91bnQiOiAxMH0sCiAgICAgICAgICAgIHsiYWN0aW9uIjogInNjYWxlIiwgImluZ3JlZGllbnQiOiAiMSIsICJhbW91bnQiOiAxMjB9LAogICAgICAgICAgICB7ImFjdGlvbiI6ICJjb25maXJtIiwgInRleHQiOiAiQUREIElDRSJ9LAogICAgICAgICAgICB7ImFjdGlvbiI6ICJzY2FsZSIsICJpbmdyZWRpZW50IjogIjIiLCAiYW1vdW50IjogNDB9LAogICAgICAgICAgICB7ImFjdGlvbiI6ICJ3YWl0IiwgInRleHQiOiAiV0FJVCBGT1IgU0VUVExFIERPV04iLCAiYW1vdW50IjogMTB9LAogICAgICAgIF0sCiAgICB9LAogICAgIlN0cmF3YmVycnlfQ29sYWRhLnJlY2lwZSI6IHsKICAgICAgICAibmFtZSI6ICJTdHJhd2JlcnJ5IENvbGFkYSIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIkEgZnJ1aXR5IHN0cmF3YmVycnkgY29ja3RhaWwgd2l0aCBjb2NvbnV0IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImluZ3JlZGllbnRzIjogewogICAgICAgICAgICAiMCI6ICIxMCBTdHJhd2JlcnJpZXMiLAogICAgICAgICAgICAiMSI6ICJDb2NvbnV0LUp1aWNlIiwKICAgICAgICAgICAgIjIiOiAiQ3JlYW0iLAogICAgICAgICAgICAiMyI6ICJQaW5lYXBwbGUtSnVpY2UiLAogICAgICAgICAgICAiNCI6ICJ3aGl0ZSBSdW0iLAogICAgICAgICAgICAiNSI6ICJDcnVzaGVkIEljZSIsCiAgICAgICAgfSwKICAgICAgICAic3RlcHMiOiBbCiAgICAgICAgICAgIHsiYWN0aW9uIjogImNvbmZpcm0iLCAidGV4dCI6ICJwdXJlZSBzdHJhd2JlcnJpZXMifSwKICAgICAgICAgICAgeyJhY3Rpb24iOiAiY29uZmlybSIsICJ0ZXh0IjogImFkZCAxLzIgY3J1c2hlZCBpY2UifSwKICAgICAgICAgICAgeyJhY3Rpb24iOiAic2NhbGUiLCAiaW5ncmVkaWVudCI6ICIxIiwgImFtb3VudCI6IDYwfSwKICAgICAgICAgICAgeyJhY3Rpb24iOiAic2NhbGUiLCAiaW5ncmVkaWVudCI6ICIyIiwgImFtb3VudCI6IDMwfSwKICAgICAgICAgICAgeyJhY3Rpb24iOiAic2NhbGUiLCAiaW5ncmVkaWVudCI6ICIzIiwgImFtb3VudCI6IDgwfSwKICAgICAgICAgICAgeyJhY3Rpb24iOiAic2NhbGUiLCAiaW5ncmVkaWVudCI6ICI0IiwgImFtb3VudCI6IDUwfSwKICAgICAgICAgICAgeyJhY3Rpb24iOiAid2FpdCIsICJ0ZXh0IjogIlNoYWtlIiwgImFtb3VudCI6IDMwfSwKICAgICAgICBdLAogICAgfSwKfQo=", "Scales.py": "aW1wb3J0IHN0YXRpY19tb2R1bGVzLmh4NzExIGFzIGh4NzExDQppbXBvcnQgdGltZQ0KaW1wb3J0IG1hdGgNCg0KY2xhc3MgU2NhbGVzKGh4NzExLkhYNzExKToNCiAgICBkZWYgX19pbml0X18oc2VsZiwgZF9vdXQgPSA1LCBwZF9zY2sgPSAxMik6DQogICAgICAgIHN1cGVyKFNjYWxlcywgc2VsZikuX19pbml0X18oZF9vdXQsIHBkX3NjaykNCiAgICAgICAgc2VsZi5vZmZzZXQgPSAwDQoNCiAgICBkZWYgcmVzZXQoc2VsZik6DQogICAgICAgIHNlbGYucG93ZXJfb2ZmKCkNCiAgICAgICAgc2VsZi5wb3dlcl9vbigpDQoNCiAgICBkZWYgdGFyZShzZWxmKToNCiAgICAgICAgc2VsZi5vZmZzZXQgPSBzZWxmLnJlYWQoKQ0KDQogICAgZGVmIHJhd192YWx1ZShzZWxmKToNCiAgICAgICAgcmV0dXJuIHNlbGYucmVhZCgpIC0gc2VsZi5vZmZzZXQNCg0KICAgIGRlZiBzdGFibGVfcmF3X3ZhbHVlKHNlbGYsIHdpdGhvdXRfb2Zmc2V0OiBib29sID0gRmFsc2UsIHJlYWRzPTEwLCBkZWxheV91cz0xMCk6ICAgICANCiAgICAgICAgc3RhYmxlX3ZhbHVlcyA9IFtdDQogICAgICAgIGZvciBpIGluIHJhbmdlKHJlYWRzKToNCiAgICAgICAgICAgIGlmIHdpdGhvdXRfb2Zmc2V0Og0KICAgICAgICAgICAgICAgIHN0YWJsZV92YWx1ZXMuYXBwZW5kKHNlbGYucmVhZCgpKQ0KICAgICAgICAgICAgZWxzZTogICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzdGFibGVfdmFsdWVzLmFwcGVuZChzZWxmLnJhd192YWx1ZSgpKQ0KICAgICAgICAgICAgdGltZS5zbGVlcF9tcygxMCkNCiAgICAgICAgDQogICAgICAgIHRhcmVfdmFsdWUgPSAwLjANCiAgICAgICAgZm9yIHYgaW4gc3RhYmxlX3ZhbHVlczoNCiAgICAgICAgICAgIHRhcmVfdmFsdWUgPSB0YXJlX3ZhbHVlICsgdg0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHRhcmVfdmFsdWUgLyByZWFkcw0KICAgIA0KIA0KICAgIGRlZiBzZXRfc2NhbGUoc2VsZiwgX3NjYWxlX2ZhY3RvcjogZmxvYXQpOg0KICAgICAgICBpZiBfc2NhbGVfZmFjdG9yIGlzIE5vbmUgb3IgX3NjYWxlX2ZhY3RvciA9PSAwLjA6DQogICAgICAgICAgICBfc2NhbGVfZmFjdG9yID0gMS4wDQogICAgICAgICAgICBwcmludCgic2V0IF9zY2FsZV9mYWN0b3IgdG8gMS4wIGR1ZSBwYXJhbWV0ZXIgX3NjYWxlX2ZhY3RvciBpcyBOb25lIG9yIFplcm8iKQ0KICAgICAgICBzZWxmLlNDQUxFX0ZBQ1RPUiA9IF9zY2FsZV9mYWN0b3INCiAgICAgICAgDQogICAgZGVmIGdldF91bml0KHNlbGYsIF9zdGFibGU6IGJvb2wgPSBGYWxzZSkgLT4gZmxvYXQ6DQogICAgICAgIGlmIHNlbGYuU0NBTEVfRkFDVE9SID09IDAuMDoNCiAgICAgICAgICAgIHNlbGYuU0NBTEVfRkFDVE9SID0gMS4wDQogICAgICAgICAgICANCiAgICAgICAgaWYgX3N0YWJsZToNCiAgICAgICAgICAgIHJldHVybiBzZWxmLnJhd192YWx1ZSgpIC8gc2VsZi5TQ0FMRV9GQUNUT1INCiAgICAgICAgDQogICAgICAgIHJldHVybiBzZWxmLnN0YWJsZV9yYXdfdmFsdWUoKSAvIHNlbGYuU0NBTEVfRkFDVE9SDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogDQo=", "recipe_updater.py": "aW1wb3J0IGNvbmZpZwppbXBvcnQgc2V0dGluZ3MKaW1wb3J0IHRpbWUKaW1wb3J0IGhlbHBlcgoKdHJ5OgogICAgaW1wb3J0IG5ldHdvcmsKICAgIGltcG9ydCBzb2NrZXQKICAgIGltcG9ydCB1cmVxdWVzdHMKCiAgICBjbGFzcyByZWNpcGVfdXBkYXRlcjoKICAgICAgICAKICAgICAgICBAc3RhdGljbWV0aG9kCiAgICAgICAgZGVmIGRpc2FibGVfd2lmaSgpOgogICAgICAgICAgICB3bGFuID0gbmV0d29yay5XTEFOKG5ldHdvcmsuU1RBX0lGKQogICAgICAgICAgICB3bGFuLmFjdGl2ZShGYWxzZSkKICAgICAgICAKICAgICAgICBAc3RhdGljbWV0aG9kCiAgICAgICAgZGVmIGNvbm5lY3Rfd2lmaSgpIC0+IGJvb2w6CiAgICAgICAgICAgIG5ldHdvcmsuY291bnRyeShjb25maWcuQ0ZHX05FVFdPUktfV0lGSUNPVU5UUlkpCiAgICAgICAgICAgIG5ldHdvcmsuaG9zdG5hbWUoY29uZmlnLkNGR19ORVRXT1JLX0hPU1ROQU1FKQoKICAgICAgICAgICAgd2xhbiA9IG5ldHdvcmsuV0xBTihuZXR3b3JrLlNUQV9JRikKICAgICAgICAgICAgd2xhbi5hY3RpdmUoVHJ1ZSkKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICBzc2lkID0gc2V0dGluZ3Muc2V0dGluZ3MoKS5zZXRfc2V0dGluZ3NfZW50cnkoc2V0dGluZ3MuU0VUVElOR1NfRU5UUklFUy5ORVRXT1JLX1dJRklfU1NJRCkKICAgICAgICAgICAgcHNrID0gc2V0dGluZ3Muc2V0dGluZ3MoKS5zZXRfc2V0dGluZ3NfZW50cnkoc2V0dGluZ3MuU0VUVElOR1NfRU5UUklFUy5ORVRXT1JLX1dJRklfUFNLKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgc3NpZCBpcyBOb25lIG9yIHBzayBpcyBOb25lOgogICAgICAgICAgICAgICAgcHJpbnQoIlNTSUQgT1IgUFNLIEZPUiBXSUZJIENPTk5FQ1RJT04gTk9UIFNFVCIpCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCgogICAgICAgICAgICBwcmludCgiQ09OTkVDVElORyBUTzoge30iLmZvcm1hdChzc2lkKSkKICAgICAgICAgICAgd2xhbi5jb25uZWN0KHNzaWQsIHBzaykKICAgICAgICAgICAgdGltZXIgPSAwCiAgICAgICAgICAgIHdoaWxlIHdsYW4uaXNjb25uZWN0ZWQoKSA9PSBGYWxzZToKICAgICAgICAgICAgICAgIHByaW50KCdXYWl0aW5nIGZvciBjb25uZWN0aW9uLi4uJykKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgIHRpbWVyID0gdGltZXIgKyAxCgogICAgICAgICAgICAgICAgaWYgdGltZXIgPiAxMDoKICAgICAgICAgICAgICAgICAgICB3bGFuLmFjdGl2ZShGYWxzZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHdsYW4uaXNjb25uZWN0ZWQoKToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAoKICAgICAgICBAc3RhdGljbWV0aG9kCiAgICAgICAgZGVmIGNoZWNrX3VwZGF0ZV91cmwoKSAtPiBzdHI6CiAgICAgICAgICAgIGlmIG5vdCByZWNpcGVfdXBkYXRlci5jb25uZWN0X3dpZmkoKToKICAgICAgICAgICAgICAgIHJldHVybiAiIgogICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgYXBpX2VuZHBvaW50OiBzdHIgPSBzZXR0aW5ncy5zZXR0aW5ncy5pbnN0YW5jZSgpLnNldF9zZXR0aW5nc19lbnRyeShzZXR0aW5ncy5TRVRUSU5HU19FTlRSSUVTLk5FVFdPUktfQVBJX0VOUE9JTlQpCiAgICAgICAgICAgIGlmIGFwaV9lbmRwb2ludCBpcyBOb25lOgogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgICAgIGlmICdodHRwOi8vJyBub3QgaW4gYXBpX2VuZHBvaW50OgogICAgICAgICAgICAgICAgYXBpX2VuZHBvaW50ID0gJ2h0dHA6Ly8nICsgYXBpX2VuZHBvaW50CiAgICAgICAgICAgIHByaW50KCJjaGVja191cGRhdGVfdXJsOiBzZXQgYXBpIGVuZHBvaW50IHVybCB7fSIuZm9ybWF0KGFwaV9lbmRwb2ludCkpCiAgICAgICAgICAgIAogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAjIEdFVCBMSVNUIE9GIFJFQ0lQRVMKICAgICAgICAgICAgICAgIGZpbmFsID0gInt9L3t9Ii5mb3JtYXQoYXBpX2VuZHBvaW50LCBzdHIoaGVscGVyLmdldF9zeXN0ZW1faWQoKSkpCiAgICAgICAgICAgICAgICByID0gdXJlcXVlc3RzLmdldChmaW5hbCkKICAgICAgICAgICAgICAgIHIuY2xvc2UoKQogICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9lbmRwb2ludCAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHByaW50KHN0cihlKSkKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgICAgICAgICAKICAgICAgICBAc3RhdGljbWV0aG9kICAgCiAgICAgICAgZGVmIHVwZGF0ZV9yZWNpcGVzKCkgLT4gYm9vbDoKICAgICAgICAgICAgCiAgICAgICAgICAgIGFwaV9lbmRwb2ludDogc3RyID0gcmVjaXBlX3VwZGF0ZXIuY2hlY2tfdXBkYXRlX3VybCgpCiAgICAgICAgCiAgICAgICAgICAgIHByaW50KCJBUEk6IHt9Ii5mb3JtYXQoYXBpX2VuZHBvaW50KSkKICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAjIEdFVCBMSVNUIE9GIFJFQ0lQRVMKICAgICAgICAgICAgICAgIHIgPSB1cmVxdWVzdHMuZ2V0KCJ7fS97fS9yZWNpcGVzIi5mb3JtYXQoYXBpX2VuZHBvaW50LCBzdHIoaGVscGVyLmdldF9zeXN0ZW1faWQoKSkpLCAgaGVhZGVycz1oZWFkZXJzKQogICAgICAgICAgICAgICAgcmVjaXBlX2xpc3QgPSByLmpzb24oKSAjIFsicmVzaXBlX2ZpbGVfdXJpX3JlbGF0aXZlIl0KICAgICAgICAgICAgICAgIHIuY2xvc2UoKQogICAgICAgICAgICAgICAgaWYgcmVjaXBlX2xpc3QgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgIyBET05XTE9BRCBFQUNIIFJFQ0lQRQogICAgICAgICAgICAgICAgICAgIGZvciByZWNpcGUgaW4gcmVjaXBlX2xpc3Q6CiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB1cmVxdWVzdHMuZ2V0KCJ7fS97fS9yZWNpcGUve30iLmZvcm1hdChhcGlfZW5kcG9pbnQsIHN0cihoZWxwZXIuZ2V0X3N5c3RlbV9pZCgpKSwgcmVjaXBlKSwgIGhlYWRlcnM9aGVhZGVycykKICAgICAgICAgICAgICAgICAgICAgICAgZGxfcmVjaXBlID0gci5qc29uKCkgIyBbe2ZpbGVuYW1lX3dpdGhvdXRfZW5kaW5nLCByZWNpcGV9XQogICAgICAgICAgICAgICAgICAgICAgICByLmNsb3NlKCkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdyZWNpcGUnIGluIGRsX3JlY2lwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLnNldHRpbmdzLmluc3RhbmNlKCkud3JpdGVfanNvbl9maWxlKGRsX3JlY2lwZVsnbmFtZSddICsgIi5yZWNpcGUiLCBkbF9yZWNpcGVbJ3JlY2lwZSddKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoImNhbnQgc3RvcmUgcmVjaXBlZCBkYXRhIGJsb2NrIGR1ZSB0byBtaXNzaW5nIHJlY2lwZSBkaWN0IGJsb2NrIikKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHByaW50KHN0cihlKSkKICAgIAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJlY2lwZV91cGRhdGVyLmRpc2FibGVfd2lmaSgpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgCgpleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgCiAgICBjbGFzcyByZWNpcGVfdXBkYXRlcjoKICAgICAgICAKICAgICAgICBkZWYgZGlzYWJsZV93aWZpKCk6CiAgICAgICAgICAgIHBhc3MKICAgICAgICAKICAgICAgICBkZWYgY2hlY2tfdXBkYXRlX3VybCgpIC0+IHN0cjoKICAgICAgICAgICAgcGFzcwoKICAgICAgICBkZWYgY29ubmVjdF93aWZpKCkgLT4gYm9vbDoKICAgICAgICAgICAgcGFzcwoKICAgICAgICBkZWYgdXBkYXRlX3JlY2lwZXMoKSAtPiBib29sOgogICAgICAgICAgICBwYXNz", "menu_entry.py": "CgpjbGFzcyBtZW51X2VudHJ5OgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBfbmFtZTogc3RyKToKICAgICAgICBwYXNzCgogICAgZGVmIGFjdGl2YXRlKHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgdGVhcmRvd24oc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiB1cGRhdGUoc2VsZik6CiAgICAgICAgcGFzcw==", "helper.py": "aW1wb3J0IHRpbWUNCmltcG9ydCB1YmluYXNjaWkNCmltcG9ydCBtYWNoaW5lDQppbXBvcnQgc3lzDQoNCmRlZiBtaWxsaXMoKToNCiAgICByZXR1cm4gcm91bmQodGltZS50aW1lKCkgKiAxMDAwKQ0KDQpkZWYgZm1hcChzLCBhMSwgYTIsIGIxLCBiMikgLT4gZmxvYXQ6DQogICAgcmV0dXJuIGIxICsgKHMgLSBhMSkgKiAoYjIgLSBiMSkgLyAoYTIgLSBhMSkNCg0KZGVmIGltYXAocywgYTEsIGEyLCBiMSwgYjIpIC0+IGludDoNCiAgICByZXR1cm4gYjEgKyAocyAtIGExKSAqIChiMiAtIGIxKSAvIChhMiAtIGExKQ0KDQpkZWYgZ2V0X3N5c3RlbV9pZCgpOg0KICAgIHJldHVybiB1YmluYXNjaWkuaGV4bGlmeShtYWNoaW5lLnVuaXF1ZV9pZCgpKS5kZWNvZGUoJ3V0Zi04JykNCg0KZGVmIGhhc193aWZpKCk6DQogICAgaWYgJ1Jhc3BiZXJyeSBQaSBQaWNvIFcnIGluIHN0cihzeXMuaW1wbGVtZW50YXRpb24pOg0KICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgIHJldHVybiBGYWxzZQ0K", "settings.py": "aW1wb3J0IHNkY2FyZAppbXBvcnQgbWFjaGluZQppbXBvcnQgdW9zCmltcG9ydCBqc29uCmltcG9ydCBjb25maWcKaW1wb3J0IG9zCmZyb20gc2luZ2xldG9uIGltcG9ydCBzaW5nbGV0b24KCmNsYXNzIFNFVFRJTkdTX0VOVFJJRVMob2JqZWN0KToKICAgIFNDQUxFX0NBTElCUkFUSU9OX01JTl9WQUxVRSA9ICJzY2FsZV9taW4iCiAgICBTQ0FMRV9DQUxJQlJBVElPTl9NQVhfVkFMVUUgPSAic2NhbGVfZnVsbCIKICAgIFNDQUxFX0NBTElCUkFUSU9OX0NBTElCUkFUSU9OX1dFSUdIVCA9ICJzY2FsZV93ZWlnaHQiCgogICAgTkVUV09SS19XSUZJX1NTSUQgPSAid2lmaV9zc2lkIgogICAgTkVUV09SS19XSUZJX1BTSyA9ICJ3aWZpX3BzayIKICAgIE5FVFdPUktfQVBJX0VOUE9JTlQgPSAiYXBpX2VucG9pbnQiCgoKCkBzaW5nbGV0b24KY2xhc3Mgc2V0dGluZ3Mob2JqZWN0KToKCiAgIAoKICAgIHNkID0gTm9uZSAjIHNkY2FyZCBjbGFzcyBpbnN0YW5jZQoKICAgIFJFQ0lQRV9CQVNFX0RJUjogc3RyID0gIi9kYXRhIiAjIEZPTERFUiBPRiBUSEUgU0VUVElOR1MgRklMRVMgU1RPUkFHRSBJRiBTRCBDQVJEIEZPVU5EIFNEIENBUkQgV0lMTCBCRSBNT1VOVEVEIFRIRVJFCiAgICBTRVRUSU5HU19GSUxFTkFNRTogc3RyID0gIlNFVFRJTkdTLmpzb24iCiAgICAgCiAgICBkZWYgX19pbml0X18oc2VsZiwgX3NwaSA9IE5vbmUsIF9jc19waW4gPSBjb25maWcuQ0ZHX1NEQ0FSRF9DU19QSU4sIF9kYXRhX2Rpcjogc3RyID0gIi9kYXRhIik6CiAgICAgICAgc2VsZi5SRUNJUEVfQkFTRV9ESVIgPSBfZGF0YV9kaXIKCiAgICAgICAgaWYgX3NwaSBpcyBOb25lOgogICAgICAgICAgICBfc3BpID0gbWFjaGluZS5TUEkoY29uZmlnLkNGR19TRENBUkRfU1BJSU5TVEFOQ0UsIGJhdWRyYXRlPTEwMDAwMDAsIHBvbGFyaXR5PTAsIHBoYXNlPTAsIGJpdHM9OCwgZmlyc3RiaXQ9bWFjaGluZS5TUEkuTVNCLCBzY2s9bWFjaGluZS5QaW4oY29uZmlnLkNGR19TRENBUkRfU0NLX1BJTiksIG1vc2k9bWFjaGluZS5QaW4oY29uZmlnLkNGR19TRENBUkRfTU9TSV9QSU4pLCBtaXNvPW1hY2hpbmUuUGluKGNvbmZpZy5DRkdfU0RDQVJEX01JU09fUElOKSkKICAgICAgICAjIEFzc2lnbiBjaGlwIHNlbGVjdCAoQ1MpIHBpbiAoYW5kIHN0YXJ0IGl0IGhpZ2gpCiAgICAgICAgc2VsZi5jcyA9IG1hY2hpbmUuUGluKF9jc19waW4sIG1hY2hpbmUuUGluLk9VVCkKCiAgICAgICAgc2VsZi5zZCA9IE5vbmUKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuc2QgPSBzZGNhcmQuU0RDYXJkKF9zcGksIHNlbGYuY3MpCgogICAgICAgICAjIE1vdW50IGZpbGVzeXN0ZW0KICAgICAgICAgICAgc2VsZi52ZnMgPSB1b3MuVmZzRmF0KHNlbGYuc2QpCiAgICAgICAgICAgIHVvcy5tb3VudChzZWxmLnZmcywgc2VsZi5SRUNJUEVfQkFTRV9ESVIpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludCgic2RjYXJkIGluaXQgZmFpbGVkIHVzaW5nIGxvY2FsIGZpbGVzeXN0ZW0gb24gL2RhdGEiLCBzdHIoZSkpCgoKICAgICAgICBpZiBzZWxmLnNkIGlzIE5vbmU6CiAgICAgICAgICAgIHRyeTogCiAgICAgICAgICAgICAgICBvcy5ta2RpcihzZWxmLlJFQ0lQRV9CQVNFX0RJUikgCiAgICAgICAgICAgICAgICBwcmludCgiRGlyZWN0b3J5ICclcycgY3JlYXRlZCBzdWNjZXNzZnVsbHkiICUgc2VsZi5SRUNJUEVfQkFTRV9ESVIpIAogICAgICAgICAgICBleGNlcHQgT1NFcnJvciBhcyBlcnJvcjogCiAgICAgICAgICAgICAgICBwcmludCgiRGlyZWN0b3J5ICclcycgY2FuIG5vdCBiZSBjcmVhdGVkIiAlIHNlbGYuUkVDSVBFX0JBU0VfRElSKQoKCiAgICAgICAgc2VsZi5jcmVhdGVfc2V0dGluZ3NfZmlsZSgpCiAgICAgICAgc2VsZi5jcmVhdGVfaW5pdGlhbF9jb25maWcoKQoKICAgIGRlZiBjcmVhdGVfc2V0dGluZ3NfZmlsZShzZWxmKToKICAgICAgICBzZXR0aW5nc19kaWN0ID0ge30KICAgICAgICBpZiBub3Qgc2VsZi5TRVRUSU5HU19GSUxFTkFNRSBpbiBzZWxmLmxpc3RfZmlsZXMoKToKICAgICAgICAgICAgd2l0aCBvcGVuKHNlbGYuUkVDSVBFX0JBU0VfRElSICsgIi8iICsgc2VsZi5TRVRUSU5HU19GSUxFTkFNRSwgInciKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgZmlsZS53cml0ZShqc29uLmR1bXBzKHNldHRpbmdzX2RpY3QpKQoKCiAgICBkZWYgY3JlYXRlX2luaXRpYWxfY29uZmlnKHNlbGYpOgogICAgICAgIG1lbWJlcnMgPSBbYXR0ciBmb3IgYXR0ciBpbiBkaXIoU0VUVElOR1NfRU5UUklFUykgaWYgbm90IGNhbGxhYmxlKGdldGF0dHIoU0VUVElOR1NfRU5UUklFUywgYXR0cikpIGFuZCBub3QgYXR0ci5zdGFydHN3aXRoKCJfXyIpXQogICAgICAgICMgUE9QVUxBVEUgQ09ORklHIEZJTEUgV0lUSCBBTEwgUE9TU0lCTEUgS0VZUwogICAgICAgIGZvciBtIGluIG1lbWJlcnM6CiAgICAgICAgICAgIGlmIHNlbGYuZ2V0X3NldHRpbmdzX2VudHJ5KG0pIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgc2VsZi5zZXRfc2V0dGluZ3NfZW50cnkobSwgTm9uZSkgIAoKCiAgICAgICAgIyBBREQgU09NRSBERUZBVUxUIFZBTFVFUyBGUk9NIENPTkZJRwoKICAgICAgICBpZiBzZWxmLmdldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLk5FVFdPUktfV0lGSV9TU0lEKSBpcyBOb25lOgogICAgICAgICAgICBzZWxmLnNldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLk5FVFdPUktfV0lGSV9TU0lELCBjb25maWcuQ0ZHX05FVFdPUktfV0lGSV9TU0lEKQoKICAgICAgICBpZiBzZWxmLmdldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLk5FVFdPUktfV0lGSV9QU0spIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuc2V0X3NldHRpbmdzX2VudHJ5KFNFVFRJTkdTX0VOVFJJRVMuTkVUV09SS19XSUZJX1BTSywgY29uZmlnLkNGR19ORVRXT1JLX1dJRklfUFNLKQoKICAgICAgICBpZiBzZWxmLmdldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLk5FVFdPUktfQVBJX0VOUE9JTlQpIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuc2V0X3NldHRpbmdzX2VudHJ5KFNFVFRJTkdTX0VOVFJJRVMuTkVUV09SS19BUElfRU5QT0lOVCwgY29uZmlnLkNGR19ORVRXT1JLX0FQSV9FTkRQT0lOVCkKICAgICAgICAKCgogICAgZGVmIGdldF9zZXR0aW5nc19lbnRyeShzZWxmLCBfa2V5OiBzdHIpIC0+IGFueToKICAgICAgICBzZXR0aW5nc19kaWN0OiBkaWN0ID0ge30KICAgICAgICB3aXRoIG9wZW4oc2VsZi5SRUNJUEVfQkFTRV9ESVIgKyAiLyIgKyBzZWxmLlNFVFRJTkdTX0ZJTEVOQU1FLCAiciIpIGFzIGZpbGU6CiAgICAgICAgICAgIHNldHRpbmdzX2RpY3QgPSBqc29uLmxvYWRzKGZpbGUucmVhZCgpKQoKICAgICAgICBpZiBfa2V5IGluIHNldHRpbmdzX2RpY3Q6CiAgICAgICAgICAgIHJldHVybiBzZXR0aW5nc19kaWN0W19rZXldCgogICAgICAgIHByaW50KCJnZXRfc2V0dGluZ3NfZW50cnkga2V5OiB7fSBub3QgZm91bmQgaW4gc2V0dGluZ3MgZmlsZSIuZm9ybWF0KF9rZXkpKQogICAgICAgIHJldHVybiBOb25lCiAgICAKCgogICAgZGVmIHNldF9zZXR0aW5nc19lbnRyeShzZWxmLCBfa2V5OiBzdHIsIF92YWx1ZTogYW55KToKICAgICAgICBzZXR0aW5nc19kaWN0OiBkaWN0ID0ge30KCiAgICAgICAgd2l0aCBvcGVuKHNlbGYuUkVDSVBFX0JBU0VfRElSICsgIi8iICsgc2VsZi5TRVRUSU5HU19GSUxFTkFNRSwgInIiKSBhcyBmaWxlOgogICAgICAgICAgICBzZXR0aW5nc19kaWN0ID0ganNvbi5sb2FkcyhmaWxlLnJlYWQoKSkKCiAgICAgICAgc2V0dGluZ3NfZGljdFtzdHIoX2tleSldID0gX3ZhbHVlCgogICAgICAgIHdpdGggb3BlbihzZWxmLlJFQ0lQRV9CQVNFX0RJUiArICIvIiArIHNlbGYuU0VUVElOR1NfRklMRU5BTUUsICJ3IikgYXMgZmlsZToKICAgICAgICAgICAgZmlsZS53cml0ZShqc29uLmR1bXBzKHNldHRpbmdzX2RpY3QpKQoKCgogICAgZGVmIGdldF9zZXR0aW5nc19iYXNlX2ZvbGRlcl9wYXRoKHNlbGYpIC0+IHN0cjoKICAgICAgICByZXR1cm4gc2VsZi5SRUNJUEVfQkFTRV9ESVIKCiAgICBkZWYgbGlzdF9maWxlcyhzZWxmKSAtPltzdHJdOgogICAgICAgIHJldHVybiBvcy5saXN0ZGlyKHNlbGYuUkVDSVBFX0JBU0VfRElSKQoKCiAgICAKICAgIGRlZiB3cml0ZV9qc29uX2ZpbGUoc2VsZiwgX3BhdGg6c3RyLCBfZGljdF8wY29udGVudDogZGljdCk6CiAgICAgICAgIyBBREQgU0VUVElOR1MgU1RPUkFHRSBESVJFQ1RPUlkgSUYgUkVMIFBBVEggSVMgUkVRVUVTVEVECiAgICAgICAgaWYgbm90IF9wYXRoLnN0YXJ0c3dpdGgoIi8iKToKICAgICAgICAgICAgX3BhdGggPSBzZWxmLlJFQ0lQRV9CQVNFX0RJUiArICIvIiArIF9wYXRoCgogICAgICAgIHdpdGggb3BlbihfcGF0aCwgInciKSBhcyBmaWxlOgogICAgICAgICAgICBmaWxlLndyaXRlKGpzb24uZHVtcHMoIF9kaWN0XzBjb250ZW50KSkKCgogICAgZGVmIGxvYWRfanNvbl9maWxlKHNlbGYsIF9wYXRoOiBzdHIpIC0+IGRpY3Q6CgogICAgICAgIGlmIG5vdCBfcGF0aC5zdGFydHN3aXRoKCIvIik6CiAgICAgICAgICAgIF9wYXRoID0gc2VsZi5SRUNJUEVfQkFTRV9ESVIgKyAiLyIgKyBfcGF0aAogICAgICAgIAogICAgICAgICMgVE9ETyBBREQgQ0hFQ0sgRk9SIEZJTEUgRVhTSVRTCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZXR0aW5nc19kaWN0OiBkaWN0ID0ge30KICAgICAgICAgICAgd2l0aCBvcGVuKHNlbGYuUkVDSVBFX0JBU0VfRElSICsgIi8iICsgc2VsZi5TRVRUSU5HU19GSUxFTkFNRSwgInIiKSBhcyBmaWxlOgogICAgICAgICAgICAgICAgc2V0dGluZ3NfZGljdCA9IGpzb24ubG9hZHMoZmlsZS5yZWFkKCkpCiAgICAgICAgICAgIHJldHVybiBzZXR0aW5nc19kaWN0CiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgIyMjIyMjIyMjIyMjIyMjIyBTUEVDSUZJQyBTRVRUSU5HUyBMT0FESU5HIEZVQ1RJT05TICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgogICAgZGVmIHNhdmVfc2NhbGVfY2FsaWJyYXRpb25fdmFsdWVzKHNlbGYsIF9zY2FsZV9jYWxpYnJhdGlvbl8wZzogZmxvYXQsIF9zY2FsZV9jYWxpYnJhdGlvbl81MGc6IGZsb2F0KToKICAgICAgICBzZWxmLnNldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLlNDQUxFX0NBTElCUkFUSU9OX01JTl9WQUxVRSwgc3RyKF9zY2FsZV9jYWxpYnJhdGlvbl8wZykpCiAgICAgICAgc2VsZi5zZXRfc2V0dGluZ3NfZW50cnkoU0VUVElOR1NfRU5UUklFUy5TQ0FMRV9DQUxJQlJBVElPTl9NQVhfVkFMVUUsIHN0cihfc2NhbGVfY2FsaWJyYXRpb25fNTBnKSkKICAgICAgICBzZWxmLnNldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLlNDQUxFX0NBTElCUkFUSU9OX0NBTElCUkFUSU9OX1dFSUdIVCwgc3RyKGNvbmZpZy5DRkdfQ0FMSUJSQVRJT05fV0VJR0hUX1dFSUdIVCkpCgogICAgICAgIHByaW50KCJzYXZlX3NjYWxlX2NhbGlicmF0aW9uX3ZhbHVlcyAoe30te30pIC8ge30iLmZvcm1hdChfc2NhbGVfY2FsaWJyYXRpb25fMGcsIF9zY2FsZV9jYWxpYnJhdGlvbl81MGcsIGNvbmZpZy5DRkdfQ0FMSUJSQVRJT05fV0VJR0hUX1dFSUdIVCkpCgoKICAgIAogICAgZGVmIGdldF9zY2FsZV9jYWxpYnJhdGlvbl9mYWN0b3Ioc2VsZik6CiAgICAgICAgc2NfbWluID0gMC4wCiAgICAgICAgc2NfZnVsbCA9IDUwMDAuMAogICAgICAgIHNjX3dlaWdodCA9IGNvbmZpZy5DRkdfQ0FMSUJSQVRJT05fV0VJR0hUX1dFSUdIVAogICAgICAgIHRyeToKICAgICAgICAgICAgc2NfbWluID0gZmxvYXQoc2VsZi5nZXRfc2V0dGluZ3NfZW50cnkoU0VUVElOR1NfRU5UUklFUy5TQ0FMRV9DQUxJQlJBVElPTl9NSU5fVkFMVUUpKQogICAgICAgICAgICBzY19mdWxsID0gZmxvYXQoc2VsZi5nZXRfc2V0dGluZ3NfZW50cnkoU0VUVElOR1NfRU5UUklFUy5TQ0FMRV9DQUxJQlJBVElPTl9NQVhfVkFMVUUpKQogICAgICAgICAgICBzY193ZWlnaHQgPSBmbG9hdChzZWxmLmdldF9zZXR0aW5nc19lbnRyeShTRVRUSU5HU19FTlRSSUVTLlNDQUxFX0NBTElCUkFUSU9OX0NBTElCUkFUSU9OX1dFSUdIVCkpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLnNhdmVfc2NhbGVfY2FsaWJyYXRpb25fdmFsdWVzKHNjX21pbiwgc2NfZnVsbCkKCgogICAgICAgIGNhbGlicmF0aW9uX2ZhY3RvciA9ICAoc2NfbWluLXNjX2Z1bGwpIC8gc2Nfd2VpZ2h0CiAgICAgICAgcHJpbnQoImdldF9zY2FsZV9jYWxpYnJhdGlvbl9mYWN0b3IgdXNpbmcgKHt9LXt9KSAvIHt9ID0ge30iLmZvcm1hdChzY19taW4sIHNjX2Z1bGwsIHNjX3dlaWdodCwgY2FsaWJyYXRpb25fZmFjdG9yKSkKICAgICAgICByZXR1cm4gY2FsaWJyYXRpb25fZmFjdG9y", "sdcard.py": "IiIiCk1pY3JvUHl0aG9uIGRyaXZlciBmb3IgU0QgY2FyZHMgdXNpbmcgU1BJIGJ1cy4KClJlcXVpcmVzIGFuIFNQSSBidXMgYW5kIGEgQ1MgcGluLiAgUHJvdmlkZXMgcmVhZGJsb2NrcyBhbmQgd3JpdGVibG9ja3MKbWV0aG9kcyBzbyB0aGUgZGV2aWNlIGNhbiBiZSBtb3VudGVkIGFzIGEgZmlsZXN5c3RlbS4KCkV4YW1wbGUgdXNhZ2Ugb24gcHlib2FyZDoKCiAgICBpbXBvcnQgcHliLCBzZGNhcmQsIG9zCiAgICBzZCA9IHNkY2FyZC5TRENhcmQocHliLlNQSSgxKSwgcHliLlBpbi5ib2FyZC5YNSkKICAgIHB5Yi5tb3VudChzZCwgJy9zZDInKQogICAgb3MubGlzdGRpcignLycpCgpFeGFtcGxlIHVzYWdlIG9uIEVTUDgyNjY6CgogICAgaW1wb3J0IG1hY2hpbmUsIHNkY2FyZCwgb3MKICAgIHNkID0gc2RjYXJkLlNEQ2FyZChtYWNoaW5lLlNQSSgxKSwgbWFjaGluZS5QaW4oMTUpKQogICAgb3MubW91bnQoc2QsICcvc2QnKQogICAgb3MubGlzdGRpcignLycpCgoiIiIKCmZyb20gbWljcm9weXRob24gaW1wb3J0IGNvbnN0CmltcG9ydCB0aW1lCgoKX0NNRF9USU1FT1VUID0gY29uc3QoMTAwKQoKX1IxX0lETEVfU1RBVEUgPSBjb25zdCgxIDw8IDApCiMgUjFfRVJBU0VfUkVTRVQgPSBjb25zdCgxIDw8IDEpCl9SMV9JTExFR0FMX0NPTU1BTkQgPSBjb25zdCgxIDw8IDIpCiMgUjFfQ09NX0NSQ19FUlJPUiA9IGNvbnN0KDEgPDwgMykKIyBSMV9FUkFTRV9TRVFVRU5DRV9FUlJPUiA9IGNvbnN0KDEgPDwgNCkKIyBSMV9BRERSRVNTX0VSUk9SID0gY29uc3QoMSA8PCA1KQojIFIxX1BBUkFNRVRFUl9FUlJPUiA9IGNvbnN0KDEgPDwgNikKX1RPS0VOX0NNRDI1ID0gY29uc3QoMHhGQykKX1RPS0VOX1NUT1BfVFJBTiA9IGNvbnN0KDB4RkQpCl9UT0tFTl9EQVRBID0gY29uc3QoMHhGRSkKCgpjbGFzcyBTRENhcmQ6CiAgICBkZWYgX19pbml0X18oc2VsZiwgc3BpLCBjcywgYmF1ZHJhdGU9MTMyMDAwMCk6CiAgICAgICAgc2VsZi5zcGkgPSBzcGkKICAgICAgICBzZWxmLmNzID0gY3MKCiAgICAgICAgc2VsZi5jbWRidWYgPSBieXRlYXJyYXkoNikKICAgICAgICBzZWxmLmR1bW15YnVmID0gYnl0ZWFycmF5KDUxMikKICAgICAgICBzZWxmLnRva2VuYnVmID0gYnl0ZWFycmF5KDEpCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoNTEyKToKICAgICAgICAgICAgc2VsZi5kdW1teWJ1ZltpXSA9IDB4RkYKICAgICAgICBzZWxmLmR1bW15YnVmX21lbW9yeXZpZXcgPSBtZW1vcnl2aWV3KHNlbGYuZHVtbXlidWYpCgogICAgICAgICMgaW5pdGlhbGlzZSB0aGUgY2FyZAogICAgICAgIHNlbGYuaW5pdF9jYXJkKGJhdWRyYXRlKQoKICAgIGRlZiBpbml0X3NwaShzZWxmLCBiYXVkcmF0ZSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBtYXN0ZXIgPSBzZWxmLnNwaS5NQVNURVIKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgICMgb24gRVNQODI2NgogICAgICAgICAgICBzZWxmLnNwaS5pbml0KGJhdWRyYXRlPWJhdWRyYXRlLCBwaGFzZT0wLCBwb2xhcml0eT0wKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgb24gcHlib2FyZAogICAgICAgICAgICBzZWxmLnNwaS5pbml0KG1hc3RlciwgYmF1ZHJhdGU9YmF1ZHJhdGUsIHBoYXNlPTAsIHBvbGFyaXR5PTApCgogICAgZGVmIGluaXRfY2FyZChzZWxmLCBiYXVkcmF0ZSk6CiAgICAgICAgIyBpbml0IENTIHBpbgogICAgICAgIHNlbGYuY3MuaW5pdChzZWxmLmNzLk9VVCwgdmFsdWU9MSkKCiAgICAgICAgIyBpbml0IFNQSSBidXM7IHVzZSBsb3cgZGF0YSByYXRlIGZvciBpbml0aWFsaXNhdGlvbgogICAgICAgIHNlbGYuaW5pdF9zcGkoMTAwMDAwKQoKICAgICAgICAjIGNsb2NrIGNhcmQgYXQgbGVhc3QgMTAwIGN5Y2xlcyB3aXRoIGNzIGhpZ2gKICAgICAgICBmb3IgaSBpbiByYW5nZSgxNik6CiAgICAgICAgICAgIHNlbGYuc3BpLndyaXRlKGIiXHhmZiIpCgogICAgICAgICMgQ01EMDogaW5pdCBjYXJkOyBzaG91bGQgcmV0dXJuIF9SMV9JRExFX1NUQVRFIChhbGxvdyA1IGF0dGVtcHRzKQogICAgICAgIGZvciBfIGluIHJhbmdlKDUpOgogICAgICAgICAgICBpZiBzZWxmLmNtZCgwLCAwLCAweDk1KSA9PSBfUjFfSURMRV9TVEFURToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgT1NFcnJvcigibm8gU0QgY2FyZCIpCgogICAgICAgICMgQ01EODogZGV0ZXJtaW5lIGNhcmQgdmVyc2lvbgogICAgICAgIHIgPSBzZWxmLmNtZCg4LCAweDAxQUEsIDB4ODcsIDQpCiAgICAgICAgaWYgciA9PSBfUjFfSURMRV9TVEFURToKICAgICAgICAgICAgc2VsZi5pbml0X2NhcmRfdjIoKQogICAgICAgIGVsaWYgciA9PSAoX1IxX0lETEVfU1RBVEUgfCBfUjFfSUxMRUdBTF9DT01NQU5EKToKICAgICAgICAgICAgc2VsZi5pbml0X2NhcmRfdjEoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIE9TRXJyb3IoImNvdWxkbid0IGRldGVybWluZSBTRCBjYXJkIHZlcnNpb24iKQoKICAgICAgICAjIGdldCB0aGUgbnVtYmVyIG9mIHNlY3RvcnMKICAgICAgICAjIENNRDk6IHJlc3BvbnNlIFIyIChSMSBieXRlICsgMTYtYnl0ZSBibG9jayByZWFkKQogICAgICAgIGlmIHNlbGYuY21kKDksIDAsIDAsIDAsIEZhbHNlKSAhPSAwOgogICAgICAgICAgICByYWlzZSBPU0Vycm9yKCJubyByZXNwb25zZSBmcm9tIFNEIGNhcmQiKQogICAgICAgIGNzZCA9IGJ5dGVhcnJheSgxNikKICAgICAgICBzZWxmLnJlYWRpbnRvKGNzZCkKICAgICAgICBpZiBjc2RbMF0gJiAweEMwID09IDB4NDA6ICAjIENTRCB2ZXJzaW9uIDIuMAogICAgICAgICAgICBzZWxmLnNlY3RvcnMgPSAoKGNzZFs4XSA8PCA4IHwgY3NkWzldKSArIDEpICogMTAyNAogICAgICAgIGVsaWYgY3NkWzBdICYgMHhDMCA9PSAweDAwOiAgIyBDU0QgdmVyc2lvbiAxLjAgKG9sZCwgPD0yR0IpCiAgICAgICAgICAgIGNfc2l6ZSA9IChjc2RbNl0gJiAwYjExKSA8PCAxMCB8IGNzZFs3XSA8PCAyIHwgY3NkWzhdID4+IDYKICAgICAgICAgICAgY19zaXplX211bHQgPSAoY3NkWzldICYgMGIxMSkgPDwgMSB8IGNzZFsxMF0gPj4gNwogICAgICAgICAgICByZWFkX2JsX2xlbiA9IGNzZFs1XSAmIDBiMTExMQogICAgICAgICAgICBjYXBhY2l0eSA9IChjX3NpemUgKyAxKSAqICgyICoqIChjX3NpemVfbXVsdCArIDIpKSAqICgyKipyZWFkX2JsX2xlbikKICAgICAgICAgICAgc2VsZi5zZWN0b3JzID0gY2FwYWNpdHkgLy8gNTEyCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgT1NFcnJvcigiU0QgY2FyZCBDU0QgZm9ybWF0IG5vdCBzdXBwb3J0ZWQiKQogICAgICAgICMgcHJpbnQoJ3NlY3RvcnMnLCBzZWxmLnNlY3RvcnMpCgogICAgICAgICMgQ01EMTY6IHNldCBibG9jayBsZW5ndGggdG8gNTEyIGJ5dGVzCiAgICAgICAgaWYgc2VsZi5jbWQoMTYsIDUxMiwgMCkgIT0gMDoKICAgICAgICAgICAgcmFpc2UgT1NFcnJvcigiY2FuJ3Qgc2V0IDUxMiBibG9jayBzaXplIikKCiAgICAgICAgIyBzZXQgdG8gaGlnaCBkYXRhIHJhdGUgbm93IHRoYXQgaXQncyBpbml0aWFsaXNlZAogICAgICAgIHNlbGYuaW5pdF9zcGkoYmF1ZHJhdGUpCgogICAgZGVmIGluaXRfY2FyZF92MShzZWxmKToKICAgICAgICBmb3IgaSBpbiByYW5nZShfQ01EX1RJTUVPVVQpOgogICAgICAgICAgICB0aW1lLnNsZWVwX21zKDUwKQogICAgICAgICAgICBzZWxmLmNtZCg1NSwgMCwgMCkKICAgICAgICAgICAgaWYgc2VsZi5jbWQoNDEsIDAsIDApID09IDA6CiAgICAgICAgICAgICAgICAjIFNEU0MgY2FyZCwgdXNlcyBieXRlIGFkZHJlc3NpbmcgaW4gcmVhZC93cml0ZS9lcmFzZSBjb21tYW5kcwogICAgICAgICAgICAgICAgc2VsZi5jZHYgPSA1MTIKICAgICAgICAgICAgICAgICMgcHJpbnQoIltTRENhcmRdIHYxIGNhcmQiKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcmFpc2UgT1NFcnJvcigidGltZW91dCB3YWl0aW5nIGZvciB2MSBjYXJkIikKCiAgICBkZWYgaW5pdF9jYXJkX3YyKHNlbGYpOgogICAgICAgIGZvciBpIGluIHJhbmdlKF9DTURfVElNRU9VVCk6CiAgICAgICAgICAgIHRpbWUuc2xlZXBfbXMoNTApCiAgICAgICAgICAgIHNlbGYuY21kKDU4LCAwLCAwLCA0KQogICAgICAgICAgICBzZWxmLmNtZCg1NSwgMCwgMCkKICAgICAgICAgICAgaWYgc2VsZi5jbWQoNDEsIDB4NDAwMDAwMDAsIDApID09IDA6CiAgICAgICAgICAgICAgICBzZWxmLmNtZCg1OCwgMCwgMCwgLTQpICAjIDQtYnl0ZSByZXNwb25zZSwgbmVnYXRpdmUgbWVhbnMga2VlcCB0aGUgZmlyc3QgYnl0ZQogICAgICAgICAgICAgICAgb2NyID0gc2VsZi50b2tlbmJ1ZlswXSAgIyBnZXQgZmlyc3QgYnl0ZSBvZiByZXNwb25zZSwgd2hpY2ggaXMgT0NSCiAgICAgICAgICAgICAgICBpZiBub3Qgb2NyICYgMHg0MDoKICAgICAgICAgICAgICAgICAgICAjIFNEU0MgY2FyZCwgdXNlcyBieXRlIGFkZHJlc3NpbmcgaW4gcmVhZC93cml0ZS9lcmFzZSBjb21tYW5kcwogICAgICAgICAgICAgICAgICAgIHNlbGYuY2R2ID0gNTEyCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgU0RIQy9TRFhDIGNhcmQsIHVzZXMgYmxvY2sgYWRkcmVzc2luZyBpbiByZWFkL3dyaXRlL2VyYXNlIGNvbW1hbmRzCiAgICAgICAgICAgICAgICAgICAgc2VsZi5jZHYgPSAxCiAgICAgICAgICAgICAgICAjIHByaW50KCJbU0RDYXJkXSB2MiBjYXJkIikKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgIHJhaXNlIE9TRXJyb3IoInRpbWVvdXQgd2FpdGluZyBmb3IgdjIgY2FyZCIpCgogICAgZGVmIGNtZChzZWxmLCBjbWQsIGFyZywgY3JjLCBmaW5hbD0wLCByZWxlYXNlPVRydWUsIHNraXAxPUZhbHNlKToKICAgICAgICBzZWxmLmNzKDApCgogICAgICAgICMgY3JlYXRlIGFuZCBzZW5kIHRoZSBjb21tYW5kCiAgICAgICAgYnVmID0gc2VsZi5jbWRidWYKICAgICAgICBidWZbMF0gPSAweDQwIHwgY21kCiAgICAgICAgYnVmWzFdID0gYXJnID4+IDI0CiAgICAgICAgYnVmWzJdID0gYXJnID4+IDE2CiAgICAgICAgYnVmWzNdID0gYXJnID4+IDgKICAgICAgICBidWZbNF0gPSBhcmcKICAgICAgICBidWZbNV0gPSBjcmMKICAgICAgICBzZWxmLnNwaS53cml0ZShidWYpCgogICAgICAgIGlmIHNraXAxOgogICAgICAgICAgICBzZWxmLnNwaS5yZWFkaW50byhzZWxmLnRva2VuYnVmLCAweEZGKQoKICAgICAgICAjIHdhaXQgZm9yIHRoZSByZXNwb25zZSAocmVzcG9uc2VbN10gPT0gMCkKICAgICAgICBmb3IgaSBpbiByYW5nZShfQ01EX1RJTUVPVVQpOgogICAgICAgICAgICBzZWxmLnNwaS5yZWFkaW50byhzZWxmLnRva2VuYnVmLCAweEZGKQogICAgICAgICAgICByZXNwb25zZSA9IHNlbGYudG9rZW5idWZbMF0KICAgICAgICAgICAgaWYgbm90IChyZXNwb25zZSAmIDB4ODApOgogICAgICAgICAgICAgICAgIyB0aGlzIGNvdWxkIGJlIGEgYmlnLWVuZGlhbiBpbnRlZ2VyIHRoYXQgd2UgYXJlIGdldHRpbmcgaGVyZQogICAgICAgICAgICAgICAgIyBpZiBmaW5hbDwwIHRoZW4gc3RvcmUgdGhlIGZpcnN0IGJ5dGUgdG8gdG9rZW5idWYgYW5kIGRpc2NhcmQgdGhlIHJlc3QKICAgICAgICAgICAgICAgIGlmIGZpbmFsIDwgMDoKICAgICAgICAgICAgICAgICAgICBzZWxmLnNwaS5yZWFkaW50byhzZWxmLnRva2VuYnVmLCAweEZGKQogICAgICAgICAgICAgICAgICAgIGZpbmFsID0gLTEgLSBmaW5hbAogICAgICAgICAgICAgICAgZm9yIGogaW4gcmFuZ2UoZmluYWwpOgogICAgICAgICAgICAgICAgICAgIHNlbGYuc3BpLndyaXRlKGIiXHhmZiIpCiAgICAgICAgICAgICAgICBpZiByZWxlYXNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYuY3MoMSkKICAgICAgICAgICAgICAgICAgICBzZWxmLnNwaS53cml0ZShiIlx4ZmYiKQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlCgogICAgICAgICMgdGltZW91dAogICAgICAgIHNlbGYuY3MoMSkKICAgICAgICBzZWxmLnNwaS53cml0ZShiIlx4ZmYiKQogICAgICAgIHJldHVybiAtMQoKICAgIGRlZiByZWFkaW50byhzZWxmLCBidWYpOgogICAgICAgIHNlbGYuY3MoMCkKCiAgICAgICAgIyByZWFkIHVudGlsIHN0YXJ0IGJ5dGUgKDB4ZmYpCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoX0NNRF9USU1FT1VUKToKICAgICAgICAgICAgc2VsZi5zcGkucmVhZGludG8oc2VsZi50b2tlbmJ1ZiwgMHhGRikKICAgICAgICAgICAgaWYgc2VsZi50b2tlbmJ1ZlswXSA9PSBfVE9LRU5fREFUQToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIHRpbWUuc2xlZXBfbXMoMSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmNzKDEpCiAgICAgICAgICAgIHJhaXNlIE9TRXJyb3IoInRpbWVvdXQgd2FpdGluZyBmb3IgcmVzcG9uc2UiKQoKICAgICAgICAjIHJlYWQgZGF0YQogICAgICAgIG12ID0gc2VsZi5kdW1teWJ1Zl9tZW1vcnl2aWV3CiAgICAgICAgaWYgbGVuKGJ1ZikgIT0gbGVuKG12KToKICAgICAgICAgICAgbXYgPSBtdls6IGxlbihidWYpXQogICAgICAgIHNlbGYuc3BpLndyaXRlX3JlYWRpbnRvKG12LCBidWYpCgogICAgICAgICMgcmVhZCBjaGVja3N1bQogICAgICAgIHNlbGYuc3BpLndyaXRlKGIiXHhmZiIpCiAgICAgICAgc2VsZi5zcGkud3JpdGUoYiJceGZmIikKCiAgICAgICAgc2VsZi5jcygxKQogICAgICAgIHNlbGYuc3BpLndyaXRlKGIiXHhmZiIpCgogICAgZGVmIHdyaXRlKHNlbGYsIHRva2VuLCBidWYpOgogICAgICAgIHNlbGYuY3MoMCkKCiAgICAgICAgIyBzZW5kOiBzdGFydCBvZiBibG9jaywgZGF0YSwgY2hlY2tzdW0KICAgICAgICBzZWxmLnNwaS5yZWFkKDEsIHRva2VuKQogICAgICAgIHNlbGYuc3BpLndyaXRlKGJ1ZikKICAgICAgICBzZWxmLnNwaS53cml0ZShiIlx4ZmYiKQogICAgICAgIHNlbGYuc3BpLndyaXRlKGIiXHhmZiIpCgogICAgICAgICMgY2hlY2sgdGhlIHJlc3BvbnNlCiAgICAgICAgaWYgKHNlbGYuc3BpLnJlYWQoMSwgMHhGRilbMF0gJiAweDFGKSAhPSAweDA1OgogICAgICAgICAgICBzZWxmLmNzKDEpCiAgICAgICAgICAgIHNlbGYuc3BpLndyaXRlKGIiXHhmZiIpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICAjIHdhaXQgZm9yIHdyaXRlIHRvIGZpbmlzaAogICAgICAgIHdoaWxlIHNlbGYuc3BpLnJlYWQoMSwgMHhGRilbMF0gPT0gMDoKICAgICAgICAgICAgcGFzcwoKICAgICAgICBzZWxmLmNzKDEpCiAgICAgICAgc2VsZi5zcGkud3JpdGUoYiJceGZmIikKCiAgICBkZWYgd3JpdGVfdG9rZW4oc2VsZiwgdG9rZW4pOgogICAgICAgIHNlbGYuY3MoMCkKICAgICAgICBzZWxmLnNwaS5yZWFkKDEsIHRva2VuKQogICAgICAgIHNlbGYuc3BpLndyaXRlKGIiXHhmZiIpCiAgICAgICAgIyB3YWl0IGZvciB3cml0ZSB0byBmaW5pc2gKICAgICAgICB3aGlsZSBzZWxmLnNwaS5yZWFkKDEsIDB4RkYpWzBdID09IDB4MDA6CiAgICAgICAgICAgIHBhc3MKCiAgICAgICAgc2VsZi5jcygxKQogICAgICAgIHNlbGYuc3BpLndyaXRlKGIiXHhmZiIpCgogICAgZGVmIHJlYWRibG9ja3Moc2VsZiwgYmxvY2tfbnVtLCBidWYpOgogICAgICAgICMgd29ya2Fyb3VuZCBmb3Igc2hhcmVkIGJ1cywgcmVxdWlyZWQgZm9yIChhdCBsZWFzdCkgc29tZSBLaW5nc3RvbgogICAgICAgICMgZGV2aWNlcywgZW5zdXJlIE1PU0kgaXMgaGlnaCBiZWZvcmUgc3RhcnRpbmcgdHJhbnNhY3Rpb24KICAgICAgICBzZWxmLnNwaS53cml0ZShiIlx4ZmYiKQoKICAgICAgICBuYmxvY2tzID0gbGVuKGJ1ZikgLy8gNTEyCiAgICAgICAgYXNzZXJ0IG5ibG9ja3MgYW5kIG5vdCBsZW4oYnVmKSAlIDUxMiwgIkJ1ZmZlciBsZW5ndGggaXMgaW52YWxpZCIKICAgICAgICBpZiBuYmxvY2tzID09IDE6CiAgICAgICAgICAgICMgQ01EMTc6IHNldCByZWFkIGFkZHJlc3MgZm9yIHNpbmdsZSBibG9jawogICAgICAgICAgICBpZiBzZWxmLmNtZCgxNywgYmxvY2tfbnVtICogc2VsZi5jZHYsIDAsIHJlbGVhc2U9RmFsc2UpICE9IDA6CiAgICAgICAgICAgICAgICAjIHJlbGVhc2UgdGhlIGNhcmQKICAgICAgICAgICAgICAgIHNlbGYuY3MoMSkKICAgICAgICAgICAgICAgIHJhaXNlIE9TRXJyb3IoNSkgICMgRUlPCiAgICAgICAgICAgICMgcmVjZWl2ZSB0aGUgZGF0YSBhbmQgcmVsZWFzZSBjYXJkCiAgICAgICAgICAgIHNlbGYucmVhZGludG8oYnVmKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgQ01EMTg6IHNldCByZWFkIGFkZHJlc3MgZm9yIG11bHRpcGxlIGJsb2NrcwogICAgICAgICAgICBpZiBzZWxmLmNtZCgxOCwgYmxvY2tfbnVtICogc2VsZi5jZHYsIDAsIHJlbGVhc2U9RmFsc2UpICE9IDA6CiAgICAgICAgICAgICAgICAjIHJlbGVhc2UgdGhlIGNhcmQKICAgICAgICAgICAgICAgIHNlbGYuY3MoMSkKICAgICAgICAgICAgICAgIHJhaXNlIE9TRXJyb3IoNSkgICMgRUlPCiAgICAgICAgICAgIG9mZnNldCA9IDAKICAgICAgICAgICAgbXYgPSBtZW1vcnl2aWV3KGJ1ZikKICAgICAgICAgICAgd2hpbGUgbmJsb2NrczoKICAgICAgICAgICAgICAgICMgcmVjZWl2ZSB0aGUgZGF0YSBhbmQgcmVsZWFzZSBjYXJkCiAgICAgICAgICAgICAgICBzZWxmLnJlYWRpbnRvKG12W29mZnNldCA6IG9mZnNldCArIDUxMl0pCiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNTEyCiAgICAgICAgICAgICAgICBuYmxvY2tzIC09IDEKICAgICAgICAgICAgaWYgc2VsZi5jbWQoMTIsIDAsIDB4RkYsIHNraXAxPVRydWUpOgogICAgICAgICAgICAgICAgcmFpc2UgT1NFcnJvcig1KSAgIyBFSU8KCiAgICBkZWYgd3JpdGVibG9ja3Moc2VsZiwgYmxvY2tfbnVtLCBidWYpOgogICAgICAgICMgd29ya2Fyb3VuZCBmb3Igc2hhcmVkIGJ1cywgcmVxdWlyZWQgZm9yIChhdCBsZWFzdCkgc29tZSBLaW5nc3RvbgogICAgICAgICMgZGV2aWNlcywgZW5zdXJlIE1PU0kgaXMgaGlnaCBiZWZvcmUgc3RhcnRpbmcgdHJhbnNhY3Rpb24KICAgICAgICBzZWxmLnNwaS53cml0ZShiIlx4ZmYiKQoKICAgICAgICBuYmxvY2tzLCBlcnIgPSBkaXZtb2QobGVuKGJ1ZiksIDUxMikKICAgICAgICBhc3NlcnQgbmJsb2NrcyBhbmQgbm90IGVyciwgIkJ1ZmZlciBsZW5ndGggaXMgaW52YWxpZCIKICAgICAgICBpZiBuYmxvY2tzID09IDE6CiAgICAgICAgICAgICMgQ01EMjQ6IHNldCB3cml0ZSBhZGRyZXNzIGZvciBzaW5nbGUgYmxvY2sKICAgICAgICAgICAgaWYgc2VsZi5jbWQoMjQsIGJsb2NrX251bSAqIHNlbGYuY2R2LCAwKSAhPSAwOgogICAgICAgICAgICAgICAgcmFpc2UgT1NFcnJvcig1KSAgIyBFSU8KCiAgICAgICAgICAgICMgc2VuZCB0aGUgZGF0YQogICAgICAgICAgICBzZWxmLndyaXRlKF9UT0tFTl9EQVRBLCBidWYpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBDTUQyNTogc2V0IHdyaXRlIGFkZHJlc3MgZm9yIGZpcnN0IGJsb2NrCiAgICAgICAgICAgIGlmIHNlbGYuY21kKDI1LCBibG9ja19udW0gKiBzZWxmLmNkdiwgMCkgIT0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIE9TRXJyb3IoNSkgICMgRUlPCiAgICAgICAgICAgICMgc2VuZCB0aGUgZGF0YQogICAgICAgICAgICBvZmZzZXQgPSAwCiAgICAgICAgICAgIG12ID0gbWVtb3J5dmlldyhidWYpCiAgICAgICAgICAgIHdoaWxlIG5ibG9ja3M6CiAgICAgICAgICAgICAgICBzZWxmLndyaXRlKF9UT0tFTl9DTUQyNSwgbXZbb2Zmc2V0IDogb2Zmc2V0ICsgNTEyXSkKICAgICAgICAgICAgICAgIG9mZnNldCArPSA1MTIKICAgICAgICAgICAgICAgIG5ibG9ja3MgLT0gMQogICAgICAgICAgICBzZWxmLndyaXRlX3Rva2VuKF9UT0tFTl9TVE9QX1RSQU4pCgogICAgZGVmIGlvY3RsKHNlbGYsIG9wLCBhcmcpOgogICAgICAgIGlmIG9wID09IDQ6ICAjIGdldCBudW1iZXIgb2YgYmxvY2tzCiAgICAgICAgICAgIHJldHVybiBzZWxmLnNlY3RvcnMKICAgICAgICBpZiBvcCA9PSA1OiAgIyBnZXQgYmxvY2sgc2l6ZSBpbiBieXRlcwogICAgICAgICAgICByZXR1cm4gNTEy", "main.py": "ZnJvbSB1dGltZSBpbXBvcnQgc2xlZXBfdXMNCmltcG9ydCB1YXN5bmNpbyBhcyBhaW8NCmZyb20gYWlvYnV0dG9uIGltcG9ydCBBSU9CdXR0b24NCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlDQoNCmltcG9ydCBtYWNoaW5lDQppbXBvcnQgdGltZQ0KaW1wb3J0IG1hdGgNCg0KaW1wb3J0IHJhbmRvbQ0KaW1wb3J0IGhlbHBlcg0KI2ltcG9ydCBTY2FsZXMNCmltcG9ydCBjb25maWcNCmltcG9ydCByZWNpcGVfbG9hZGVyDQppbXBvcnQgdWkNCmltcG9ydCBzZXR0aW5ncw0KaW1wb3J0IG1lbnVfbWFuYWdlcg0KaW1wb3J0IG1lbnVfZW50cnkNCmltcG9ydCBsZWRyaW5nDQppbXBvcnQgc3lzdGVtX2NvbW1hbmQNCnByaW50KCJtYWluOiBfX2VudHJ5X18iKQ0KDQoNCg0KQlVUVE9OX0lOREVYX0xFRlQgPSAwDQpCVVRUT05fSU5ERVhfUklHSFQgPSAxDQoNCkJVVFRPTl9QUkVTU0VEID0gMA0KQlVUVE9OX0hPTEQgPSAxDQpCVVRUT05fUkVMRUFTRUQgPSAyDQoNCmxhc3RfbGVmdF9idXR0b25fc3RhdGU6IGludCA9IDANCmJ1dHRvbl9zdGF0ZV9kaWN0OiBsaXN0ID0gWy0xLCAtMV0NCnVzZXJfaW5wdXRfZXZlbnRfcXVldWUgID0gZGVxdWUoKQ0KDQoNCiMgR0VORVJBVEVEIFNZU1RFTSBFVkVOVFMgREVQRU5JTkcgT04gVEhFIFBSRVNTRUQgQlVUVE9OIFRPIE5BVklHQVRFIFRIT1VHSFQgTUVOVVMNCmRlZiBnZW5lcmF0ZV9idXR0b25fc3RhdGUoX2J1dHRvbl9pbmRleDogaW50LCBfYnV0dG9uX2V2ZW50OiBpbnQsIF9idXR0b25fc3RhdGU6IGJvb2wpOg0KICAgICNwcmludCgiQnV0dG9uIHt9IHR5cGUge30gc3RhdGUge30iLmZvcm1hdChfYnV0dG9uX2luZGV4LF9idXR0b25fZXZlbnQsX2J1dHRvbl9zdGF0ZSkpDQogICAgDQogICAgaWYgYnV0dG9uX3N0YXRlX2RpY3RbX2J1dHRvbl9pbmRleF0gPT0gQlVUVE9OX1BSRVNTRUQgYW5kIF9idXR0b25fZXZlbnQgPT0gQlVUVE9OX1JFTEVBU0VEOg0KICAgICAgICAjcHJpbnQoInNob3J0IHByZXNzIikNCiAgICAgICAgY21kOiBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCA9IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kKCkNCiAgICAgICAgaWYgX2J1dHRvbl9pbmRleCA9PSBCVVRUT05fSU5ERVhfTEVGVDoNCiAgICAgICAgICAgIGNtZC50eXBlID0gc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQuTkFWSUdBVElPTl9MRUZUDQogICAgICAgIGVsaWYgX2J1dHRvbl9pbmRleCA9PSBCVVRUT05fSU5ERVhfUklHSFQ6DQogICAgICAgICAgICBjbWQudHlwZSA9IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fUklHSFQNCiAgICAgICAgY21kLmFjdGlvbiA9IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLkNPTU1BTkRfVFlQRV9OQVZJR0FUSU9ODQogICAgICAgIG1lbnVfbWFuYWdlci5tZW51X21hbmFnZXIucHJvY2Vzc191c2VyX2NvbW1hbmRzKGNtZCkNCg0KICAgIGVsaWYgX2J1dHRvbl9ldmVudCA9PSBCVVRUT05fSE9MRDoNCiAgICAgICAgI3ByaW50KCJzaG9ydCBwcmVzcyIpDQogICAgICAgIGNtZDogc3lzdGVtX2NvbW1hbmQuc3lzdGVtX2NvbW1hbmQgPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZCgpDQogICAgICAgIGlmIF9idXR0b25faW5kZXggPT0gQlVUVE9OX0lOREVYX0xFRlQ6DQogICAgICAgICAgICBjbWQudHlwZSA9IHN5c3RlbV9jb21tYW5kLnN5c3RlbV9jb21tYW5kLk5BVklHQVRJT05fRVhJVA0KICAgICAgICBlbGlmIF9idXR0b25faW5kZXggPT0gQlVUVE9OX0lOREVYX1JJR0hUOg0KICAgICAgICAgICAgY21kLnR5cGUgPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5OQVZJR0FUSU9OX0VOVEVSDQogICAgICAgIGNtZC5hY3Rpb24gPSBzeXN0ZW1fY29tbWFuZC5zeXN0ZW1fY29tbWFuZC5DT01NQU5EX1RZUEVfTkFWSUdBVElPTg0KICAgICAgICBtZW51X21hbmFnZXIubWVudV9tYW5hZ2VyLnByb2Nlc3NfdXNlcl9jb21tYW5kcyhjbWQpDQogICAgDQogICAgYnV0dG9uX3N0YXRlX2RpY3RbX2J1dHRvbl9pbmRleF0gPSBfYnV0dG9uX2V2ZW50DQogICANCiAgIA0KICAgDQppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOg0KICAgIA0KICAgICMgSU5JVCBSRUNJUEUgTE9BREVSIEFORCBJTklUIFNEIENBUkQNCiAgICBzZXR0aW5ncy5zZXR0aW5ncygpLmxpc3RfZmlsZXMoKQ0KICAgICMgUkVDSVBFIFNUT1JBR0UNCiAgICByZWNpcGUgPSByZWNpcGVfbG9hZGVyLnJlY2lwZV9sb2FkZXIoKQ0KICAgICMgSU5JVCBMRUQgUklORw0KICAgIGxlZHJpbmcubGVkcmluZygpLnNldF9uZW9waXhlbF9mdWxsKDEwLCAxMCwgMTApDQogICAgIyBJTklUIE1FTlUgU1lTVEVNDQogICAgbWVudV9tYW5hZ2VyLm1lbnVfbWFuYWdlcigpDQoNCg0KDQoNCg0KICAgICMgSU5JVCBVU0VSIElOUFVUIEJVVFRPTlMNCiAgICBsZWZ0X2J1dHRvbl9waW46IG1hY2hpbmUuUGluID0gbWFjaGluZS5QaW4oY29uZmlnLkNGR19CVVRUT05fTEVGVF9QSU4sIG1hY2hpbmUuUGluLklOLCBtYWNoaW5lLlBpbi5QVUxMX1VQKQ0KICAgIGxlZnRfYnV0dG9uID0gQUlPQnV0dG9uKGxhbWJkYSBidG46IG5vdCBsZWZ0X2J1dHRvbl9waW4udmFsdWUoKSkNCiAgICAjIFJlZ2lzdGVyIGJ1dHRvbiBldmVudCBoYW5kbGVycw0KICAgIGxlZnRfYnV0dG9uLnNldF9ob2xkX2hhbmRsZXIobGFtYmRhIGJ0bjogZ2VuZXJhdGVfYnV0dG9uX3N0YXRlKEJVVFRPTl9JTkRFWF9MRUZULCBCVVRUT05fSE9MRCwgYnRuLmdldF9kZWJvdW5jZWQoKSkpICAgDQogICAgbGVmdF9idXR0b24uc2V0X3ByZXNzX2hhbmRsZXIobGFtYmRhIGJ0bjogZ2VuZXJhdGVfYnV0dG9uX3N0YXRlKEJVVFRPTl9JTkRFWF9MRUZULCBCVVRUT05fUFJFU1NFRCwgYnRuLmdldF9kZWJvdW5jZWQoKSkpDQogICAgbGVmdF9idXR0b24uc2V0X3JlbGVhc2VfaGFuZGxlcihsYW1iZGEgYnRuOiBnZW5lcmF0ZV9idXR0b25fc3RhdGUoQlVUVE9OX0lOREVYX0xFRlQsIEJVVFRPTl9SRUxFQVNFRCwgYnRuLmdldF9kZWJvdW5jZWQoKSkpIA0KICAgIA0KICAgIHJpZ2h0X2J1dHRvbl9waW46IG1hY2hpbmUuUGluID0gbWFjaGluZS5QaW4oY29uZmlnLkNGR19CVVRUT05fUklHSFRfUElOLCBtYWNoaW5lLlBpbi5JTiwgbWFjaGluZS5QaW4uUFVMTF9VUCkNCiAgICByaWdodF9idXR0b24gPSBBSU9CdXR0b24obGFtYmRhIGJ0bjogbm90IHJpZ2h0X2J1dHRvbl9waW4udmFsdWUoKSkNCiAgICAjIFJlZ2lzdGVyIGJ1dHRvbiBldmVudCBoYW5kbGVycw0KICAgIHJpZ2h0X2J1dHRvbi5zZXRfaG9sZF9oYW5kbGVyKGxhbWJkYSBidG46IGdlbmVyYXRlX2J1dHRvbl9zdGF0ZShCVVRUT05fSU5ERVhfUklHSFQsIEJVVFRPTl9IT0xELCBidG4uZ2V0X2RlYm91bmNlZCgpKSkgICANCiAgICByaWdodF9idXR0b24uc2V0X3ByZXNzX2hhbmRsZXIobGFtYmRhIGJ0bjogZ2VuZXJhdGVfYnV0dG9uX3N0YXRlKEJVVFRPTl9JTkRFWF9SSUdIVCwgQlVUVE9OX1BSRVNTRUQsIGJ0bi5nZXRfZGVib3VuY2VkKCkpKQ0KICAgIHJpZ2h0X2J1dHRvbi5zZXRfcmVsZWFzZV9oYW5kbGVyKGxhbWJkYSBidG46IGdlbmVyYXRlX2J1dHRvbl9zdGF0ZShCVVRUT05fSU5ERVhfUklHSFQsIEJVVFRPTl9SRUxFQVNFRCwgYnRuLmdldF9kZWJvdW5jZWQoKSkpIA0KICAgIA0KDQoNCg0KICAgIA0KICAgIA0KICAgIA0KICAgDQoNCg0KDQoNCg0KDQoNCiAgICAjIElOSVQgRElTUExBWSAvIFVJIElOU1RBTkNFDQogICAgI3VpLnVpLmluc3RhbmNlKCkuc2hvd190aXRsZXNjcmVlbigpDQoNCiAgICAjIElOSVQgU0NBTEUNCiAgICAjc2NhbGVzID0gU2NhbGVzLlNjYWxlcyhkX291dD1jb25maWcuQ0ZHX0hYNzExX0RPVVRfUElOLCBwZF9zY2s9Y29uZmlnLkNGR19IWDcxMV9TQ0tfUElOKQ0KICAgICNzY2FsZXMudGFyZSgpDQogICAgIyBMT0FEIFNDQUxFIENBTElCVEFUSU9OIFZBTFVFUw0KICAgICNjYWxpYnJhdGlvbl9mYWN0b3IgPSBzZXR0aW5nc19pbnN0YW5jZS5nZXRfc2NhbGVfY2FsaWJyYXRpb25fZmFjdG9yKCkNCiAgICAjcHJpbnQoImNhbGlicmF0aW9uX2ZhY3RvciB7fSIuZm9ybWF0KGNhbGlicmF0aW9uX2ZhY3RvcikpDQogICAgI3NjYWxlcy5zZXRfc2NhbGUoY2FsaWJyYXRpb25fZmFjdG9yKQ0KICAgICNzY2FsZXMudGFyZSgpDQogICAgDQogICAgDQogICAgI3N5c3RlbV9zdGF0ZSA9IFNZU1RBVEVfSURMRSAjU1lTVEVNU1RBVEVfRU5URVJfTUFJTk1FTlUgI1NZU1RFTVNUQVRFX1VQREFURV9NT0RFDQogICAgI3VzZXJfY21kOiBtZW51X21hbmFnZXIubWVudV9jb21tYW5kID0gbWVudV9tYW5hZ2VyLm1lbnVfY29tbWFuZCgpDQoNCg0KICAgIGFzeW5jIGRlZiBtYWluX3Rhc2soKToNCiAgICAgICAgIyBDUkVBVEUgVEFTS1MgRk9SIFVTRVIgSU5QVVQNCiAgICAgICAgdGFza19sZWZ0ID0gYWlvLmNyZWF0ZV90YXNrKGxlZnRfYnV0dG9uLmNvcm9fY2hlY2soKSkNCiAgICAgICAgdGFza19yaWdodCA9IGFpby5jcmVhdGVfdGFzayhyaWdodF9idXR0b24uY29yb19jaGVjaygpKQ0KDQoNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIGF3YWl0IGFpby5zbGVlcF9tcygxKQ0KICAgIA0KICAgIGFpby5ydW4obWFpbl90YXNrKCkpDQo="}

# FOR DEBUGGING
ALWAYS_HARD_RESTORE: bool = False

RESTORE_IGNORED_FILES_LIST = ['static_modules', 'thridparty_libs', 'boot.py', 'lib']

def restore_filesystem(_basepath: str = "/", _override: bool = False, _erase: bool = False):
    import ubinascii
    import os

    if _erase:
        print("erase enabled")
        for f in os.listdir():
            if f in __file__:
                print("skipping {} to vaoid installer override".format(f))
                continue 
            
            # UGLY REWORK
            for n in RESTORE_IGNORED_FILES_LIST:
                if n in f:
                    print("skipping {} to vaoid installer override".format(f))
                    continue

            os.remove(f)

    for k in FILE_DATA:

        if k in os.listdir() and not _override:
            continue
        
        print(k)
        d = FILE_DATA[k]
        ubinascii.a2b_base64(d)

        with open(_basepath + "/" + k, "w") as file:
            file.write(ubinascii.a2b_base64(d))

    # CLEANUP
    del ubinascii
    del os


def restore():
    import machine
    import time
    RESTORE_BUTTON_PIN: int = 14
    RESTORE_LED_PIN: int = 25

    push_button_restore = machine.Pin(RESTORE_BUTTON_PIN, machine.Pin.IN, machine.Pin.PULL_UP)
    led_onboard = machine.Pin(RESTORE_LED_PIN, machine.Pin.OUT)

    if not push_button_restore.value() or ALWAYS_HARD_RESTORE:
        led_onboard.on()
        time.sleep(0.2)
        led_onboard.off()
        time.sleep(0.2)
        led_onboard.on()
        time.sleep(0.2)
        led_onboard.on()
        # RESTORE HARD OVERRIDE USER CHANGES
        restore_filesystem(_override=True, _erase=True)
        led_onboard.off()

    else:
        led_onboard.on()
        # RESTORE SOFT ONLY ADD MISSING FILES IN VIRTUAL FS
        restore_filesystem()
        led_onboard.off()

    # RESTORE PIN STATE
    machine.Pin(RESTORE_BUTTON_PIN, machine.Pin.IN, machine.Pin.OPEN_DRAIN)
    machine.Pin(RESTORE_LED_PIN, machine.Pin.IN)
    
    del machine


if __name__ == "__main__":
    restore()

